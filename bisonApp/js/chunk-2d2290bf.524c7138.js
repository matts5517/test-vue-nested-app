(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2290bf"],{dc7a:function(t,e,n){"use strict";n.r(e),n.d(e,"loadGLTFMesh",(function(){return T}));var r=n("9ef0"),o=n("2eab"),c=n("b2b2"),a=n("1c92"),i=n("dae5"),s=n("0b2d"),u=n("0fc4"),b=n("f0ba"),l=n("83fa"),f=n("88da"),O=n("f5e7"),j=n("8190"),d=n("668b"),p=n("e4c1"),m=n("7e2d"),x=n("e9ba"),g=n("2b60"),w=n("3c3b"),v=n("087c"),h=n("1038"),y=n("0613"),C=n("4c96"),A=n("1c20"),B=n("dc56");async function T(t,e,n){const r=new g["a"](F(n)),o=(await Object(w["a"])(r,e,n,!0)).model,a=o.lods.shift(),i=new Map,s=new Map;o.textures.forEach((t,e)=>i.set(e,I(t))),o.materials.forEach((t,e)=>s.set(e,E(t,i)));const u=M(a);for(const c of a.parts)S(u,c,s);const{position:b,normal:l,tangent:f,color:j,texCoord0:d}=u.vertexAttributes,p={position:b.typedBuffer,normal:Object(c["i"])(l)?l.typedBuffer:null,tangent:Object(c["i"])(f)?f.typedBuffer:null,uv:Object(c["i"])(d)?d.typedBuffer:null,color:Object(c["i"])(j)?j.typedBuffer:null},m=Object(x["c"])(p,t,n);return{transform:m.transform,components:u.components,spatialReference:t.spatialReference,vertexAttributes:new O["c"]({position:m.vertexAttributes.position,normal:m.vertexAttributes.normal,tangent:m.vertexAttributes.tangent,color:p.color,uv:p.uv})}}function F(t){return null!=t&&t.resolveFile?{busy:!1,request:async(e,n,r)=>{const a=t.resolveFile(e),i="image"===n?"image":"binary"===n?"array-buffer":"json";return(await Object(o["default"])(a,{responseType:i,signal:Object(c["i"])(r)?r.signal:null})).data}}:null}function M(t){let e=0;const n={color:!1,tangent:!1,normal:!1,texCoord0:!1};for(const{attributes:{position:r,normal:o,color:c,tangent:a,texCoord0:i}}of t.parts)e+=r.count,o&&(n.normal=!0),c&&(n.color=!0),a&&(n.tangent=!0),i&&(n.texCoord0=!0);return{writeIndex:0,vertexAttributes:{position:Object(m["a"])(j["v"],e),normal:n.normal?Object(m["a"])(j["u"],e):null,tangent:n.tangent?Object(m["a"])(j["C"],e):null,color:n.color?Object(m["a"])(j["J"],e):null,texCoord0:n.texCoord0?Object(m["a"])(j["m"],e):null},components:[]}}function I(t){return new f["a"]({data:t.data,wrap:R(t.parameters.wrap)})}function E(t,e){const n=new r["a"](z(t.color,t.opacity)),o=t.emissiveFactor?new r["a"](L(t.emissiveFactor)):null;return new l["a"]({color:n,colorTexture:Object(c["p"])(Object(c["b"])(t.textureColor,t=>e.get(t))),normalTexture:Object(c["p"])(Object(c["b"])(t.textureNormal,t=>e.get(t))),emissiveColor:o,emissiveTexture:Object(c["p"])(Object(c["b"])(t.textureEmissive,t=>e.get(t))),occlusionTexture:Object(c["p"])(Object(c["b"])(t.textureOcclusion,t=>e.get(t))),alphaMode:J(t.alphaMode),alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,metallic:t.metallicFactor,roughness:t.roughnessFactor,metallicRoughnessTexture:Object(c["p"])(Object(c["b"])(t.textureMetallicRoughness,t=>e.get(t)))})}function S(t,e,n){const{position:r,normal:o,tangent:s,color:u,texCoord0:l}=t.vertexAttributes,f=t.writeIndex,O=e.attributes.position.count;if(Object(d["e"])(r.slice(f,O),e.attributes.position,e.transform),Object(c["i"])(e.attributes.normal)&&Object(c["i"])(o)){const t=Object(a["a"])(Object(i["b"])(),e.transform);Object(d["a"])(o.slice(f,O),e.attributes.normal,t)}else Object(c["i"])(o)&&Object(C["b"])(o,0,0,1,{dstIndex:f,count:O});if(Object(c["i"])(e.attributes.tangent)&&Object(c["i"])(s)){const t=Object(a["a"])(Object(i["b"])(),e.transform);Object(p["c"])(s.slice(f,O),e.attributes.tangent,t)}else Object(c["i"])(s)&&Object(A["b"])(s,0,0,1,1,{dstIndex:f,count:O});if(Object(c["i"])(e.attributes.texCoord0)&&Object(c["i"])(l)?Object(B["b"])(l.slice(f,O),e.attributes.texCoord0):Object(c["i"])(l)&&Object(B["a"])(l,0,0,{dstIndex:f,count:O}),Object(c["i"])(e.attributes.color)&&Object(c["i"])(u)){const t=e.attributes.color,n=u.slice(f,O);if(4===t.elementCount)t instanceof j["C"]?Object(p["b"])(n,t,255):t instanceof j["J"]?Object(A["a"])(n,t):t instanceof j["H"]&&Object(p["a"])(n,t,8);else{Object(A["b"])(n,255,255,255,255);const e=j["B"].fromTypedArray(n.typedBuffer,n.typedBufferStride);t instanceof j["u"]?Object(d["d"])(e,t,255):t instanceof j["B"]?Object(C["a"])(e,t):t instanceof j["z"]&&Object(d["b"])(e,t,8)}}else Object(c["i"])(u)&&Object(A["b"])(u.slice(f,O),255,255,255,255);const m=k(e.indices||O,e.primitiveType);if(f)for(let c=0;c<m.length;c++)m[c]+=f;t.components.push(new b["a"]({faces:m,material:n.get(e.material).clone(),trustSourceNormals:!0})),t.writeIndex+=O}function k(t,e){switch(e){case 4:return Object(v["c"])(t,h["d"]);case 5:return Object(v["b"])(t);case 6:return Object(v["a"])(t)}}function J(t){switch(t){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function R(t){return{horizontal:N(t.s),vertical:N(t.t)}}function N(t){switch(t){case 33071:return"clamp";case 33648:return"mirror";case 10497:return"repeat"}}function q(t){return t**(1/y["a"])*255}function z(t,e){return Object(u["c"])(q(t[0]),q(t[1]),q(t[2]),e)}function L(t){return Object(s["g"])(q(t[0]),q(t[1]),q(t[2]))}}}]);
//# sourceMappingURL=chunk-2d2290bf.524c7138.js.map