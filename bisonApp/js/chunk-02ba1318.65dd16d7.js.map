{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","webpack:///./node_modules/@arcgis/core/layers/graphics/sources/support/MemorySourceWorker.js","webpack:///./node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","webpack:///./node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js","webpack:///./node_modules/@arcgis/core/layers/graphics/objectIdUtils.js","webpack:///./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js"],"names":["d","n","minX","minY","maxX","maxY","t","i","s","search","e","this","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","_loadIndex","Array","size","forEach","clear","load","length","filter","has","get","delete","remove","set","push","x","T","xmin","ymin","xmax","ymax","spatialReference","q","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","R","z","hasZ","D","m","hasM","O","_queryEngine","_nextObjectId","destroy","_requiredFields","_fieldsIndex","_createDefaultAttributes","features","r","_inferLayerProperties","fields","a","p","h","g","I","b","geometryType","F","objectIdField","timeInfo","name","message","some","type","editable","nullable","unshift","alias","l","field","jsonValues","indexOf","startTimeField","endTimeField","trackIdField","details","w","warnings","featureErrors","layerDefinition","drawingInfo","templates","extent","assignedObjectIds","featureStore","cacheSpatialQueries","S","_loadInitialFeatures","Promise","all","adds","updates","_applyEdits","executeQuery","signal","executeQueryForCount","executeQueryForIds","executeQueryForExtent","executeQueryForSnapping","o","geometry","toLowerCase","u","uid","attributes","_assignObjectId","addMany","fullExtent","start","end","timeExtent","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","f","y","c","getFeature","add","isFinite","code","description","error","globalId","objectId","success","uniqueId","Set","originalValue","sanitizedValue","parseFloat","String","TypeError","simplify","async","getObjectId","getAttributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","centroid","geometryInfo","_boundsStore","_featuresById","_markedIds","events","featureAdapter","numFeatures","Math","min","max","coords","featureCount","vertexCount","_add","_emitChanged","_remove","invalidateIndex","forEachInBounds","emit","getLogger","feature","displayId","onFeatureAdd","onFeatureRemove","renderer","symbol","JSON","stringify","Function","prototype","attachment","data","isVersioned","supportsAttachment","supportsM","supportsZ","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","query","queryRelated","supportsCount","editing","supportsGeometryUpdate","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsRollbackOnFailure","supportsUpdateWithoutM","supportsUploadWithItemId","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsUpdateByAnonymous","supportsUpdateByOthers","compareMinX","compareMinY","toBBox","_maxEntries","_minEntries","ceil","_initFormat","M","prune","X","Y","B","_all","children","leaf","pop","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","pushArray","log","j","sqrt","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","join","deallocator","_","super","arguments"],"mappings":"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","file":"js/chunk-02ba1318.65dd16d7.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i,s,d){n.minX=s[0],n.minY=s[1],n.maxX=s[2],n.maxY=s[3],i.search(n,d)}class e{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),t(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{e as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{getJsonType as t,isPoint as i}from\"../../../../geometry/support/jsonUtils.js\";import{WGS84 as s}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{convertFromFeatures as r,convertToFeature as n,convertFromFeature as a}from\"../../featureConversionUtils.js\";import{initialObjectId as l,findLastObjectIdFromFeatures as o}from\"../../objectIdUtils.js\";import d from\"../../data/FeatureStore.js\";import{checkProjectionSupport as u,project as p}from\"../../data/projectionSupport.js\";import f from\"../../data/QueryEngine.js\";import{createDefaultAttributesFunction as y,createDrawingInfo as c,createDefaultTemplate as m}from\"./clientSideDefaults.js\";import{loadGeometryEngineForSimplify as h,createFeatureEditErrorResult as g,mixAttributes as I,createFeatureEditSuccessResult as b,simplify as F}from\"./sourceUtils.js\";import _ from\"../../../support/FieldsIndex.js\";import{kebabDict as j}from\"../../../support/fieldType.js\";import{getFieldDefaultValue as E}from\"../../../support/fieldUtils.js\";const x=s,T={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:s},q={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function R(e){return i(e)?null!=e.z:!!e.hasZ}function D(e){return i(e)?null!=e.m:!!e.hasM}class O{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null}async load(t){const i=[],{features:s}=t,r=this._inferLayerProperties(s,t.fields),n=t.fields||[],a=null!=t.hasM?t.hasM:r.hasM,p=null!=t.hasZ?t.hasZ:r.hasZ,h=!t.spatialReference&&!r.spatialReference,g=h?x:t.spatialReference||r.spatialReference,I=h?T:null,b=t.geometryType||r.geometryType,F=!b;let R=t.objectIdField||r.objectIdField,D=t.timeInfo;if(!F&&(h&&i.push({name:\"feature-layer:spatial-reference-not-found\",message:\"Spatial reference not provided or found in features. Defaults to WGS84\"}),!b))throw new e(\"feature-layer:missing-property\",\"geometryType not set and couldn't be inferred from the provided features\");if(!R)throw new e(\"feature-layer:missing-property\",\"objectIdField not set and couldn't be found in the provided fields\");if(r.objectIdField&&R!==r.objectIdField&&(i.push({name:\"feature-layer:duplicated-oid-field\",message:`Provided objectIdField \"${R}\" doesn't match the field name \"${r.objectIdField}\", found in the provided fields`}),R=r.objectIdField),R&&!r.objectIdField){let e=null;n.some((t=>t.name===R&&(e=t,!0)))?(e.type=\"esriFieldTypeOID\",e.editable=!1,e.nullable=!1):n.unshift({alias:R,name:R,type:\"esriFieldTypeOID\",editable:!1,nullable:!1})}for(const l of n){if(null==l.name&&(l.name=l.alias),null==l.alias&&(l.alias=l.name),!l.name)throw new e(\"feature-layer:invalid-field-name\",\"field name is missing\",{field:l});if(l.name===R&&(l.type=\"esriFieldTypeOID\"),-1===j.jsonValues.indexOf(l.type))throw new e(\"feature-layer:invalid-field-type\",`invalid type for field \"${l.name}\"`,{field:l})}const O={};this._requiredFields=[];for(const e of n)if(\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type){e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable;const t=E(e);e.nullable||void 0!==t?O[e.name]=t:this._requiredFields.push(e)}if(this._fieldsIndex=new _(n),this._createDefaultAttributes=y(O,R),D){if(D.startTimeField){const e=this._fieldsIndex.get(D.startTimeField);e?(D.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):D.startTimeField=null}if(D.endTimeField){const e=this._fieldsIndex.get(D.endTimeField);e?(D.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):D.endTimeField=null}if(D.trackIdField){const e=this._fieldsIndex.get(D.trackIdField);e?D.trackIdField=e.name:(D.trackIdField=null,i.push({name:\"feature-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:D}}))}D.startTimeField||D.endTimeField||(i.push({name:\"feature-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing or invalid\",details:{timeInfo:D}}),D=null)}const w={warnings:i,featureErrors:[],layerDefinition:{...q,drawingInfo:c(b),templates:m(O),extent:I,geometryType:b,objectIdField:R,fields:n,hasZ:!!p,hasM:!!a,timeInfo:D},assignedObjectIds:{}};if(this._queryEngine=new f({fields:n,geometryType:b,hasM:a,hasZ:p,objectIdField:R,spatialReference:g,featureStore:new d({geometryType:b,hasM:a,hasZ:p}),timeInfo:D,cacheSpatialQueries:!0}),!s||!s.length)return this._nextObjectId=l,w;const S=o(R,s);return this._nextObjectId=S+1,await u(s,g),this._loadInitialFeatures(w,s)}async applyEdits(e){const{spatialReference:t,geometryType:i}=this._queryEngine;return await Promise.all([h(t,i),u(e.adds,t),u(e.updates,t)]),this._applyEdits(e)}queryFeatures(e,t={}){return this._queryEngine.executeQuery(e,t.signal)}queryFeatureCount(e,t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}queryObjectIds(e,t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}queryExtent(e,t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}querySnapping(e,t={}){return this._queryEngine.executeQueryForSnapping(e,t.signal)}_inferLayerProperties(e,i){let s,r,n=null,a=null,l=null;for(const o of e){const e=o.geometry;if(e&&(n||(n=t(e)),a||(a=e.spatialReference),null==s&&(s=R(e)),null==r&&(r=D(e)),n&&a&&null!=s&&null!=r))break}if(i&&i.length){let e=null;i.some((t=>{const i=\"esriFieldTypeOID\"===t.type,s=!t.type&&t.name&&\"objectid\"===t.name.toLowerCase();return e=t,i||s}))&&(l=e.name)}return{geometryType:n,spatialReference:a,objectIdField:l,hasM:r,hasZ:s}}_loadInitialFeatures(e,i){const{geometryType:s,hasM:n,hasZ:a,objectIdField:l,spatialReference:o,featureStore:d}=this._queryEngine,u=[];for(const r of i){if(null!=r.uid&&(e.assignedObjectIds[r.uid]=-1),r.geometry&&s!==t(r.geometry)){e.featureErrors.push(g(\"Incorrect geometry type.\"));continue}const i=this._createDefaultAttributes(),n=I(this._fieldsIndex,i,r.attributes,this._requiredFields,!0,e.warnings);n?e.featureErrors.push(n):(this._assignObjectId(i,r.attributes,!0),r.attributes=i,null!=r.uid&&(e.assignedObjectIds[r.uid]=r.attributes[l]),r.geometry&&(r.geometry=p(r.geometry,r.geometry.spatialReference,o)),u.push(r))}if(d.addMany(r([],u,s,a,n,l)),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){const{start:t,end:i}=this._queryEngine.timeExtent;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e}_applyEdits(e){const{adds:t,updates:i,deletes:s}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(r,t),i&&i.length&&this._applyUpdateEdits(r,i),s&&s.length){for(const e of s)r.deleteResults.push(b(e));this._queryEngine.featureStore.removeManyById(s)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:r}}_applyAddEdits(e,i){const{addResults:s}=e,{geometryType:n,hasM:a,hasZ:l,objectIdField:o,spatialReference:d,featureStore:u}=this._queryEngine,f=[];for(const r of i){if(r.geometry&&n!==t(r.geometry)){s.push(g(\"Incorrect geometry type.\"));continue}const i=this._createDefaultAttributes(),a=I(this._fieldsIndex,i,r.attributes,this._requiredFields);if(a)s.push(a);else{if(this._assignObjectId(i,r.attributes),r.attributes=i,null!=r.uid){const t=r.attributes[o];e.uidToObjectId[r.uid]=t}r.geometry&&(r.geometry=p(F(r.geometry,d),r.geometry.spatialReference,d)),f.push(r),s.push(b(r.attributes[o]))}}u.addMany(r([],f,n,l,a,o))}_applyUpdateEdits({updateResults:e},i){const{geometryType:s,hasM:r,hasZ:l,objectIdField:o,spatialReference:d,featureStore:u}=this._queryEngine;for(const f of i){const{attributes:i,geometry:y}=f,c=i&&i[o];if(null==c){e.push(g(`Identifier field ${o} missing`));continue}if(!u.has(c)){e.push(g(`Feature with object id ${c} missing`));continue}const m=n(u.getFeature(c),s,l,r);if(y){if(s!==t(y)){e.push(g(\"Incorrect geometry type.\"));continue}m.geometry=p(F(y,d),y.spatialReference,d)}if(i){const t=I(this._fieldsIndex,m.attributes,i,this._requiredFields);if(t){e.push(t);continue}}u.add(a(m,s,l,r,o)),e.push(b(c))}}_assignObjectId(e,t,i=!1){const s=this._queryEngine.objectIdField;i&&t&&isFinite(t[s])?e[s]=t[s]:e[s]=this._nextObjectId++}}export default O;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isValid as t}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{sanitizeNullFieldValue as e,validateFieldValue as n,validationErrorToString as i,isNumericField as r,isStringField as s}from\"../../../support/fieldUtils.js\";class o{constructor(){this.code=null,this.description=null}}class l{constructor(t){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function u(t){return new l(t)}class a{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function c(t){return new a(t)}const f=new Set;function d(t,e,r,s,o=!1,l){f.clear();for(const a in r){const s=t.get(a);if(!s)continue;const c=r[a],d=m(s,c);if(d!==c&&l&&l.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:s,originalValue:c,sanitizedValue:d}}),f.add(s.name),s&&(o||s.editable)){const t=n(s,d);if(t)return u(i(t,s,d));e[s.name]=d}}if(s)for(const n of s)if(!f.has(n.name))return u(`missing required field \"${n.name}\"`);return null}function m(t,n){let i=n;return\"string\"==typeof n&&r(t)?i=parseFloat(n):null!=n&&s(t)&&\"string\"!=typeof n&&(i=String(n)),e(i)}let p;function h(e,n){if(!e||!t(n))return e;if(\"rings\"in e||\"paths\"in e){if(!p)throw new TypeError(\"geometry engine not loaded\");return p.simplify(n,e)}return e}async function g(){return p||(p=await import(\"../../../../geometry/geometryEngineJSON.js\"),p)}async function y(e,n){!t(e)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await g()}export{u as createFeatureEditErrorResult,c as createFeatureEditSuccessResult,g as loadGeometryEngine,y as loadGeometryEngineForSimplify,d as mixAttributes,h as simplify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{getCentroidOptimizedGeometry as t}from\"../centroid.js\";import e from\"../OptimizedFeature.js\";import r from\"../OptimizedGeometry.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,r)=>new e(r,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(e,o)=>(e.centroid||(e.centroid=t(new r,e.geometry,o.hasZ,o.hasM)),e.centroid)};export default o;export{o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Evented.js\";import r from\"../../../core/Logger.js\";import{isSome as s}from\"../../../core/maybe.js\";import{fromRect as o}from\"../../../geometry/support/aaBoundingBox.js\";import{create as i,NEGATIVE_INFINITY as a}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as d}from\"../featureConversionUtils.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";class u{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new t,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=i(a);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(o(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(t){if(!t)return;const o=t.objectId;if(null==o)return void r.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:t}));const a=this._featuresById.get(o);let n;if(this._markedIds.add(o),a?(t.displayId=a.displayId,n=this._boundsStore.get(o),this._boundsStore.delete(o)):s(this.onFeatureAdd)&&this.onFeatureAdd(t),!t.geometry||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(o,null),void this._featuresById.set(o,t);n=d(n||i(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(o,n),this._featuresById.set(o,t)}_remove(e){return s(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}export default u;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/has.js\";import{clone as s}from\"../../../../core/lang.js\";import{queryCapabilities as e}from\"../../data/QueryEngineCapabilities.js\";import{defaultPointSymbolJSON as r,defaultPolylineSymbolJSON as p,defaultPolygonSymbolJSON as o}from\"../../../../symbols/support/defaultsJSON.js\";function u(t){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===t||\"esriGeometryMultipoint\"===t?r:\"esriGeometryPolyline\"===t?p:o}}}function n(s,e){if(t(\"csp-restrictions\"))return()=>({[e]:null,...s});try{let t=`this.${e} = null;`;for(const e in s){t+=`this${e.indexOf(\".\")?`[\"${e}\"]`:`.${e}`} = ${JSON.stringify(s[e])};`}const r=new Function(t);return()=>new r}catch(r){return()=>({[e]:null,...s})}}function i(t={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:s(t)}}]}function a(t,s){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:s,supportsDelete:s,supportsEditing:s,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:s,supportsExceedsLimitStatistics:!0},query:e,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:s,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}export{a as createCapabilities,n as createDefaultAttributesFunction,i as createDefaultTemplate,u as createDrawingInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst t=1;function n(t,n){let o=0;for(const r of n){var e;const n=null==(e=r.attributes)?void 0:e[t];\"number\"==typeof n&&isFinite(n)&&(o=Math.max(o,n))}return o}export{n as findLastObjectIdFromFeatures,t as initialObjectId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{indexOf as t,PositionHint as i}from\"../../arrayUtils.js\";import{assumeNonNull as n}from\"../../maybe.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(i){if(!i)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(i);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=n(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=t(s.children,i,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice(t(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(t,i,e,h,a){const r=[i,e];for(;r.length;){const i=n(r.pop()),e=n(r.pop());if(i-e<=h)continue;const o=e+Math.ceil((i-e)/h/2)*h;s(t,o,e,i,a),r.push(e,o,o,i)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new i}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export default h;export{_ as BBox,h as PooledRBush};\n"],"sourceRoot":""}