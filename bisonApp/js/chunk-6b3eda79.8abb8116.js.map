{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/layers/GraphicsLayer.js","webpack:///./node_modules/@arcgis/core/layers/MapNotesLayer.js","webpack:///./node_modules/@arcgis/core/layers/graphics/objectIdUtils.js"],"names":["r","super","this","elevationInfo","graphics","screenSizePerspectiveEnabled","type","internal","removeAll","destroy","add","addMany","remove","removeMany","e","on","emit","prototype","readOnly","constructOnly","h","F","layers","some","layerDefinition","visibilityField","G","name","alias","nullable","editable","_","P","arguments","visibilityMode","sourceLayer","layer","item","k","geometryType","geometryTypeJSON","layerId","title","identifyingSymbol","toJSON","z","capabilities","operations","supportsMapNotesEditing","featureCollections","featureCollectionJSON","featureCollectionType","legendEnabled","minScale","maxScale","spatialReference","WGS84","sublayers","map","id","t","origin","o","i","read","items","featureCollection","length","xmin","ymin","xmax","ymax","fromJSON","reduce","extent","union","_findSublayer","l","a","featureSet","n","s","find","drawingInfo","renderer","symbol","features","geometry","attributes","popupInfo","popupTemplate","push","p","y","m","messages","u","c","_writeMapNoteSublayer","addResolvingPromise","loadFromPortal","supportedTypes","Promise","resolve","Object","assign","forEach","_writeMapNote","_normalizeObjectIds","objectIdField","fields","graphic","Set","has","json","origins","write","enabled","target","ignoreOrigin","Number","nonNullable","value","B","isFinite","Math","max"],"mappings":"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","file":"js/chunk-6b3eda79.8abb8116.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{subclass as o}from\"../core/accessorSupport/decorators/subclass.js\";import s from\"./Layer.js\";import{BlendLayer as t}from\"./mixins/BlendLayer.js\";import{ScaleRangeLayer as i}from\"./mixins/ScaleRangeLayer.js\";import p,{graphicsCollectionProperty as a}from\"../support/GraphicsCollection.js\";import c from\"../symbols/support/ElevationInfo.js\";let n=class extends(t(i(s))){constructor(r){super(r),this.elevationInfo=null,this.graphics=new p,this.screenSizePerspectiveEnabled=!0,this.type=\"graphics\",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(r){return this.graphics.add(r),this}addMany(r){return this.graphics.addMany(r),this}removeAll(){return this.graphics.removeAll(),this}remove(r){this.graphics.remove(r)}removeMany(r){this.graphics.removeMany(r)}on(r,e){return super.on(r,e)}graphicChanged(r){this.emit(\"graphic-update\",r)}};r([e({type:c})],n.prototype,\"elevationInfo\",void 0),r([e(a())],n.prototype,\"graphics\",void 0),r([e({type:[\"show\",\"hide\"]})],n.prototype,\"listMode\",void 0),r([e()],n.prototype,\"screenSizePerspectiveEnabled\",void 0),r([e({readOnly:!0})],n.prototype,\"type\",void 0),r([e({constructOnly:!0})],n.prototype,\"internal\",void 0),n=r([o(\"esri.layers.GraphicsLayer\")],n);var h=n;export default h;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import t from\"../Graphic.js\";import\"../symbols.js\";import r from\"../core/Collection.js\";import o from\"../core/Error.js\";import{clone as i}from\"../core/lang.js\";import{isNone as l,isSome as a}from\"../core/maybe.js\";import{MultiOriginJSONMixin as n}from\"../core/MultiOriginJSONSupport.js\";import{setDeepValue as s}from\"../core/object.js\";import p from\"../core/Warning.js\";import{property as y}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{reader as m}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as u}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as c}from\"../core/accessorSupport/decorators/writer.js\";import{canProjectWithoutEngine as f,isLoaded as d,load as g,project as b}from\"../geometry/projection.js\";import{normalizeCentralMeridian as S}from\"../geometry/support/normalizeUtils.js\";import{equals as h}from\"../geometry/support/spatialReferenceUtils.js\";import O from\"./FeatureLayer.js\";import w from\"./GraphicsLayer.js\";import j from\"./Layer.js\";import{findLastObjectIdFromFeatures as N}from\"./graphics/objectIdUtils.js\";import{BlendLayer as L}from\"./mixins/BlendLayer.js\";import{OperationalLayer as v}from\"./mixins/OperationalLayer.js\";import{PortalLayer as J}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as x}from\"./mixins/ScaleRangeLayer.js\";import T from\"./support/Field.js\";import C from\"../symbols/SimpleFillSymbol.js\";import M from\"../symbols/SimpleLineSymbol.js\";import I from\"../symbols/SimpleMarkerSymbol.js\";import R from\"../symbols/TextSymbol.js\";import E from\"../geometry/SpatialReference.js\";import D from\"../geometry/Extent.js\";function F(e){return e.layers.some((e=>null!=e.layerDefinition.visibilityField))}const G=new T({name:\"OBJECTID\",alias:\"OBJECTID\",type:\"oid\",nullable:!1,editable:!1}),_=new T({name:\"title\",alias:\"Title\",type:\"string\",nullable:!0,editable:!0});let P=class extends w{constructor(){super(...arguments),this.visibilityMode=\"inherited\"}initialize(){for(const e of this.graphics)e.sourceLayer=this.layer;this.graphics.on(\"after-add\",(e=>{e.item.sourceLayer=this.layer})),this.graphics.on(\"after-remove\",(e=>{e.item.sourceLayer=null}))}get sublayers(){return this.graphics}};e([y({readOnly:!0})],P.prototype,\"sublayers\",null),e([y()],P.prototype,\"layer\",void 0),e([y({readOnly:!0})],P.prototype,\"visibilityMode\",void 0),P=e([u(\"esri.layers.MapNotesLayer.MapNotesSublayer\")],P);const k=[{geometryType:\"polygon\",geometryTypeJSON:\"esriGeometryPolygon\",layerId:\"polygonLayer\",title:\"Polygons\",identifyingSymbol:(new C).toJSON()},{geometryType:\"polyline\",geometryTypeJSON:\"esriGeometryPolyline\",layerId:\"polylineLayer\",title:\"Polylines\",identifyingSymbol:(new M).toJSON()},{geometryType:\"multipoint\",geometryTypeJSON:\"esriGeometryMultipoint\",layerId:\"multipointLayer\",title:\"Multipoints\",identifyingSymbol:(new I).toJSON()},{geometryType:\"point\",geometryTypeJSON:\"esriGeometryPoint\",layerId:\"pointLayer\",title:\"Points\",identifyingSymbol:(new I).toJSON()},{geometryType:\"point\",geometryTypeJSON:\"esriGeometryPoint\",layerId:\"textLayer\",title:\"Text\",identifyingSymbol:(new R).toJSON()}];let z=class extends(L(x(v(J(n(j)))))){constructor(e){super(e),this.capabilities={operations:{supportsMapNotesEditing:!0}},this.featureCollections=null,this.featureCollectionJSON=null,this.featureCollectionType=\"notes\",this.legendEnabled=!1,this.minScale=0,this.maxScale=0,this.spatialReference=E.WGS84,this.sublayers=new r(k.map((e=>new P({id:e.layerId,title:e.title,layer:this})))),this.title=\"Map Notes\",this.type=\"map-notes\",this.visibilityMode=\"inherited\"}readCapabilities(e,t,r){return{operations:{supportsMapNotesEditing:!F(t)&&\"portal-item\"!==(null==r?void 0:r.origin)}}}readFeatureCollections(e,t,o){if(!F(t))return null;const i=t.layers.map((e=>{const t=new O;return t.read(e,o),t}));return new r({items:i})}readLegacyfeatureCollectionJSON(e,t){return F(t)?i(t.featureCollection):null}readFullExtent(e,t){if(!t.layers.length)return new D({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:E.WGS84});const r=E.fromJSON(t.layers[0].layerDefinition.spatialReference);return t.layers.reduce(((e,t)=>{const r=t.layerDefinition.extent;return r?D.fromJSON(r).union(e):e}),new D({spatialReference:r}))}readMinScale(e,t){for(const r of t.layers)if(null!=r.layerDefinition.minScale)return r.layerDefinition.minScale;return 0}readMaxScale(e,t){for(const r of t.layers)if(null!=r.layerDefinition.maxScale)return r.layerDefinition.maxScale;return 0}get multipointLayer(){return this._findSublayer(\"multipointLayer\")}get pointLayer(){return this._findSublayer(\"pointLayer\")}get polygonLayer(){return this._findSublayer(\"polygonLayer\")}get polylineLayer(){return this._findSublayer(\"polylineLayer\")}readSpatialReference(e,t){return t.layers.length?E.fromJSON(t.layers[0].layerDefinition.spatialReference):E.WGS84}readSublayers(e,o,i){if(F(o))return null;const l=[];for(let r=0;r<o.layers.length;r++){var a;const{layerDefinition:e,featureSet:i}=o.layers[r],n=null!=(a=e.geometryType)?a:i.geometryType,s=k.find((t=>{var r,o,i;return n===t.geometryTypeJSON&&(null==(r=e.drawingInfo)||null==(o=r.renderer)||null==(i=o.symbol)?void 0:i.type)===t.identifyingSymbol.type}));if(s){const r=new P({id:s.layerId,title:e.name,layer:this,graphics:i.features.map((({geometry:e,symbol:r,attributes:o,popupInfo:i})=>t.fromJSON({attributes:o,geometry:e,symbol:r,popupTemplate:i})))});l.push(r)}}return new r(l)}writeSublayers(e,t,r,i){const{minScale:n,maxScale:p}=this;if(l(e))return;const y=e.some((e=>e.graphics.length>0));if(!this.capabilities.operations.supportsMapNotesEditing){var m;if(y)null==i||null==(m=i.messages)||m.push(new o(\"map-notes-layer:editing-not-supported\",\"New map notes cannot be added to this layer\"));return}const u=[];let c=this.spatialReference.toJSON();e:for(const o of e)for(const e of o.graphics)if(a(e.geometry)){c=e.geometry.spatialReference.toJSON();break e}for(const o of k){const t=e.find((e=>o.layerId===e.id));this._writeMapNoteSublayer(u,t,o,n,p,c,i)}s(\"featureCollection.layers\",u,t)}get textLayer(){return this._findSublayer(\"textLayer\")}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Feature Collection\"]},e)),Promise.resolve(this)}read(e,t){\"featureCollection\"in e&&(e=i(e),Object.assign(e,e.featureCollection)),super.read(e,t)}async beforeSave(){if(l(this.sublayers))return;let e=null;const t=[];for(const o of this.sublayers)for(const r of o.graphics)if(a(r.geometry)){const o=r.geometry;e?h(o.spatialReference,e)||(f(o.spatialReference,e)||d()||await g(),r.geometry=b(o,e)):e=o.spatialReference,t.push(r)}const r=await S(t.map((e=>e.geometry)));t.forEach(((e,t)=>e.geometry=r[t]))}_findSublayer(e){var t,r;return l(this.sublayers)?null:null!=(t=null==(r=this.sublayers)?void 0:r.find((t=>t.id===e)))?t:null}_writeMapNoteSublayer(e,t,r,o,a,n,s){const p=[];if(!l(t)){for(const e of t.graphics)this._writeMapNote(p,e,r.geometryType,s);this._normalizeObjectIds(p,G),e.push({layerDefinition:{name:t.title,drawingInfo:{renderer:{type:\"simple\",symbol:i(r.identifyingSymbol)}},geometryType:r.geometryTypeJSON,minScale:o,maxScale:a,objectIdField:\"OBJECTID\",fields:[G.toJSON(),_.toJSON()],spatialReference:n},featureSet:{features:p,geometryType:r.geometryTypeJSON}})}}_writeMapNote(e,t,r,o){if(l(t))return;const{geometry:i,symbol:n,popupTemplate:s}=t;if(l(i))return;var y,m;if(i.type!==r)return void(null==o||null==(y=o.messages)||y.push(new p(\"map-notes-layer:invalid-geometry-type\",`Geometry \"${i.type}\" cannot be saved in \"${r}\" layer`,{graphic:t})));if(l(n))return void(null==o||null==(m=o.messages)||m.push(new p(\"map-notes-layer:no-symbol\",\"Skipping map notes with no symbol\",{graphic:t})));const u={attributes:{...t.attributes},geometry:i.toJSON(),symbol:n.toJSON()};a(s)&&(u.popupInfo=s.toJSON()),e.push(u)}_normalizeObjectIds(e,t){const r=t.name;let o=N(r,e)+1;const i=new Set;for(const l of e){l.attributes||(l.attributes={});const{attributes:e}=l;(null==e[r]||i.has(e[r]))&&(e[r]=o++),i.add(e[r])}}};e([y({readOnly:!0})],z.prototype,\"capabilities\",void 0),e([m([\"portal-item\",\"web-map\"],\"capabilities\",[\"layers\"])],z.prototype,\"readCapabilities\",null),e([y({readOnly:!0})],z.prototype,\"featureCollections\",void 0),e([m([\"web-map\",\"portal-item\"],\"featureCollections\",[\"layers\"])],z.prototype,\"readFeatureCollections\",null),e([y({readOnly:!0,json:{origins:{\"web-map\":{write:{enabled:!0,target:\"featureCollection\"}}}}})],z.prototype,\"featureCollectionJSON\",void 0),e([m([\"web-map\",\"portal-item\"],\"featureCollectionJSON\",[\"featureCollection\"])],z.prototype,\"readLegacyfeatureCollectionJSON\",null),e([y({readOnly:!0,json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],z.prototype,\"featureCollectionType\",void 0),e([y({json:{write:!1}})],z.prototype,\"fullExtent\",void 0),e([m([\"web-map\",\"portal-item\"],\"fullExtent\",[\"layers\"])],z.prototype,\"readFullExtent\",null),e([y({readOnly:!0,json:{origins:{\"web-map\":{write:{target:\"featureCollection.showLegend\",overridePolicy(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],z.prototype,\"legendEnabled\",void 0),e([y({type:[\"show\",\"hide\"]})],z.prototype,\"listMode\",void 0),e([y({type:Number,nonNullable:!0,json:{write:!1}})],z.prototype,\"minScale\",void 0),e([m([\"web-map\",\"portal-item\"],\"minScale\",[\"layers\"])],z.prototype,\"readMinScale\",null),e([y({type:Number,nonNullable:!0,json:{write:!1}})],z.prototype,\"maxScale\",void 0),e([m([\"web-map\",\"portal-item\"],\"maxScale\",[\"layers\"])],z.prototype,\"readMaxScale\",null),e([y({readOnly:!0})],z.prototype,\"multipointLayer\",null),e([y({value:\"ArcGISFeatureLayer\",type:[\"ArcGISFeatureLayer\"]})],z.prototype,\"operationalLayerType\",void 0),e([y({readOnly:!0})],z.prototype,\"pointLayer\",null),e([y({readOnly:!0})],z.prototype,\"polygonLayer\",null),e([y({readOnly:!0})],z.prototype,\"polylineLayer\",null),e([y({type:E})],z.prototype,\"spatialReference\",void 0),e([m([\"web-map\",\"portal-item\"],\"spatialReference\",[\"layers\"])],z.prototype,\"readSpatialReference\",null),e([y({readOnly:!0,json:{origins:{\"web-map\":{write:{ignoreOrigin:!0}}}}})],z.prototype,\"sublayers\",void 0),e([m(\"web-map\",\"sublayers\",[\"layers\"])],z.prototype,\"readSublayers\",null),e([c(\"web-map\",\"sublayers\")],z.prototype,\"writeSublayers\",null),e([y({readOnly:!0})],z.prototype,\"textLayer\",null),e([y()],z.prototype,\"title\",void 0),e([y({readOnly:!0,json:{read:!1}})],z.prototype,\"type\",void 0),z=e([u(\"esri.layers.MapNotesLayer\")],z);var B=z;export default B;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst t=1;function n(t,n){let o=0;for(const r of n){var e;const n=null==(e=r.attributes)?void 0:e[t];\"number\"==typeof n&&isFinite(n)&&(o=Math.max(o,n))}return o}export{n as findLastObjectIdFromFeatures,t as initialObjectId};\n"],"sourceRoot":""}