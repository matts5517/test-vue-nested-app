{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/layers/support/WMTSLayerInfo.js","webpack:///./node_modules/@arcgis/core/layers/WebTileLayer.js","webpack:///./node_modules/@arcgis/core/layers/support/TileMatrixSet.js","webpack:///./node_modules/@arcgis/core/layers/support/WMTSStyle.js","webpack:///./node_modules/@arcgis/core/layers/support/WMTSSublayer.js","webpack:///./node_modules/@arcgis/core/layers/support/wmtsUtils.js","webpack:///./node_modules/@arcgis/core/layers/WMTSLayer.js"],"names":["i","p","r","super","customLayerParameters","this","customParameters","layerIdentifier","tileMatrixSet","url","json","type","Object","write","prototype","String","a","R","e","copyright","fullExtent","WebMercator","legendEnabled","isReference","popupEnabled","spatialReference","subDomains","tileInfo","size","dpi","format","compressionQuality","origin","x","y","lods","level","scale","resolution","urlTemplate","wmtsInfo","t","loadFromPortal","supportedTypes","then","equals","length","authority","indexOf","title","id","addResolvingPromise","Promise","resolve","levelValue","fromJSON","l","o","scheme","push","split","s","replace","map","charAt","substring","templateUrl","signal","timestamp","n","getTileUrl","responseType","query","_ts","data","levelValues","tileServers","urlPath","z","col","row","value","readOnly","read","Boolean","enabled","overridePolicy","origins","source","hasOwnProperty","clone","description","legendUrl","isDefault","keywords","slice","h","imageFormats","layer","styles","tileMatrixSetId","tileMatrixSets","_get","_set","console","error","getItemAt","find","imageFormat","styleId","ofType","ignoreOrigin","DOMParser","parseFromString","documentElement","Map","f","c","u","querySelector","getElementsByTagName","d","Array","call","g","T","M","serviceMode","S","some","attributes","nodeValue","getAttribute","V","E","b","C","N","layers","set","tileUrl","layerMap","dimensionMap","forEach","A","wkid","nodeType","Node","ELEMENT_NODE","childNodes","nodeName","textContent","formats","get","dimensions","dimensions2","toLowerCase","template","resourceType","xmin","parseFloat","ymin","xmax","ymax","abstract","parseInt","L","w","toJSON","pop","I","Number","includes","v","values","Math","PI","metersPerDegree","_","Set","_sublayersHandles","operationalLayerType","resourceInfo","sublayers","version","watch","removeAll","add","on","item","catch","_fetchService","activeLayer","_getLowerCasedUrlParams","isArray","m","style","getUrlTemplate","_mergeParams","toArray","_override","_clearOverride","substr","_getTileMatrixSetById","_appendCustomLayerParameters","ssl","_getCapabilities","_getCapabilitiesUrl","findSublayerById","encodeURIComponent","_appendCustomParameters","keys","has","target","service","O"],"mappings":"iIAAA,IAIuZA,EAJvZ,4FAIyZ,IAAIC,EAAED,EAAE,cAAc,OAAE,YAAYE,GAAGC,MAAMD,GAAG,QAAQ,OAAO,IAAIF,EAAE,CAACI,sBAAsB,eAAEC,KAAKD,uBAAuBE,iBAAiB,eAAED,KAAKC,kBAAkBC,gBAAgBF,KAAKE,gBAAgBC,cAAcH,KAAKG,cAAcC,IAAIJ,KAAKI,QAAQ,eAAE,CAAC,eAAE,CAACC,KAAK,CAACC,KAAKC,OAAOC,OAAM,MAAOZ,EAAEa,UAAU,6BAAwB,GAAQ,eAAE,CAAC,eAAE,CAACJ,KAAK,CAACC,KAAKC,OAAOC,OAAM,MAAOZ,EAAEa,UAAU,wBAAmB,GAAQ,eAAE,CAAC,eAAE,CAACH,KAAKI,OAAOL,KAAK,CAACG,OAAM,MAAOZ,EAAEa,UAAU,uBAAkB,GAAQ,eAAE,CAAC,eAAE,CAACH,KAAKI,OAAOL,KAAK,CAACG,OAAM,MAAOZ,EAAEa,UAAU,qBAAgB,GAAQ,eAAE,CAAC,eAAE,CAACH,KAAKI,OAAOL,KAAK,CAACG,OAAM,MAAOZ,EAAEa,UAAU,WAAM,GAAQb,EAAED,EAAE,eAAE,CAAC,eAAE,qCAAqCC,GAAG,IAAIe,EAAEf,EAAiB,U,oCCJ5kC,+TAI6uC,IAAIgB,EAAE,cAAc,cAAD,CAAG,eAAE,eAAE,eAAE,eAAE,eAAE,cAAS,eAAeC,GAAGf,SAASe,GAAGb,KAAKc,UAAU,GAAGd,KAAKe,WAAW,IAAI,QAAG,iBAAiB,eAAe,eAAe,gBAAgB,OAAEC,aAAahB,KAAKiB,eAAc,EAAGjB,KAAKkB,YAAY,KAAKlB,KAAKmB,cAAa,EAAGnB,KAAKoB,iBAAiB,OAAEJ,YAAYhB,KAAKqB,WAAW,KAAKrB,KAAKsB,SAAS,IAAI,OAAE,CAACC,KAAK,CAAC,IAAI,KAAKC,IAAI,GAAGC,OAAO,OAAOC,mBAAmB,EAAEC,OAAO,IAAI,OAAE,CAACC,GAAG,gBAAgBC,EAAE,gBAAgBT,iBAAiB,OAAEJ,cAAcI,iBAAiB,OAAEJ,YAAYc,KAAK,CAAC,IAAI,OAAE,CAACC,MAAM,EAAEC,MAAM,iBAAiBC,WAAW,gBAAgB,IAAI,OAAE,CAACF,MAAM,EAAEC,MAAM,iBAAiBC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,EAAEC,MAAM,iBAAiBC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,EAAEC,MAAM,gBAAgBC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,EAAEC,MAAM,gBAAgBC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,EAAEC,MAAM,gBAAgBC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,EAAEC,MAAM,eAAeC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,EAAEC,MAAM,eAAeC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,EAAEC,MAAM,eAAeC,WAAW,kBAAkB,IAAI,OAAE,CAACF,MAAM,EAAEC,MAAM,eAAeC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,GAAGC,MAAM,cAAcC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,GAAGC,MAAM,cAAcC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,GAAGC,MAAM,cAAcC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,GAAGC,MAAM,aAAaC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,GAAGC,MAAM,aAAaC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,GAAGC,MAAM,aAAaC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,GAAGC,MAAM,YAAYC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,GAAGC,MAAM,YAAYC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,GAAGC,MAAM,YAAYC,WAAW,mBAAmB,IAAI,OAAE,CAACF,MAAM,GAAGC,MAAM,YAAYC,WAAW,sBAAsBjC,KAAKM,KAAK,WAAWN,KAAKkC,YAAY,KAAKlC,KAAKmC,SAAS,KAAK,kBAAkBtB,EAAEuB,GAAG,MAAM,iBAAiBvB,EAAE,CAACqB,YAAYrB,KAAKuB,GAAGvB,EAAE,KAAKA,GAAG,MAAMuB,EAAEpC,KAAKqC,eAAe,CAACC,eAAe,CAAC,SAASzB,GAAG0B,KAAK,KAAM,IAAI1B,EAAE,GAAG,GAAGb,KAAKkC,YAAY,GAAGlC,KAAKoB,iBAAiBoB,OAAOxC,KAAKsB,SAASF,kBAAkB,CAAC,MAAMgB,EAAE,IAAI,OAAEpC,KAAKkC,aAAelC,KAAKqB,YAAYrB,KAAKqB,WAAWoB,OAAO,IAAI,IAAIL,EAAEM,UAAUC,QAAQ,iBAAiB9B,EAAE,yCAAyCA,EAAE,6DAA6DA,EAAE,uDAAuD,GAAGA,EAAE,MAAM,IAAI,OAAE,sBAAsB,yBAAyBb,KAAK4C,gBAAgB5C,KAAK6C,QAAQhC,OAAQ,OAAOb,KAAK8C,oBAAoBV,GAAGW,QAAQC,QAAQhD,MAAM,kBAAkB,MAAMa,EAAE,GAAG,IAAIb,KAAKsB,SAAS,OAAO,KAAK,IAAI,MAAMc,KAAKpC,KAAKsB,SAASQ,KAAKjB,EAAEuB,EAAEL,OAAOK,EAAEa,YAAYb,EAAEL,MAAM,OAAOlB,EAAE,qBAAqBA,EAAEuB,GAAG,OAAOvB,GAAGuB,EAAErB,YAAYqB,EAAErB,WAAWK,kBAAkB,OAAE8B,SAASd,EAAErB,WAAWK,kBAAkB,kBAAkB,IAAIpB,KAAKkC,YAAY,OAAO,KAAK,MAAMrB,EAAE,IAAIqB,YAAYE,EAAEf,WAAWxB,GAAGG,KAAKmD,EAAE,IAAI,OAAEf,GAAGgB,EAAED,EAAEE,OAAOF,EAAEE,OAAO,MAAM,KAAK1D,EAAEyD,EAAED,EAAET,UAAU,IAAI,IAAI,IAAIS,EAAET,UAAUC,QAAQ,eAAe9B,EAAEyC,KAAK3D,QAAQ,GAAGE,GAAGA,EAAE4C,OAAO,GAAGU,EAAET,UAAUa,MAAM,KAAKd,OAAO,EAAE,IAAI,MAAMe,KAAK3D,EAAEgB,EAAEyC,KAAKF,EAAED,EAAET,UAAUe,QAAQ,kBAAkBD,GAAG,KAAK,OAAO3C,EAAE6C,IAAK7C,IAAI,MAAMA,EAAE8C,OAAO9C,EAAE4B,OAAO,KAAK5B,GAAG,KAAKA,IAAK,cAAc,IAAIb,KAAKkC,YAAY,OAAO,KAAK,MAAMrB,EAAEb,KAAKkC,YAAYE,EAAE,IAAI,OAAEvB,GAAGhB,GAAGuC,EAAEiB,OAAOjB,EAAEiB,OAAO,MAAM,MAAMjB,EAAEM,UAAU,IAAI,OAAO7B,EAAE+C,UAAU/D,EAAE4C,QAAQ,gBAAgB5B,EAAEuB,GAAG,OAAOvB,GAAGuB,EAAEyB,YAAY,iBAAiBhD,EAAEuB,GAAGvB,GAAG,eAAEA,KAAKA,EAAE,SAASA,GAAGA,IAAIA,EAAEA,EAAE4C,QAAQ,UAAU,WAAWA,QAAQ,UAAU,SAASA,QAAQ,UAAU,SAAS5C,EAAE,eAAEA,IAAIuB,EAAEyB,YAAYhD,EAAE,UAAUA,EAAEhB,EAAEsD,EAAEC,EAAE,IAAI,MAAMU,OAAON,EAAEO,UAAUpE,GAAGyD,EAAEY,EAAEhE,KAAKiE,WAAWpD,EAAEhB,EAAEsD,GAAGxC,EAAE,CAACuD,aAAa,QAAQJ,OAAON,GAAG,OAAO,MAAM7D,IAAIgB,EAAEwD,MAAM,CAACC,IAAIhB,EAAEW,YAAY,qBAAEC,EAAErD,GAAG4B,KAAM1B,GAAGA,EAAEwD,MAAO,WAAWxD,EAAEuB,EAAEvC,GAAG,MAAMsD,EAAEnD,KAAKsE,YAAYzD,GAAG,OAAOb,KAAKuE,YAAYnC,EAAEpC,KAAKuE,YAAY9B,QAAQ,eAAEzC,KAAKwE,QAAQ,CAACzC,MAAMoB,EAAEsB,EAAEtB,EAAEuB,IAAI7E,EAAE+B,EAAE/B,EAAE8E,IAAIvC,EAAEP,EAAEO,MAAM,eAAE,CAAC,eAAE,CAAC9B,KAAKI,OAAOkE,MAAM,GAAGvE,KAAK,CAACG,OAAM,MAAOI,EAAEH,UAAU,iBAAY,GAAQ,eAAE,CAAC,eAAE,CAACH,KAAK,OAAED,KAAK,CAACG,OAAM,MAAOI,EAAEH,UAAU,kBAAa,GAAQ,eAAE,CAAC,eAAE,CAACoE,UAAS,EAAGxE,KAAK,CAACyE,MAAK,EAAGtE,OAAM,MAAOI,EAAEH,UAAU,qBAAgB,GAAQ,eAAE,CAAC,eAAE,CAACH,KAAK,CAAC,OAAO,WAAWM,EAAEH,UAAU,gBAAW,GAAQ,eAAE,CAAC,kBAAKG,EAAEH,UAAU,cAAc,MAAM,eAAE,CAAC,eAAE,CAACH,KAAKyE,QAAQ1E,KAAK,CAACyE,MAAK,EAAGtE,MAAM,CAACwE,SAAQ,EAAGC,eAAe,KAAI,CAAED,SAAQ,SAAUpE,EAAEH,UAAU,mBAAc,GAAQ,eAAE,CAAC,eAAE,CAACH,KAAK,CAAC,iBAAiBsE,MAAM,mBAAmBhE,EAAEH,UAAU,4BAAuB,GAAQ,eAAE,CAAC,eAAE,CAACoE,UAAS,EAAGxE,KAAK,CAACyE,MAAK,EAAGtE,OAAM,MAAOI,EAAEH,UAAU,oBAAe,GAAQ,eAAE,CAAC,eAAE,CAACH,KAAK,UAAKM,EAAEH,UAAU,wBAAmB,GAAQ,eAAE,CAAC,eAAE,mBAAmB,CAAC,mBAAmB,iCAAiCG,EAAEH,UAAU,uBAAuB,MAAM,eAAE,CAAC,eAAE,CAACH,KAAK,CAACI,QAAQL,KAAK,CAACG,OAAM,MAAOI,EAAEH,UAAU,kBAAa,GAAQ,eAAE,CAAC,eAAE,CAACH,KAAK,OAAED,KAAK,CAACG,OAAM,MAAOI,EAAEH,UAAU,gBAAW,GAAQ,eAAE,CAAC,eAAE,CAACoE,UAAS,KAAMjE,EAAEH,UAAU,cAAc,MAAM,eAAE,CAAC,eAAE,CAACJ,KAAK,CAACyE,MAAK,MAAOlE,EAAEH,UAAU,YAAO,GAAQ,eAAE,CAAC,kBAAKG,EAAEH,UAAU,UAAU,MAAM,eAAE,CAAC,eAAE,CAACH,KAAKI,OAAOL,KAAK,CAAC6E,QAAQ,CAAC,cAAc,CAACJ,KAAK,CAACK,OAAO,aAAavE,EAAEH,UAAU,mBAAc,GAAQ,eAAE,CAAC,eAAE,cAAc,CAAC,cAAc,iBAAiBG,EAAEH,UAAU,kBAAkB,MAAM,eAAE,CAAC,eAAE,cAAc,CAACoD,YAAY,CAACvD,KAAKI,WAAWE,EAAEH,UAAU,mBAAmB,MAAM,eAAE,CAAC,eAAE,CAACH,KAAK,OAAED,KAAK,CAACG,OAAM,MAAOI,EAAEH,UAAU,gBAAW,GAAQG,EAAE,eAAE,CAAC,eAAE,6BAA6BA,GAAG,IAAIgB,EAAEhB,EAAiB,gB,6CCA5lM,E,4UAAE,IAAI,EAAE,EAAE,cAAc,OAAE,YAAYwB,GAAGtC,MAAMsC,GAAGpC,KAAKe,WAAW,KAAKf,KAAK6C,GAAG,KAAK7C,KAAKsB,SAAS,KAAK,QAAQ,MAAMc,EAAE,IAAI,EAAE,OAAOpC,KAAKoF,eAAe,gBAAgBhD,EAAErB,WAAWf,KAAKe,YAAYf,KAAKe,WAAWsE,SAASrF,KAAKoF,eAAe,QAAQhD,EAAES,GAAG7C,KAAK6C,IAAI7C,KAAKoF,eAAe,cAAchD,EAAEd,SAAStB,KAAKsB,UAAUtB,KAAKsB,SAAS+D,SAASjD,IAAI,eAAE,CAAC,eAAE,CAAC9B,KAAK,OAAED,KAAK,CAACyE,KAAK,CAACK,OAAO,kBAAkB,EAAE1E,UAAU,kBAAa,GAAQ,eAAE,CAAC,eAAE,CAACH,KAAKI,OAAOL,KAAK,CAACyE,KAAK,CAACK,OAAO,UAAU,EAAE1E,UAAU,UAAK,GAAQ,eAAE,CAAC,eAAE,CAACH,KAAK,OAAED,KAAK,CAACyE,KAAK,CAACK,OAAO,gBAAgB,EAAE1E,UAAU,gBAAW,GAAQ,EAAE,EAAE,eAAE,CAAC,eAAE,qCAAqC,GAAG,ICAhsB,EDAosB,EAAE,EAAiB,ICArtB,IAAI,EAAE,EAAE,cAAc,OAAE,YAAYZ,GAAGC,MAAMD,GAAGG,KAAK6C,GAAG,KAAK7C,KAAK4C,MAAM,KAAK5C,KAAKsF,YAAY,KAAKtF,KAAKuF,UAAU,KAAK,QAAQ,MAAM1F,EAAE,IAAI,EAAE,OAAOG,KAAKoF,eAAe,iBAAiBvF,EAAEyF,YAAYtF,KAAKsF,aAAatF,KAAKoF,eAAe,QAAQvF,EAAEgD,GAAG7C,KAAK6C,IAAI7C,KAAKoF,eAAe,eAAevF,EAAE2F,UAAUxF,KAAKwF,WAAWxF,KAAKoF,eAAe,cAAcvF,EAAE4F,SAASzF,KAAKyF,UAAUzF,KAAKyF,SAASC,SAAS1F,KAAKoF,eAAe,eAAevF,EAAE0F,UAAUvF,KAAKuF,WAAWvF,KAAKoF,eAAe,WAAWvF,EAAE+C,MAAM5C,KAAK4C,OAAO/C,IAAI,eAAE,CAAC,eAAE,CAACQ,KAAK,CAACyE,KAAK,CAACK,OAAO,UAAU,EAAE1E,UAAU,UAAK,GAAQ,eAAE,CAAC,eAAE,CAACJ,KAAK,CAACyE,KAAK,CAACK,OAAO,aAAa,EAAE1E,UAAU,aAAQ,GAAQ,eAAE,CAAC,eAAE,CAACJ,KAAK,CAACyE,KAAK,CAACK,OAAO,gBAAgB,EAAE1E,UAAU,mBAAc,GAAQ,eAAE,CAAC,eAAE,CAACJ,KAAK,CAACyE,KAAK,CAACK,OAAO,iBAAiB,EAAE1E,UAAU,iBAAY,GAAQ,eAAE,CAAC,eAAE,CAACJ,KAAK,CAACyE,KAAK,CAACK,OAAO,iBAAiB,EAAE1E,UAAU,iBAAY,GAAQ,eAAE,CAAC,eAAE,CAACJ,KAAK,CAACyE,KAAK,CAACK,OAAO,gBAAgB,EAAE1E,UAAU,gBAAW,GAAQ,EAAE,EAAE,eAAE,CAAC,eAAE,iCAAiC,GAAG,ICAtwB,EDA0wB,EAAE,EAAiB,ICA3xB,IAAIkF,EAAE,EAAE,cAAc,OAAE,YAAYvD,GAAGtC,MAAMsC,GAAGpC,KAAKe,WAAW,KAAKf,KAAK4F,aAAa,KAAK5F,KAAK6C,GAAG,KAAK7C,KAAK6F,MAAM,KAAK7F,KAAK8F,OAAO,KAAK9F,KAAK+F,gBAAgB,KAAK/F,KAAKgG,eAAe,KAAK,kBAAkB,OAAOhG,KAAKiG,KAAK,eAAe,gBAAgB7D,GAAGpC,KAAKkG,KAAK,cAAc9D,GAAG,eAAeA,EAAEvB,GAAG,OAAOuB,EAAEvB,EAAEE,YAAY,OAAEmC,SAASd,GAAG,KAAK,kBAAkB,IAAIA,EAAEpC,KAAKiG,KAAK,eAAe,OAAO7D,IAAIA,EAAEpC,KAAK4F,cAAc5F,KAAK4F,aAAanD,OAAOzC,KAAK4F,aAAa,GAAG,IAAIxD,EAAE,gBAAgBA,GAAG,MAAMvB,EAAEb,KAAK4F,aAAaxD,IAAIA,EAAEO,QAAQ,WAAW,GAAG9B,IAAI,IAAIA,EAAE8B,QAAQP,OAAO,IAAIA,EAAEO,QAAQ,YAAYP,EAAE,SAASA,GAAGvB,IAAI,IAAIA,EAAE8B,QAAQP,IAAI+D,QAAQC,MAAM,2CAA2ChE,GAAGpC,KAAKkG,KAAK,cAAc9D,GAAG,cAAc,IAAIA,EAAEpC,KAAKiG,KAAK,WAAW,OAAO7D,IAAIA,EAAEpC,KAAK8F,QAAQ9F,KAAK8F,OAAOrD,OAAOzC,KAAK8F,OAAOO,UAAU,GAAGxD,GAAG,IAAIT,EAAE,YAAYA,GAAGpC,KAAKkG,KAAK,UAAU9D,GAAG,YAAY,OAAOpC,KAAKiG,KAAK,SAAS,UAAU7D,GAAGpC,KAAKkG,KAAK,QAAQ9D,GAAG,oBAAoB,OAAOpC,KAAKgG,eAAehG,KAAKgG,eAAeM,KAAMlE,GAAGA,EAAES,KAAK7C,KAAK+F,iBAAkB,KAAK,QAAQ,MAAM3D,EAAE,IAAI,EAAE,OAAOpC,KAAKoF,eAAe,iBAAiBhD,EAAEkD,YAAYtF,KAAKsF,aAAatF,KAAKoF,eAAe,kBAAkBhD,EAAEwD,aAAa5F,KAAK4F,cAAc5F,KAAK4F,aAAaF,SAAS1F,KAAKoF,eAAe,iBAAiBhD,EAAEmE,YAAYvG,KAAKuG,aAAavG,KAAKoF,eAAe,gBAAgBhD,EAAErB,WAAWf,KAAKe,YAAYf,KAAKe,WAAWsE,SAASrF,KAAKoF,eAAe,QAAQhD,EAAES,GAAG7C,KAAK6C,IAAI7C,KAAKoF,eAAe,WAAWhD,EAAEyD,MAAM7F,KAAK6F,OAAO7F,KAAKoF,eAAe,aAAahD,EAAEoE,QAAQxG,KAAKwG,SAASxG,KAAKoF,eAAe,YAAYhD,EAAE0D,OAAO9F,KAAK8F,QAAQ9F,KAAK8F,OAAOT,SAASrF,KAAKoF,eAAe,qBAAqBhD,EAAE2D,gBAAgB/F,KAAK+F,iBAAiB/F,KAAKoF,eAAe,oBAAoBhD,EAAE4D,eAAehG,KAAKgG,eAAeX,SAASrF,KAAKoF,eAAe,WAAWhD,EAAEQ,MAAM5C,KAAK4C,OAAOR,IAAI,eAAE,CAAC,kBAAKuD,EAAElF,UAAU,cAAc,MAAM,eAAE,CAAC,kBAAKkF,EAAElF,UAAU,kBAAa,GAAQ,eAAE,CAAC,eAAE,aAAa,CAAC,gBAAgBkF,EAAElF,UAAU,iBAAiB,MAAM,eAAE,CAAC,kBAAKkF,EAAElF,UAAU,cAAc,MAAM,eAAE,CAAC,eAAE,CAACJ,KAAK,CAACyE,KAAK,CAACK,OAAO,eAAeQ,EAAElF,UAAU,oBAAe,GAAQ,eAAE,CAAC,kBAAKkF,EAAElF,UAAU,UAAK,GAAQ,eAAE,CAAC,kBAAKkF,EAAElF,UAAU,aAAQ,GAAQ,eAAE,CAAC,kBAAKkF,EAAElF,UAAU,UAAU,MAAM,eAAE,CAAC,eAAE,CAACH,KAAK,OAAEmG,OAAO,GAAGpG,KAAK,CAACyE,KAAK,CAACK,OAAO,cAAcQ,EAAElF,UAAU,cAAS,GAAQ,eAAE,CAAC,eAAE,CAACmE,MAAM,KAAKvE,KAAK,CAACG,MAAM,CAACkG,cAAa,OAAQf,EAAElF,UAAU,QAAQ,MAAM,eAAE,CAAC,kBAAKkF,EAAElF,UAAU,uBAAkB,GAAQ,eAAE,CAAC,eAAE,CAACoE,UAAS,KAAMc,EAAElF,UAAU,gBAAgB,MAAM,eAAE,CAAC,eAAE,CAACH,KAAK,OAAEmG,OAAO,GAAGpG,KAAK,CAACyE,KAAK,CAACK,OAAO,sBAAsBQ,EAAElF,UAAU,sBAAiB,GAAQkF,EAAE,EAAE,eAAE,CAAC,eAAE,qCAAqCA,GAAG,IAAI,EAAEA,EAAiB,I,4DCA9zF,MAAM,EAAE,kBAAkB,EAAE,CAAC,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,CAAC,MAAM,QAAQ,SAAS,EAAEvD,EAAEzC,GAAG,IAAIqE,EAAEnE,EAAEuC,EAAEA,EAAEqB,QAAQ,SAAS,IAAI,MAAMN,GAAE,IAAKwD,WAAWC,gBAAgBxE,EAAE,YAAYyE,gBAAgBzD,EAAE,IAAI0D,IAAItD,EAAE,IAAIsD,IAAInG,EAAEoG,EAAE,WAAW5D,GAAG,IAAIxC,EAAE,MAAM,IAAI,OAAE,gDAAgD,MAAMqG,EAAED,EAAE,qBAAqB5D,GAAG8D,EAAE,MAAMD,OAAE,EAAOA,EAAEE,cAAc,oBAAoBtH,EAAE,MAAMqH,OAAE,EAAOA,EAAEE,qBAAqB,OAAOC,EAAExH,GAAGyH,MAAM5G,UAAUiF,MAAM4B,KAAK1H,GAAG2H,EAAE,OAAOvD,GAAG,MAAMrE,GAAG,OAAOE,EAAEF,EAAES,UAAK,EAAOP,EAAE8C,QAAQ,WAAW,IAAIqB,EAAE,IAAIwD,EAAE3F,EAAE4F,EAAE9H,EAAE+H,YAAYC,EAAEhI,GAAGA,EAAES,IAAI,GAAGgH,GAAGA,EAAE3E,QAAQ2E,EAAEQ,KAAM/G,IAAI,MAAMuB,EAAE2E,EAAE,aAAalG,GAAG,OAAOuB,GAAGR,GAAE,gBAAgB,QAAQ6F,EAAErF,IAAIuF,EAAE9G,EAAEgH,WAAW,GAAGC,WAAU,KAAM1F,GAAGR,GAAE,gBAAgB,QAAQ,UAAUQ,IAAIR,GAAE,gBAAgB,QAAQ,OAAOQ,GAAGP,EAAEhB,EAAEgH,WAAW,GAAGC,UAAU1F,IAAIR,GAAE,gBAAgB,QAAQ,MAAMQ,KAAKoF,EAAE3G,EAAEgH,WAAW,GAAGC,YAAW,MAAQH,EAAE,GAAG9F,EAAE8F,EAAE9F,EAAE4F,EAAE,eAAe,GAAGD,EAAEG,EAAEH,EAAEC,EAAE,UAAU,CAAC,MAAM5G,EAAEkG,EAAE,qBAAqB5D,GAAGwE,EAAE9G,GAAGA,EAAEkH,aAAa,cAAc,MAAMC,EAAEL,EAAEhF,QAAQ,WAAW,IAAIqF,GAAG,YAAYP,EAAEE,GAAG,IAAIK,GAAG,IAAIL,EAAEA,EAAE/D,UAAU,EAAEoE,IAAI,QAAQP,IAAIE,GAAGK,GAAG,EAAE,GAAG,KAAKT,IAAII,EAAEA,EAAElE,QAAQ,UAAU,WAAW,MAAMwE,EAAE,EAAE,2CAA2C9E,GAAG+E,EAAE,EAAE,0CAA0C/E,GAAGgF,EAAE,EAAE,QAAQxH,GAAGyH,EAAE,EAAE,gBAAgBzH,GAAG,MAAM,CAACG,UAAUoH,EAAEG,OAAOF,EAAEzE,IAAK7C,IAAI,MAAMuB,EAAE,EAAE,aAAavB,GAAG,OAAOuC,EAAEkF,IAAIlG,EAAEvB,GAAG,GAAEuB,EAAEvB,EAAEuH,EAAEb,EAAEU,KAAMM,QAAQZ,EAAED,YAAYD,EAAEe,SAASpF,EAAEqF,aAAajF,GAAG,SAAS,EAAE3C,GAAG,OAAOA,EAAEwH,OAAOK,QAAS7H,IAAIA,EAAEmF,eAAe0C,QAAS7H,IAAI,MAAMuB,EAAEvB,EAAES,SAAS,KAAKc,EAAEZ,MAAMY,EAAEN,KAAK4G,QAAS/I,IAAIA,EAAEqC,MAAM,GAAGrC,EAAEqC,MAAMI,EAAEZ,IAAI7B,EAAEsC,WAAW0G,GAAEvG,EAAEhB,iBAAiBwH,KAAKjJ,EAAEqC,MAAM,EAAE,GAAGnB,EAAEgC,MAAOT,EAAEZ,IAAI,QAAUX,EAAE,SAAS,EAAEA,GAAG,OAAOA,EAAEgI,WAAWC,KAAKC,aAAa,SAAShC,EAAElG,EAAEuB,GAAG,IAAI,IAAIzC,EAAE,EAAEA,EAAEyC,EAAE4G,WAAWvG,OAAO9C,IAAI,CAAC,MAAMqE,EAAE5B,EAAE4G,WAAWrJ,GAAG,GAAG,EAAEqE,IAAIA,EAAEiF,WAAWpI,EAAE,OAAOmD,EAAE,OAAO,KAAK,SAAS,EAAEnD,EAAEuB,GAAG,MAAMzC,EAAE,GAAG,IAAI,IAAIqE,EAAE,EAAEA,EAAE5B,EAAE4G,WAAWvG,OAAOuB,IAAI,CAAC,MAAMnE,EAAEuC,EAAE4G,WAAWhF,GAAG,EAAEnE,IAAIA,EAAEoJ,WAAWpI,GAAGlB,EAAE2D,KAAKzD,GAAG,OAAOF,EAAE,SAAS,EAAEkB,EAAEuB,GAAG,MAAMzC,EAAE,GAAG,IAAI,IAAIqE,EAAE,EAAEA,EAAE5B,EAAE4G,WAAWvG,OAAOuB,IAAI,CAAC,MAAMnE,EAAEuC,EAAE4G,WAAWhF,GAAG,EAAEnE,IAAIA,EAAEoJ,WAAWpI,GAAGlB,EAAE2D,KAAKzD,GAAG,OAAOF,EAAE+D,IAAK7C,GAAGA,EAAEqI,aAAc,SAAS,EAAErI,EAAEuB,GAAG,OAAOvB,EAAE0C,MAAM,KAAKmF,QAAS7H,IAAIuB,IAAIA,EAAE2E,EAAElG,EAAEuB,MAAOA,GAAGA,EAAE8G,YAAY,SAAStH,GAAEf,EAAEuB,EAAEzC,EAAEqE,GAAG,IAAInE,EAAE,OAAOwH,MAAM5G,UAAUiF,MAAM4B,KAAKtD,EAAEgF,YAAYpB,KAAM5D,IAAI,GAAGA,EAAEiF,SAAStG,QAAQ9B,IAAI,EAAE,CAAC,MAAMA,EAAEkG,EAAE3E,EAAE4B,GAAGb,EAAEtC,GAAGA,EAAEqI,YAAY,GAAG/F,IAAIxD,GAAGA,EAAE4D,MAAM,MAAM5D,EAAE4D,MAAM,KAAK,KAAKJ,EAAE,OAAOtD,EAAEmE,GAAE,EAAG,OAAM,IAAMnE,EAAE,SAAS,GAAEgB,EAAEuB,EAAEzC,EAAEqE,EAAEnE,GAAG,MAAMsD,EAAE,EAAE,WAAWf,GAAGgB,EAAE,EAAE,SAAShB,GAAG,MAAM,CAACS,GAAGhC,EAAEE,WAAW,GAAEqB,GAAGkD,YAAYnC,EAAEgG,QAAQ/F,EAAE0C,OAAO,GAAE1D,EAAE4B,GAAGpB,MAAM,EAAE,QAAQR,GAAG4D,eAAe,GAAEnG,EAAEuC,EAAEzC,IAAI,SAAS,GAAEkB,EAAEuB,GAAG,IAAIzC,EAAE,MAAMqE,EAAE,GAAGnE,EAAE,OAAOF,EAAEkB,EAAE2H,eAAU,EAAO7I,EAAEyJ,IAAIhH,GAAG,IAAIvC,EAAE,OAAO,MAAMsD,EAAE,EAAE,cAActD,GAAGuD,EAAE,EAAE,YAAYvD,GAAG,IAAI2D,EAAE7C,EAAEqG,EAAEC,EAAE,OAAO7D,EAAEX,SAASe,EAAE,EAAE,aAAaJ,EAAE,IAAIzC,EAAE,EAAE,UAAUyC,EAAE,KAAK,EAAE,QAAQA,EAAE,KAAKA,EAAEX,OAAO,IAAIuE,EAAE,EAAE,aAAa5D,EAAE,IAAI6D,EAAE,EAAE,UAAU7D,EAAE,KAAK,EAAE,QAAQA,EAAE,KAAKvC,EAAE4H,aAAaH,IAAIlG,EAAE,CAACiH,WAAW1I,EAAE2I,YAAYrC,IAAI9D,EAAEuF,QAAS7H,IAAI,IAAIuB,EAAEvB,EAAEkH,aAAa,YAAY,GAAG,SAASlH,EAAEkH,aAAa,gBAAgB,CAAC,GAAGvE,GAAG7C,EAAE8B,OAAO,GAAGL,EAAEO,QAAQ,IAAIa,EAAE,MAAM,EAAEpB,EAAEA,EAAEqB,QAAQ,IAAID,EAAE,IAAI,wBAAwB,CAAC,MAAM3C,EAAEuB,EAAEmH,cAAc5G,QAAQ,IAAIa,EAAE+F,cAAc,KAAK1I,GAAG,IAAIuB,EAAEA,EAAEwB,UAAU,EAAE/C,GAAG,mBAAmBuB,EAAEwB,UAAU/C,EAAE2C,EAAEf,OAAO,IAAI,GAAGuE,GAAGC,EAAExE,OAAO,GAAGL,EAAEO,QAAQ,IAAIqE,EAAE,MAAM,EAAE5E,EAAEA,EAAEqB,QAAQ,IAAIuD,EAAE,IAAI,yBAAyB,CAAC,MAAMnG,EAAEuB,EAAEmH,cAAc5G,QAAQ,IAAIqE,EAAEuC,cAAc,KAAK1I,GAAG,IAAIuB,EAAEA,EAAEwB,UAAU,EAAE/C,GAAG,oBAAoBuB,EAAEwB,UAAU/C,EAAEmG,EAAEvE,OAAO,IAAIuB,EAAEV,KAAK,CAACkG,SAASpH,EAAEX,OAAOZ,EAAEkH,aAAa,UAAU0B,aAAa,YAAazF,EAAE,SAAS,GAAEnD,EAAEuB,EAAEzC,EAAEqE,EAAEnE,EAAEsD,EAAEC,EAAEI,GAAG,MAAMiF,aAAa9H,GAAGE,EAAEmG,EAAE,GAAEnG,EAAEuB,GAAG6E,EAAEtG,EAAEyI,IAAIhH,GAAGiH,YAAY1I,EAAEyI,IAAIhH,GAAGiH,WAAW,GAAGzJ,EAAEe,EAAEyI,IAAIhH,GAAGkH,aAAa3I,EAAEyI,IAAIhH,GAAGkH,YAAY,GAAG,IAAIlC,EAAE,GAAG,GAAGJ,GAAGA,EAAEvE,OAAO,EAAE,CAAC,IAAI5B,EAAE,KAAKmG,EAAEY,KAAMxF,GAAGA,EAAEX,SAASuC,IAAInD,EAAEuB,GAAE,IAAMvB,IAAIA,EAAEmG,EAAE5D,EAAE4D,EAAEvE,SAAS2E,EAAEvG,EAAE2I,SAAS/F,QAAQ,cAAc5D,GAAG4D,QAAQ,sBAAsB9D,GAAG8D,QAAQ,mBAAmBN,GAAGM,QAAQ,gBAAgB,GAAGL,GAAGK,QAAQ,gBAAgB,GAAGD,GAAGC,QAAQ,uBAAuBwD,GAAGxD,QAAQ,wBAAwB7D,GAAG,OAAOwH,EAAE,SAAS,GAAEvG,EAAEuB,EAAEzC,EAAEqE,GAAG,MAAMyE,aAAa5I,GAAGgB,EAAEsC,EAAE,GAAEtC,EAAEuB,GAAG,IAAIgB,EAAE,GAAG,GAAGD,GAAGA,EAAEV,OAAO,EAAE,CAAC,MAAM5B,EAAEhB,EAAEuJ,IAAIhH,GAAGiH,YAAYxJ,EAAEuJ,IAAIhH,GAAGiH,WAAW,GAAG7F,EAAE3D,EAAEuJ,IAAIhH,GAAGkH,aAAazJ,EAAEuJ,IAAIhH,GAAGkH,YAAY,GAAGlG,EAAED,EAAE,GAAGqG,SAASpG,EAAET,QAAQ,UAAUS,EAAEX,OAAO,IAAIW,EAAEA,EAAEsC,MAAM,EAAEtC,EAAEX,OAAO,IAAIW,EAAEA,EAAEK,QAAQ,cAAcO,GAAGZ,EAAEA,EAAEK,QAAQ,sBAAsB9D,GAAGyD,EAAEA,EAAEK,QAAQ,mBAAmB,WAAWL,EAAEA,EAAEK,QAAQ,gBAAgB,SAASL,EAAEA,EAAEK,QAAQ,gBAAgB,SAASL,EAAEA,EAAEK,QAAQ,uBAAuB5C,GAAGuC,EAAEA,EAAEK,QAAQ,wBAAwBD,GAAG,OAAOJ,EAAE,SAAS,GAAEvC,GAAG,MAAMuB,EAAE2E,EAAE,mBAAmBlG,GAAGlB,EAAEyC,EAAE,EAAE,cAAcA,GAAGmB,MAAM,KAAK,CAAC,OAAO,OAAOS,EAAE5B,EAAE,EAAE,cAAcA,GAAGmB,MAAM,KAAK,CAAC,MAAM,MAAM,MAAM,CAACmG,KAAKC,WAAWhK,EAAE,IAAIiK,KAAKD,WAAWhK,EAAE,IAAIkK,KAAKF,WAAW3F,EAAE,IAAI8F,KAAKH,WAAW3F,EAAE,IAAI5C,iBAAiB,CAACwH,KAAK,OAAO,SAAS,GAAE/H,EAAEuB,GAAG,OAAO,EAAE,QAAQvB,GAAG6C,IAAK7C,IAAI,MAAMlB,EAAEoH,EAAE,YAAYlG,GAAGmD,EAAE+C,EAAE,WAAWlG,GAAGhB,EAAEmE,GAAG,EAAE,UAAUA,GAAG,IAAIb,EAAExD,GAAGA,EAAEoI,aAAa,cAAsD,OAAxC3F,IAAIe,EAAEA,GAAGA,EAAEM,QAAQ,UAAU,WAAiB,CAACsG,SAAS,EAAE,WAAWlJ,GAAGgC,GAAG,EAAE,aAAahC,GAAG2E,UAAU,SAAS3E,EAAEkH,aAAa,aAAatC,SAAS5F,EAAE0F,UAAUpC,EAAEP,MAAM,EAAE,QAAQ/B,MAAO,SAAS,GAAEA,EAAEuB,EAAEzC,GAAG,OAAO,EAAE,oBAAoByC,GAAGsB,IAAK7C,GAAGkG,EAAE,gBAAgBlG,GAAGqI,aAAcxF,IAAKM,GAAG,GAAEnD,EAAEmD,EAAE5B,EAAEzC,IAAK,SAAS,GAAEkB,EAAEuB,EAAEzC,EAAEqE,GAAG,MAAMnE,EAAE,EAAE,aAAa+B,GAAE,oBAAoB,gBAAgBQ,EAAEzC,IAAIwD,EAAEa,EAAEsC,KAAMzF,IAAI,MAAMlB,EAAEoH,EAAE,aAAalG,GAAGmD,EAAErE,GAAGA,EAAEuJ,YAAY,SAASlF,IAAI5B,GAAGA,EAAEmB,MAAM,MAAMnB,EAAEmB,MAAM,KAAK,KAAKS,KAAMZ,EAAE,GAAED,GAAGxC,EAAEyC,EAAEhC,iBAAiB4F,EAAErG,EAAEiI,KAAK3B,EAAEF,EAAE,aAAa5D,GAAGvD,EAAE,CAACoK,SAAS,EAAE,YAAY/C,GAAG,IAAI+C,SAAS,EAAE,aAAa/C,GAAG,KAAKG,EAAE,GAAMvH,EAAE4C,OAAO5C,EAAE6I,QAAQ,CAAE7H,EAAElB,KAAK,MAAMqE,EAAEpC,GAAE,aAAa,aAAaf,EAAEsC,GAAGiE,EAAE9D,KAAK2G,GAAEjG,EAAEgD,EAAErH,EAAEyC,MAAY,EAAE,aAAae,GAAGuF,QAAQ,CAAE7H,EAAElB,KAAKyH,EAAE9D,KAAK2G,GAAEpJ,EAAEmG,EAAErH,EAAEyC,MAAO,MAAM8H,EAAE,GAAErJ,EAAEsC,EAAEC,EAAExD,EAAEwH,EAAE,IAAI,MAAM,CAACvE,GAAGT,EAAErB,WAAWmJ,EAAEC,SAAS7I,SAAS,IAAI,OAAE,CAACE,IAAI,GAAGJ,iBAAiBT,EAAEY,KAAK3B,EAAE+B,OAAOyB,EAAEtB,KAAKsF,IAAI+C,UAAU,SAAS,GAAEtJ,GAAG,IAAIlB,EAAE,EAAE,eAAekB,GAAGlB,IAAIA,EAAEA,EAAE4J,eAAe,IAAI1J,EAAEmK,SAASrK,EAAE4D,MAAM,KAAK6G,MAAM,IAAI,SAASvK,GAAG,OAAOA,IAAIA,EAAE,QAAQ,MAAMuD,EAAEiH,GAAE1K,GAAG,eAAEyD,KAAKvD,EAAEuD,GAAG,MAAMI,EAAE,IAAI,OAAE,CAACoF,KAAK/I,IAAIc,EAAE,EAAE,gBAAgBoG,EAAE,aAAalG,IAAI0C,MAAM,KAAKyD,EAAErG,EAAE,GAAG4C,MAAM,KAAKG,IAAK7C,GAAGyJ,OAAOzJ,IAAKoG,EAAEtG,EAAE,GAAG4C,MAAM,KAAKG,IAAK7C,GAAGyJ,OAAOzJ,IAAKjB,EAAEoH,EAAEvE,OAAO,EAAEuE,EAAE,GAAG,IAAIA,EAAE,GAAGA,EAAE,GAAGI,EAAEH,EAAExE,OAAO,EAAEwE,EAAE,GAAG,IAAIA,EAAE,GAAGA,EAAE,GAAG,OAAOtH,EAAE4K,SAAS,SAASC,GAAE3K,GAAG,IAAI,OAAEuH,EAAExH,EAAE4D,GAAG,IAAI,OAAE5D,EAAEwH,EAAE5D,GAAG,SAAS,GAAE3C,EAAEuB,EAAE4B,EAAEnE,EAAEsD,GAAG,MAAMC,EAAE2D,EAAE,cAAc3E,GAAG,IAAIoB,EAAE7C,EAAEqG,EAAEC,EAAErH,EAAEwH,EAAE,GAAGhE,IAAII,EAAE,EAAE,cAAcJ,GAAGG,MAAM,KAAK5C,EAAE,EAAE,cAAcyC,GAAGG,MAAM,MAAMC,GAAGA,EAAEf,OAAO,GAAG9B,GAAGA,EAAE8B,OAAO,EAAEuE,EAAE2C,WAAWnG,EAAE,IAAI5D,EAAE+J,WAAWnG,EAAE,IAAIyD,EAAE0C,WAAWhJ,EAAE,IAAIyG,EAAEuC,WAAWhJ,EAAE,QAAQ,CAAC,MAAME,EAAEkG,EAAE,aAAa3E,GAAGzC,EAAEgK,WAAW,EAAE,cAAc9I,IAAIuC,EAAEuG,WAAW,EAAE,eAAe9I,IAAImG,EAAEhD,EAAEpC,EAAEwF,EAAEpD,EAAEnC,EAAEoF,EAAED,EAAErH,EAAEE,EAAE,GAAGsD,EAAElB,WAAWrC,EAAEwH,EAAEhE,EAAEvD,EAAE,GAAGsD,EAAElB,WAAW,OAAOrB,GAAEC,EAAEmD,EAAE5C,kBAAkB,IAAI,OAAExB,EAAEoH,EAAEI,EAAEH,EAAEjD,EAAE5C,kBAAkB,IAAI,OAAE4F,EAAEpH,EAAEqH,EAAEG,EAAEpD,EAAE5C,kBAAkB,SAASR,GAAEC,EAAEuB,GAAG,MAAM,UAAUvB,GAAG2J,GAAEpI,EAAEwG,MAAM,SAAS4B,GAAE3J,GAAG,OAAO,EAAE+G,KAAK,EAAGxF,EAAEzC,KAAKkB,GAAGuB,GAAGvB,GAAGlB,GAAI,SAAS0K,GAAExJ,GAAG,OAAOA,EAAE0J,SAAS,UAAU1J,EAAE0J,SAAS,UAAU,KAAK1J,EAAE0J,SAAS,UAAU1J,EAAE0J,SAAS,UAAU,KAAK1J,EAAE0J,SAAS,UAAU1J,EAAE0J,SAAS,UAAU,KAAK,KAAK,SAASN,GAAEpJ,EAAEuB,EAAEzC,EAAEqE,GAAG,MAAMnE,EAAE,EAAE,aAAagB,GAAGsC,EAAE,EAAE,mBAAmBtC,GAAG0C,MAAM,KAAKG,IAAK7C,GAAGyJ,OAAOzJ,IAAK,IAAIuC,EAAEA,EAAED,EAAEV,OAAO,EAAEU,EAAE,GAAG,IAAIA,EAAE,GAAGA,EAAE,GAAG,MAAMK,EAAEmF,GAAEvG,EAAEgB,EAAEY,GAAG,OAAOZ,GAAG,GAAG,EAAE,CAACrB,MAAMpC,EAAEsD,WAAWpD,EAAEmC,MAAMoB,EAAEnB,WAAWuB,GAAG,SAASmF,GAAE9H,EAAEuB,EAAEzC,GAAG,IAAIqE,EAAE,OAAOA,EAAE,OAAEoB,eAAe1E,OAAOG,IAAI,OAAE4J,OAAO,OAAE5J,IAAI,iBAAiBlB,EAAE,QAAQ+K,KAAKC,GAAG,IAAI,eAAE9J,GAAG+J,gBAAgB,EAAExI,EAAE,KAAK4B,ECAnoP,MAAM,GAAE,CAAC,YAAY,OAAO,aAAa,OAAO,cAAc,OAAO,cAAc,OAAO,YAAY,OAAO,aAAa,QAAQ,YAAY,OAAO,YAAY,OAAO,aAAa,OAAO,eAAe,GAAG,gBAAgB,GAAG,gBAAgB,IAAI6G,GAAE,IAAIC,IAAI,CAAC,UAAU,UAAU,UAAU,QAAQ,QAAQ,SAAS,gBAAgB,aAAa,UAAU,YAAY,IAAI,GAAE,cAAc,cAAD,CAAG,eAAE,eAAE,eAAE,eAAE,eAAE,cAAS,eAAejK,GAAGf,SAASe,GAAGb,KAAK+K,kBAAkB,IAAI,OAAE/K,KAAKc,UAAU,GAAGd,KAAKC,iBAAiB,KAAKD,KAAKD,sBAAsB,KAAKC,KAAKe,WAAW,KAAKf,KAAKgL,qBAAqB,gBAAgBhL,KAAKiL,aAAa,KAAKjL,KAAK0H,YAAY,UAAU1H,KAAKkL,UAAU,KAAKlL,KAAKM,KAAK,OAAON,KAAKmL,QAAQ,QAAQnL,KAAKoL,MAAM,cAAc,CAAEvK,EAAEuB,KAAKA,IAAIA,EAAEyD,MAAM,MAAMhF,IAAIA,EAAEgF,MAAM7F,QAAQ,GAAIA,KAAKoL,MAAM,YAAY,CAAEvK,EAAEuB,KAAKA,IAAIA,EAAEsG,QAAS7H,IAAIA,EAAEgF,MAAM,OAAQ7F,KAAK+K,kBAAkBM,YAAYrL,KAAK+K,kBAAkB,MAAMlK,IAAIA,EAAE6H,QAAS7H,IAAIA,EAAEgF,MAAM7F,OAAQA,KAAK+K,oBAAoB/K,KAAK+K,kBAAkB,IAAI,QAAG/K,KAAK+K,kBAAkBO,IAAI,CAACzK,EAAE0K,GAAG,YAAY,EAAGC,KAAK3K,MAAMA,EAAEgF,MAAM7F,OAAQa,EAAE0K,GAAG,eAAe,EAAGC,KAAK3K,MAAMA,EAAEgF,MAAM,YAAa,GAAI,kBAAkBhF,EAAEuB,GAAG,MAAM,iBAAiBvB,EAAE,CAACT,IAAIS,KAAKuB,GAAGvB,EAAE,KAAKA,GAAG,GAAG,QAAQb,KAAK0H,aAAa,YAAY1H,KAAK0H,YAAY,OAAO1H,KAAK8C,oBAAoB9C,KAAKqC,eAAe,CAACC,eAAe,CAAC,SAASzB,GAAG4K,MAAM,QAAGlJ,KAAK,IAAKvC,KAAK0L,cAAc7K,IAAK4K,MAAO5K,IAAI,MAAM,eAAEA,GAAG,IAAI,OAAE,qCAAqC,0CAA0C,CAACuF,MAAMvF,OAAQkC,QAAQC,QAAQhD,MAAMmG,QAAQC,MAAM,8CAA8C,kBAAkB,OAAOpG,KAAKiG,KAAK,eAAe,gBAAgBpF,GAAGb,KAAKkG,KAAK,cAAcrF,GAAG,2BAA2BA,EAAEuB,EAAEvC,GAAG,IAAIF,EAAE,OAAOK,KAAK2L,YAAYvJ,EAAEiG,OAAOT,KAAM/G,GAAGA,EAAEgC,KAAK7C,KAAK2L,YAAY9I,KAAKlD,EAAEkB,GAAE,KAAOb,KAAK2L,YAAY,IAAI,EAAEhM,EAAEyC,EAAEiG,OAAO,IAAIrI,KAAK2L,YAAY7G,KAAKnF,EAAEE,GAAGG,KAAK2L,YAAY,gCAAgC9K,EAAEuB,GAAG,MAAMyB,YAAYhE,EAAEsC,SAASxC,GAAGyC,EAAEoB,EAAE3D,EAAEG,KAAK4L,wBAAwB/L,GAAG,KAAKc,EAAEhB,GAAGA,EAAEO,gBAAgB,IAAIkD,EAAE,KAAK,MAAMD,EAAExD,GAAGA,EAAEQ,cAAcgD,IAAIkE,MAAMwE,QAAQ1I,GAAGA,EAAEV,SAASW,EAAED,EAAE,IAAIC,EAAED,GAAG,MAAMa,EAAER,GAAGA,EAAE/B,OAAOqK,EAAEtI,GAAGA,EAAEuI,MAAM,OAAO,IAAI,EAAE,CAAClJ,GAAGlC,EAAE4F,YAAYvC,EAAEwC,QAAQsF,EAAE/F,gBAAgB3C,IAAI,iBAAiBvC,EAAEuB,EAAEvC,EAAEF,GAAG,MAAM6D,EAAExD,KAAK2L,YAAYvJ,EAAEyB,YAAY7D,KAAKgM,eAAexI,EAAEX,GAAGW,EAAEuC,gBAAgBvC,EAAE+C,YAAY/C,EAAEgD,SAAS,MAAM7F,EAAE,eAAE,yBAAyB6C,GAAGpB,EAAEd,SAASX,EAAEA,EAAEwJ,OAAOxK,GAAG,KAAKyC,EAAED,SAAS,IAAIC,EAAED,SAASjC,gBAAgBsD,EAAEX,GAAG1C,cAAcqD,EAAEuC,iBAAiB,qBAAqBlF,EAAEuB,GAAG,MAAMvC,EAAEuC,EAAED,SAAS,OAAOtC,EAAEG,KAAKiM,aAAapM,EAAEI,iBAAiBJ,EAAEO,KAAK,KAAK,kBAAkB,MAAMS,EAAE,GAAG,OAAOb,KAAK2L,YAAY3F,eAAe0C,QAAStG,IAAIA,EAAErB,YAAYF,EAAEyC,KAAKlB,EAAErB,cAAeF,EAAE,gBAAgBA,EAAEuB,GAAG,OAAOA,EAAEyB,YAAYlB,QAAQ,MAAM,EAAE,MAAM,UAAU,yBAAyB9B,EAAEuB,EAAEvC,GAAG,OAAO,GAAEuC,EAAEiG,OAAOxI,GAAG,iCAAiC,OAAOG,KAAK2L,YAAY3F,eAAetC,IAAK7C,GAAGA,EAAES,SAASF,kBAAmB8K,UAAU,YAAY,IAAIrL,EAAEuB,EAAE,OAAO,OAAOvB,EAAE,OAAOuB,EAAEpC,KAAK2L,kBAAa,EAAOvJ,EAAEQ,OAAO/B,EAAE,QAAQ,UAAUA,GAAGA,EAAEb,KAAKmM,UAAU,QAAQtL,GAAGb,KAAKoM,eAAe,SAAS,UAAU,OAAOpM,KAAKiG,KAAK,OAAO,QAAQpF,GAAGA,GAAG,MAAMA,EAAEwL,QAAQ,GAAGrM,KAAKkG,KAAK,MAAMrF,EAAE6E,MAAM,GAAG,IAAI1F,KAAKkG,KAAK,MAAMrF,GAAG,mBAAmBA,GAAG,MAAMuB,EAAEpC,KAAKgM,eAAehM,KAAK2L,YAAY9I,GAAG7C,KAAK2L,YAAY5F,gBAAgB/F,KAAK2L,YAAYpF,YAAYvG,KAAK2L,YAAYnF,SAAS3G,EAAEG,KAAKsM,sBAAsBzL,EAAEkF,iBAAiBzE,SAAS3B,EAAEkB,EAAEE,WAAWyC,EAAE,IAAI,OAAE,CAACtD,gBAAgBW,EAAEgC,GAAG1C,cAAcU,EAAEkF,gBAAgB3F,IAAIJ,KAAKI,MAAM,OAAOJ,KAAKD,wBAAwByD,EAAEzD,sBAAsBC,KAAKD,uBAAuBC,KAAKC,mBAAmBuD,EAAEvD,iBAAiBD,KAAKC,kBAAkB,IAAI,aAAE,CAACc,WAAWpB,EAAEuC,YAAYE,EAAEd,SAASzB,EAAEsC,SAASqB,IAAI,UAAU3C,EAAEhB,EAAEF,GAAG,MAAM6D,EAAExD,KAAKiE,WAAWpD,EAAEhB,EAAEF,GAAG,OAAO,qBAAE6D,EAAE,CAACU,aAAa,UAAU3B,KAAM1B,GAAGA,EAAEwD,MAAO,iBAAiBxD,GAAG,OAAOb,KAAKkL,UAAU5E,KAAMlE,GAAGA,EAAES,KAAKhC,GAAI,WAAWA,EAAEuB,EAAEvC,GAAG,MAAMF,EAAEK,KAAKsM,sBAAsBtM,KAAK2L,YAAY5F,iBAAiBzE,SAASQ,KAAKjB,GAAG2C,EAAE7D,EAAEA,EAAEsD,WAAWtD,EAAEsD,WAAW,GAAGtD,EAAEoC,MAAQ,GAAGlB,EAAI,IAAIF,EAAEX,KAAKiL,aAAa,GAAG,GAAE,CAACxC,aAAazI,KAAKyI,aAAaD,SAASxI,KAAKwI,UAAUxI,KAAK2L,YAAY9I,GAAG7C,KAAK2L,YAAY5F,gBAAgB/F,KAAK2L,YAAYpF,YAAYvG,KAAK2L,YAAYnF,QAAQhD,EAAEpB,EAAEvC,GAA6N,OAAtNc,IAAGA,EAAEX,KAAKgM,eAAehM,KAAK2L,YAAY9I,GAAG7C,KAAK2L,YAAY5F,gBAAgB/F,KAAK2L,YAAYpF,YAAYvG,KAAK2L,YAAYnF,SAAS/C,QAAQ,cAAcD,GAAGC,QAAQ,YAAY,GAAGrB,GAAKqB,QAAQ,YAAY,GAAG5D,IAAYc,EAAEX,KAAKuM,6BAA6B5L,GAAGA,EAAE,eAAeE,EAAEuB,EAAEvC,EAAEF,GAAG,IAAIK,KAAKiL,aAAa,CAAC,MAAMpL,EAAE,GAAE,CAAC4I,aAAazI,KAAKyI,aAAaD,SAASxI,KAAKwI,UAAU3H,EAAEuB,EAAEzC,GAAG,GAAGE,EAAE,OAAOA,EAAE,GAAG,QAAQG,KAAK0H,YAAY,OAAO1H,KAAKI,IAAI,yBAAyBJ,KAAKmL,QAAQ,0BAA0BtK,EAAE,UAAUlB,EAAE,WAAWE,EAAE,kBAAkBuC,EAAE,kDAAkD,GAAG,YAAYpC,KAAK0H,YAAY,CAAC,IAAIlE,EAAE,GAAG,OAAO,GAAE3D,EAAE0J,iBAAiB/F,EAAE,GAAE3D,EAAE0J,gBAAgBvJ,KAAKI,IAAIS,EAAE,IAAIlB,EAAE,IAAIyC,EAAE,uBAAuBoB,EAAE,MAAM,GAAG,oBAAoB3C,GAAG,IAAIuB,EAAE,GAAGpC,KAAKiL,aAAa,QAAQjL,KAAKiL,aAAavD,cAAc1H,KAAKI,KAAKJ,KAAKI,IAAIuC,QAAQ,MAAM,EAAE,GAAG,KAAKP,EAAE,CAACoK,KAAI,EAAGnI,KAAKrE,KAAKiL,mBAAmB,IAAI7I,QAAQpC,KAAKyM,iBAAiBzM,KAAK0H,YAAY7G,GAAG,MAAM,MAAM2C,EAAE,QAAQxD,KAAK0H,YAAY,UAAU,MAAM,IAAItF,QAAQpC,KAAKyM,iBAAiBjJ,EAAE3C,GAAGb,KAAK0H,YAAYlE,EAAE,MAAM3D,GAAG,MAAM,IAAI,OAAE,qCAAqC,0DAA0D,CAACuG,MAAMvG,KAAKG,KAAKiL,aAAa7I,EAAEiC,KAAK,EAAEjC,EAAEiC,MAAMjC,EAAEiC,KAAK,EAAEjC,EAAEiC,KAAK,CAACqD,YAAY1H,KAAK0H,YAAYtH,IAAIJ,KAAKI,MAAMgC,EAAEiC,MAAMrE,KAAK8E,KAAK1C,EAAEiC,KAAK,CAAC1C,OAAO,YAAY,uBAAuBd,EAAEhB,GAAG,MAAMF,EAAEK,KAAK0M,oBAAoB7L,GAAG,aAAa,qBAAElB,EAAE,IAAIE,EAAEqE,aAAa,SAAS,sBAAsBrD,GAAG,OAAOb,KAAK2M,iBAAiB3M,KAAK2L,YAAY9I,IAAImD,eAAeM,KAAMlE,GAAGA,EAAES,KAAKhC,GAAI,wBAAwBA,GAAG,GAAGb,KAAKC,iBAAiB,IAAI,MAAMmC,KAAKpC,KAAKC,iBAAiBY,KAAK,IAAIA,EAAE8B,QAAQ,KAAK,IAAI,KAAKP,EAAE,IAAIwK,mBAAmB5M,KAAKC,iBAAiBmC,IAAI,OAAOvB,EAAE,6BAA6BA,GAAG,GAAGb,KAAKD,uBAAuBC,KAAKC,iBAAiB,CAAC,MAAMmC,EAAE,IAAI,eAAEpC,KAAKC,qBAAqBD,KAAKD,uBAAuB,IAAI,MAAMF,KAAKuC,EAAEvB,KAAK,IAAIA,EAAE8B,QAAQ,KAAK,IAAI,KAAK9C,EAAE,IAAI+M,mBAAmBxK,EAAEvC,IAAI,OAAOgB,EAAE,oBAAoBA,GAAG,IAAIuB,EAAE,OAAOpC,KAAKI,IAAIJ,KAAKI,IAAImD,MAAM,KAAK,GAAG,QAAQ1C,EAAEuB,EAAEpC,KAAKI,IAAI,iDAAiDJ,KAAKmL,QAAQ,YAAYtK,IAAIuB,EAAEpC,KAAKI,IAAI,IAAIJ,KAAKmL,QAAQ,yBAAyB/I,EAAEpC,KAAK6M,wBAAwBzK,GAAGA,EAAE,wBAAwBvB,GAAG,IAAIA,EAAE,OAAO,KAAK,MAAMuB,EAAE,eAAEvB,GAAGsD,MAAM,IAAI/B,EAAE,OAAO,KAAK,MAAMvC,EAAE,GAAG,OAAOU,OAAOuM,KAAK1K,GAAGsG,QAAS7H,IAAIhB,EAAEgB,EAAE0I,eAAenH,EAAEvB,KAAMhB,EAAE,aAAagB,EAAEuB,GAAG,MAAMvC,EAAEG,KAAK4L,wBAAwBxJ,GAAG,GAAGvC,EAAE,CAAC,MAAMuC,EAAE7B,OAAOuM,KAAKjN,GAAGuC,EAAEK,SAAS5B,EAAEA,EAAE,eAAEA,GAAG,GAAGuB,EAAEsG,QAAStG,IAAIvB,EAAEuE,eAAehD,IAAIyI,GAAEkC,IAAI3K,KAAKvB,EAAEuB,GAAGvC,EAAEuC,OAAQ,OAAOvB,IAAI,SAAS,GAAEA,EAAEuB,GAAG,OAAOvB,EAAE6C,IAAK7C,IAAI,MAAMhB,EAAE,IAAI,EAAE,OAAOA,EAAEiF,KAAKjE,EAAEuB,GAAGvC,IAAK,eAAE,CAAC,kBAAK,GAAEY,UAAU,oBAAe,GAAQ,eAAE,CAAC,kBAAK,GAAEA,UAAU,gBAAW,GAAQ,eAAE,CAAC,eAAE,CAACH,KAAK,EAAED,KAAK,CAAC6E,QAAQ,CAAC,eAAe,CAAC1E,MAAM,CAACkG,cAAa,SAAU,GAAEjG,UAAU,cAAc,MAAM,eAAE,CAAC,eAAE,UAAU,cAAc,CAAC,YAAY,GAAEA,UAAU,6BAA6B,MAAM,eAAE,CAAC,eAAE,CAAC,eAAe,eAAe,cAAc,CAAC,cAAc,GAAEA,UAAU,kCAAkC,MAAM,eAAE,CAAC,eAAE,CAAC,eAAe,eAAe,cAAc,CAACoD,YAAY,CAACvD,KAAKI,QAAQY,SAAS,CAAChB,KAAK,QAAG,2BAA2B,CAACA,KAAKI,QAAQ,yBAAyB,CAACJ,KAAKI,WAAW,GAAED,UAAU,mBAAmB,MAAM,eAAE,CAAC,eAAE,CAACH,KAAKI,OAAOkE,MAAM,GAAGvE,KAAK,CAACG,OAAM,MAAO,GAAEC,UAAU,iBAAY,GAAQ,eAAE,CAAC,eAAE,CAACH,KAAK,CAAC,OAAO,WAAW,GAAEG,UAAU,gBAAW,GAAQ,eAAE,CAAC,eAAE,CAACJ,KAAK,CAAC6E,QAAQ,CAAC,eAAe,CAACJ,KAAK,CAACK,OAAO,CAAC,4BAA4B,iBAAiB3E,MAAM,CAACwM,OAAO,8BAA8B,cAAc,CAAClI,KAAK,CAACK,OAAO,CAAC,4BAA4B,iBAAiB3E,MAAM,CAACwM,OAAO,mCAAmC,GAAEvM,UAAU,wBAAmB,GAAQ,eAAE,CAAC,eAAE,eAAe,oBAAoB,eAAE,cAAc,qBAAqB,GAAEA,UAAU,uBAAuB,MAAM,eAAE,CAAC,eAAE,CAACJ,KAAK,CAAC6E,QAAQ,CAAC,eAAe,CAACJ,KAAK,CAACK,OAAO,kCAAkC3E,MAAM,CAACwM,OAAO,mCAAmC,cAAc,CAAClI,KAAK,CAACK,OAAO,kCAAkC3E,MAAM,CAACwM,OAAO,wCAAwC,GAAEvM,UAAU,6BAAwB,GAAQ,eAAE,CAAC,eAAE,CAACH,KAAK,OAAED,KAAK,CAACG,MAAM,CAACkG,cAAa,GAAIxB,QAAQ,CAAC,eAAe,CAACJ,KAAK,CAACK,OAAO,eAAe,cAAc,CAACL,KAAK,CAACK,OAAO,oBAAoB,GAAE1E,UAAU,kBAAa,GAAQ,eAAE,CAAC,eAAE,CAACoE,UAAS,KAAM,GAAEpE,UAAU,cAAc,MAAM,eAAE,CAAC,eAAE,CAACH,KAAK,CAAC,oBAAoB,GAAEG,UAAU,4BAAuB,GAAQ,eAAE,CAAC,kBAAK,GAAEA,UAAU,oBAAe,GAAQ,eAAE,CAAC,kBAAK,GAAEA,UAAU,mBAAc,GAAQ,eAAE,CAAC,eAAE,CAAC,cAAc,gBAAgB,cAAc,CAAC,iBAAiB,GAAEA,UAAU,kBAAkB,MAAM,eAAE,CAAC,eAAE,CAACH,KAAK,OAAEmG,OAAO,MAAM,GAAEhG,UAAU,iBAAY,GAAQ,eAAE,CAAC,eAAE,UAAU,YAAY,CAAC,YAAY,GAAEA,UAAU,2BAA2B,MAAM,eAAE,CAAC,eAAE,CAACoE,UAAS,KAAM,GAAEpE,UAAU,6BAA6B,MAAM,eAAE,CAAC,eAAE,CAACJ,KAAK,CAACyE,KAAK,CAACK,OAAO,aAAa,GAAE1E,UAAU,QAAQ,MAAM,eAAE,CAAC,eAAE,CAACJ,KAAK,CAACyE,MAAK,GAAID,UAAS,EAAGD,MAAM,UAAU,GAAEnE,UAAU,YAAO,GAAQ,eAAE,CAAC,eAAE,CAACJ,KAAK,CAAC6E,QAAQ,CAAC+H,QAAQ,CAACnI,KAAK,CAACK,OAAO,YAAY,eAAe,CAACL,KAAK,CAACK,OAAO,gBAAgB3E,MAAM,CAACwM,OAAO,iBAAiB,cAAc,CAAClI,KAAK,CAACK,OAAO,gBAAgB3E,MAAM,CAACwM,OAAO,sBAAsB,GAAEvM,UAAU,MAAM,MAAM,eAAE,CAAC,kBAAK,GAAEA,UAAU,eAAU,GAAQ,GAAE,eAAE,CAAC,eAAE,0BAA0B,IAAG,IAAIyM,GAAE,GAAiB","file":"js/chunk-6964ca64.e46489c3.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import{clone as e}from\"../../core/lang.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";var i;let p=i=class extends t{constructor(r){super(r)}clone(){return new i({customLayerParameters:e(this.customLayerParameters),customParameters:e(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};r([o({json:{type:Object,write:!0}})],p.prototype,\"customLayerParameters\",void 0),r([o({json:{type:Object,write:!0}})],p.prototype,\"customParameters\",void 0),r([o({type:String,json:{write:!0}})],p.prototype,\"layerIdentifier\",void 0),r([o({type:String,json:{write:!0}})],p.prototype,\"tileMatrixSet\",void 0),r([o({type:String,json:{write:!0}})],p.prototype,\"url\",void 0),p=i=r([s(\"esri.layer.support.WMTSLayerInfo\")],p);var a=p;export default a;export{p as WMTSLayerInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import t from\"../request.js\";import r from\"../core/Error.js\";import{MultiOriginJSONMixin as l}from\"../core/MultiOriginJSONSupport.js\";import{replace as o}from\"../core/string.js\";import{Url as s,isProtocolRelative as i,normalize as n}from\"../core/urlUtils.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{reader as p}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as u}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as m}from\"../core/accessorSupport/decorators/writer.js\";import c from\"./Layer.js\";import{BlendLayer as f}from\"./mixins/BlendLayer.js\";import{OperationalLayer as y}from\"./mixins/OperationalLayer.js\";import{PortalLayer as h}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as d}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as v}from\"./mixins/ScaleRangeLayer.js\";import w from\"./support/LOD.js\";import g from\"./support/TileInfo.js\";import j from\"./support/WMTSLayerInfo.js\";import T from\"../geometry/Extent.js\";import b from\"../geometry/SpatialReference.js\";import S from\"../geometry/Point.js\";let R=class extends(f(d(v(y(h(l(c))))))){constructor(...e){super(...e),this.copyright=\"\",this.fullExtent=new T(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,b.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=b.WebMercator,this.subDomains=null,this.tileInfo=new g({size:[256,256],dpi:96,format:\"png8\",compressionQuality:0,origin:new S({x:-20037508.342787,y:20037508.342787,spatialReference:b.WebMercator}),spatialReference:b.WebMercator,lods:[new w({level:0,scale:591657527.591555,resolution:156543.033928}),new w({level:1,scale:295828763.795777,resolution:78271.5169639999}),new w({level:2,scale:147914381.897889,resolution:39135.7584820001}),new w({level:3,scale:73957190.948944,resolution:19567.8792409999}),new w({level:4,scale:36978595.474472,resolution:9783.93962049996}),new w({level:5,scale:18489297.737236,resolution:4891.96981024998}),new w({level:6,scale:9244648.868618,resolution:2445.98490512499}),new w({level:7,scale:4622324.434309,resolution:1222.99245256249}),new w({level:8,scale:2311162.217155,resolution:611.49622628138}),new w({level:9,scale:1155581.108577,resolution:305.748113140558}),new w({level:10,scale:577790.554289,resolution:152.874056570411}),new w({level:11,scale:288895.277144,resolution:76.4370282850732}),new w({level:12,scale:144447.638572,resolution:38.2185141425366}),new w({level:13,scale:72223.819286,resolution:19.1092570712683}),new w({level:14,scale:36111.909643,resolution:9.55462853563415}),new w({level:15,scale:18055.954822,resolution:4.77731426794937}),new w({level:16,scale:9027.977411,resolution:2.38865713397468}),new w({level:17,scale:4513.988705,resolution:1.19432856685505}),new w({level:18,scale:2256.994353,resolution:.597164283559817}),new w({level:19,scale:1128.497176,resolution:.298582141647617})]}),this.type=\"web-tile\",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(e,t){return\"string\"==typeof e?{urlTemplate:e,...t}:e}load(e){const t=this.loadFromPortal({supportedTypes:[\"WMTS\"]},e).then((()=>{let e=\"\";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const t=new s(this.urlTemplate);!!this.subDomains&&this.subDomains.length>0||-1===t.authority.indexOf(\"{subDomain}\")||(e=\"is missing 'subDomains' property\")}else e=\"spatialReference must match tileInfo.spatialReference\";else e=\"is missing the required 'urlTemplate' property value\";if(e)throw new r(\"web-tile-layer:load\",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${e}`)}));return this.addResolvingPromise(t),Promise.resolve(this)}get levelValues(){const e=[];if(!this.tileInfo)return null;for(const t of this.tileInfo.lods)e[t.level]=t.levelValue||t.level;return e}readSpatialReference(e,t){return e||t.fullExtent&&t.fullExtent.spatialReference&&b.fromJSON(t.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const e=[],{urlTemplate:t,subDomains:r}=this,l=new s(t),o=l.scheme?l.scheme+\"://\":\"//\",i=o+l.authority+\"/\";if(-1===l.authority.indexOf(\"{subDomain}\"))e.push(i);else if(r&&r.length>0&&l.authority.split(\".\").length>1)for(const s of r)e.push(o+l.authority.replace(/\\{subDomain\\}/gi,s)+\"/\");return e.map((e=>(\"/\"!==e.charAt(e.length-1)&&(e+=\"/\"),e)))}get urlPath(){if(!this.urlTemplate)return null;const e=this.urlTemplate,t=new s(e),r=(t.scheme?t.scheme+\"://\":\"//\")+t.authority+\"/\";return e.substring(r.length)}readUrlTemplate(e,t){return e||t.templateUrl}writeUrlTemplate(e,t){e&&i(e)&&(e=\"https:\"+e),e&&(e=e.replace(/\\{z\\}/gi,\"{level}\").replace(/\\{x\\}/gi,\"{col}\").replace(/\\{y\\}/gi,\"{row}\"),e=n(e)),t.templateUrl=e}fetchTile(e,r,l,o={}){const{signal:s,timestamp:i}=o,n=this.getTileUrl(e,r,l),a={responseType:\"image\",signal:s};return null!=i&&(a.query={_ts:o.timestamp}),t(n,a).then((e=>e.data))}getTileUrl(e,t,r){const l=this.levelValues[e];return this.tileServers[t%this.tileServers.length]+o(this.urlPath,{level:l,z:l,col:r,x:r,row:t,y:t})}};e([a({type:String,value:\"\",json:{write:!0}})],R.prototype,\"copyright\",void 0),e([a({type:T,json:{write:!0}})],R.prototype,\"fullExtent\",void 0),e([a({readOnly:!0,json:{read:!1,write:!1}})],R.prototype,\"legendEnabled\",void 0),e([a({type:[\"show\",\"hide\"]})],R.prototype,\"listMode\",void 0),e([a()],R.prototype,\"levelValues\",null),e([a({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],R.prototype,\"isReference\",void 0),e([a({type:[\"WebTiledLayer\"],value:\"WebTiledLayer\"})],R.prototype,\"operationalLayerType\",void 0),e([a({readOnly:!0,json:{read:!1,write:!1}})],R.prototype,\"popupEnabled\",void 0),e([a({type:b})],R.prototype,\"spatialReference\",void 0),e([p(\"spatialReference\",[\"spatialReference\",\"fullExtent.spatialReference\"])],R.prototype,\"readSpatialReference\",null),e([a({type:[String],json:{write:!0}})],R.prototype,\"subDomains\",void 0),e([a({type:g,json:{write:!0}})],R.prototype,\"tileInfo\",void 0),e([a({readOnly:!0})],R.prototype,\"tileServers\",null),e([a({json:{read:!1}})],R.prototype,\"type\",void 0),e([a()],R.prototype,\"urlPath\",null),e([a({type:String,json:{origins:{\"portal-item\":{read:{source:\"url\"}}}}})],R.prototype,\"urlTemplate\",void 0),e([p(\"urlTemplate\",[\"urlTemplate\",\"templateUrl\"])],R.prototype,\"readUrlTemplate\",null),e([m(\"urlTemplate\",{templateUrl:{type:String}})],R.prototype,\"writeUrlTemplate\",null),e([a({type:j,json:{write:!0}})],R.prototype,\"wmtsInfo\",void 0),R=e([u(\"esri.layers.WebTileLayer\")],R);var x=R;export default x;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"../../geometry/Extent.js\";import i from\"./TileInfo.js\";var l;let n=l=class extends o{constructor(t){super(t),this.fullExtent=null,this.id=null,this.tileInfo=null}clone(){const t=new l;return this.hasOwnProperty(\"fullExtent\")&&(t.fullExtent=this.fullExtent&&this.fullExtent.clone()),this.hasOwnProperty(\"id\")&&(t.id=this.id),this.hasOwnProperty(\"tileInfo\")&&(t.tileInfo=this.tileInfo&&this.tileInfo.clone()),t}};t([e({type:s,json:{read:{source:\"fullExtent\"}}})],n.prototype,\"fullExtent\",void 0),t([e({type:String,json:{read:{source:\"id\"}}})],n.prototype,\"id\",void 0),t([e({type:i,json:{read:{source:\"tileInfo\"}}})],n.prototype,\"tileInfo\",void 0),n=l=t([r(\"esri.layer.support.TileMatrixSet\")],n);var p=n;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{JSONSupport as e}from\"../../core/JSONSupport.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";var o;let i=o=class extends e{constructor(r){super(r),this.id=null,this.title=null,this.description=null,this.legendUrl=null}clone(){const r=new o;return this.hasOwnProperty(\"description\")&&(r.description=this.description),this.hasOwnProperty(\"id\")&&(r.id=this.id),this.hasOwnProperty(\"isDefault\")&&(r.isDefault=this.isDefault),this.hasOwnProperty(\"keywords\")&&(r.keywords=this.keywords&&this.keywords.slice()),this.hasOwnProperty(\"legendUrl\")&&(r.legendUrl=this.legendUrl),this.hasOwnProperty(\"title\")&&(r.title=this.title),r}};r([s({json:{read:{source:\"id\"}}})],i.prototype,\"id\",void 0),r([s({json:{read:{source:\"title\"}}})],i.prototype,\"title\",void 0),r([s({json:{read:{source:\"abstract\"}}})],i.prototype,\"description\",void 0),r([s({json:{read:{source:\"legendUrl\"}}})],i.prototype,\"legendUrl\",void 0),r([s({json:{read:{source:\"isDefault\"}}})],i.prototype,\"isDefault\",void 0),r([s({json:{read:{source:\"keywords\"}}})],i.prototype,\"keywords\",void 0),i=o=r([t(\"esri.layer.support.WMTSStyle\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Collection.js\";import{JSONSupport as r}from\"../../core/JSONSupport.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import l from\"../../geometry/Extent.js\";import a from\"./TileMatrixSet.js\";import n from\"./WMTSStyle.js\";var p;let h=p=class extends r{constructor(t){super(t),this.fullExtent=null,this.imageFormats=null,this.id=null,this.layer=null,this.styles=null,this.tileMatrixSetId=null,this.tileMatrixSets=null}get description(){return this._get(\"description\")}set description(t){this._set(\"description\",t)}readFullExtent(t,e){return(t=e.fullExtent)?l.fromJSON(t):null}get imageFormat(){let t=this._get(\"imageFormat\");return t||(t=this.imageFormats&&this.imageFormats.length?this.imageFormats[0]:\"\"),t}set imageFormat(t){const e=this.imageFormats;t&&(t.indexOf(\"image/\")>-1||e&&-1===e.indexOf(t))&&(-1===t.indexOf(\"image/\")&&(t=\"image/\"+t),e&&-1===e.indexOf(t))?console.error(\"The layer doesn't support the format of \"+t):this._set(\"imageFormat\",t)}get styleId(){let t=this._get(\"styleId\");return t||(t=this.styles&&this.styles.length?this.styles.getItemAt(0).id:\"\"),t}set styleId(t){this._set(\"styleId\",t)}get title(){return this._get(\"title\")}set title(t){this._set(\"title\",t)}get tileMatrixSet(){return this.tileMatrixSets?this.tileMatrixSets.find((t=>t.id===this.tileMatrixSetId)):null}clone(){const t=new p;return this.hasOwnProperty(\"description\")&&(t.description=this.description),this.hasOwnProperty(\"imageFormats\")&&(t.imageFormats=this.imageFormats&&this.imageFormats.slice()),this.hasOwnProperty(\"imageFormat\")&&(t.imageFormat=this.imageFormat),this.hasOwnProperty(\"fullExtent\")&&(t.fullExtent=this.fullExtent&&this.fullExtent.clone()),this.hasOwnProperty(\"id\")&&(t.id=this.id),this.hasOwnProperty(\"layer\")&&(t.layer=this.layer),this.hasOwnProperty(\"styleId\")&&(t.styleId=this.styleId),this.hasOwnProperty(\"styles\")&&(t.styles=this.styles&&this.styles.clone()),this.hasOwnProperty(\"tileMatrixSetId\")&&(t.tileMatrixSetId=this.tileMatrixSetId),this.hasOwnProperty(\"tileMatrixSets\")&&(t.tileMatrixSets=this.tileMatrixSets.clone()),this.hasOwnProperty(\"title\")&&(t.title=this.title),t}};t([s()],h.prototype,\"description\",null),t([s()],h.prototype,\"fullExtent\",void 0),t([i(\"fullExtent\",[\"fullExtent\"])],h.prototype,\"readFullExtent\",null),t([s()],h.prototype,\"imageFormat\",null),t([s({json:{read:{source:\"formats\"}}})],h.prototype,\"imageFormats\",void 0),t([s()],h.prototype,\"id\",void 0),t([s()],h.prototype,\"layer\",void 0),t([s()],h.prototype,\"styleId\",null),t([s({type:e.ofType(n),json:{read:{source:\"styles\"}}})],h.prototype,\"styles\",void 0),t([s({value:null,json:{write:{ignoreOrigin:!0}}})],h.prototype,\"title\",null),t([s()],h.prototype,\"tileMatrixSetId\",void 0),t([s({readOnly:!0})],h.prototype,\"tileMatrixSet\",null),t([s({type:e.ofType(a),json:{read:{source:\"tileMatrixSets\"}}})],h.prototype,\"tileMatrixSets\",void 0),h=p=t([o(\"esri.layers.support.WMTSSublayer\")],h);var m=h;export default m;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import i from\"../../geometry/Extent.js\";import n from\"../../geometry/Point.js\";import{getReferenceEllipsoidFromWKID as r}from\"../../geometry/projectionEllipsoid.js\";import l from\"../../geometry/SpatialReference.js\";import o from\"../../geometry/support/WKIDUnitConversion.js\";import s from\"./TileInfo.js\";const a=90.71428571428571,c=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function u(t,i){var n,r;t=t.replace(/ows:/gi,\"\");const l=(new DOMParser).parseFromString(t,\"text/xml\").documentElement,o=new Map,s=new Map,a=f(\"Contents\",l);if(!a)throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\");const c=f(\"OperationsMetadata\",l),u=null==c?void 0:c.querySelector(\"[name='GetTile']\"),p=null==u?void 0:u.getElementsByTagName(\"Get\"),d=p&&Array.prototype.slice.call(p),g=null!=(n=(null==i||null==(r=i.url)?void 0:r.indexOf(\"https\"))>-1)&&n;let T,y,M=i.serviceMode,S=i&&i.url;if(d&&d.length&&d.some((e=>{const t=f(\"Constraint\",e);return!t||x(\"AllowedValues\",\"Value\",M,t)?(S=e.attributes[0].nodeValue,!0):(!t||x(\"AllowedValues\",\"Value\",\"RESTful\",t)||x(\"AllowedValues\",\"Value\",\"REST\",t)?y=e.attributes[0].nodeValue:t&&!x(\"AllowedValues\",\"Value\",\"KVP\",t)||(T=e.attributes[0].nodeValue),!1)})),!S)if(y)S=y,M=\"RESTful\";else if(T)S=T,M=\"KVP\";else{const e=f(\"ServiceMetadataURL\",l);S=e&&e.getAttribute(\"xlink:href\")}const V=S.indexOf(\"1.0.0/\");-1===V&&\"RESTful\"===M?S+=\"/\":V>-1&&(S=S.substring(0,V)),\"KVP\"===M&&(S+=V>-1?\"\":\"?\"),g&&(S=S.replace(/^http:/i,\"https:\"));const E=h(\"ServiceIdentification>ServiceTypeVersion\",l),b=h(\"ServiceIdentification>AccessConstraints\",l),C=m(\"Layer\",a),N=m(\"TileMatrixSet\",a);return{copyright:b,layers:C.map((e=>{const t=h(\"Identifier\",e);return o.set(t,e),w(t,e,N,g,E)})),tileUrl:S,serviceMode:M,layerMap:o,dimensionMap:s}}function p(e){return e.layers.forEach((e=>{e.tileMatrixSets.forEach((e=>{const t=e.tileInfo;96!==t.dpi&&(t.lods.forEach((i=>{i.scale=96*i.scale/t.dpi,i.resolution=A(t.spatialReference.wkid,i.scale*a/96,e.id)})),t.dpi=96)}))})),e}function d(e){return e.nodeType===Node.ELEMENT_NODE}function f(e,t){for(let i=0;i<t.childNodes.length;i++){const n=t.childNodes[i];if(d(n)&&n.nodeName===e)return n}return null}function m(e,t){const i=[];for(let n=0;n<t.childNodes.length;n++){const r=t.childNodes[n];d(r)&&r.nodeName===e&&i.push(r)}return i}function g(e,t){const i=[];for(let n=0;n<t.childNodes.length;n++){const r=t.childNodes[n];d(r)&&r.nodeName===e&&i.push(r)}return i.map((e=>e.textContent))}function h(e,t){return e.split(\">\").forEach((e=>{t&&(t=f(e,t))})),t&&t.textContent}function x(e,t,i,n){let r;return Array.prototype.slice.call(n.childNodes).some((n=>{if(n.nodeName.indexOf(e)>-1){const e=f(t,n),l=e&&e.textContent;if(l===i||i.split(\":\")&&i.split(\":\")[1]===l)return r=n,!0}return!1})),r}function w(e,t,i,n,r){const l=h(\"Abstract\",t),o=g(\"Format\",t);return{id:e,fullExtent:S(t),description:l,formats:o,styles:V(t,n),title:h(\"Title\",t),tileMatrixSets:E(r,t,i)}}function T(e,t){var i;const n=[],r=null==(i=e.layerMap)?void 0:i.get(t);if(!r)return;const l=m(\"ResourceURL\",r),o=m(\"Dimension\",r);let s,a,c,u;return o.length&&(s=h(\"Identifier\",o[0]),a=g(\"Default\",o[0])||g(\"Value\",o[0])),o.length>1&&(c=h(\"Identifier\",o[1]),u=g(\"Default\",o[1])||g(\"Value\",o[1])),e.dimensionMap.set(t,{dimensions:a,dimensions2:u}),l.forEach((e=>{let t=e.getAttribute(\"template\");if(\"tile\"===e.getAttribute(\"resourceType\")){if(s&&a.length)if(t.indexOf(\"{\"+s+\"}\")>-1)t=t.replace(\"{\"+s+\"}\",\"{dimensionValue}\");else{const e=t.toLowerCase().indexOf(\"{\"+s.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue}\"+t.substring(e+s.length+2))}if(c&&u.length)if(t.indexOf(\"{\"+c+\"}\")>-1)t=t.replace(\"{\"+c+\"}\",\"{dimensionValue2}\");else{const e=t.toLowerCase().indexOf(\"{\"+c.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue2}\"+t.substring(e+c.length+2))}n.push({template:t,format:e.getAttribute(\"format\"),resourceType:\"tile\"})}})),n}function y(e,t,i,n,r,l,o,s){const{dimensionMap:a}=e,c=T(e,t),u=a.get(t).dimensions&&a.get(t).dimensions[0],p=a.get(t).dimensions2&&a.get(t).dimensions2[0];let d=\"\";if(c&&c.length>0){let e=null;c.some((t=>t.format===n&&(e=t,!0))),e||(e=c[o%c.length]),d=e.template.replace(/\\{Style\\}/gi,r).replace(/\\{TileMatrixSet\\}/gi,i).replace(/\\{TileMatrix\\}/gi,l).replace(/\\{TileRow\\}/gi,\"\"+o).replace(/\\{TileCol\\}/gi,\"\"+s).replace(/\\{dimensionValue\\}/gi,u).replace(/\\{dimensionValue2\\}/gi,p)}return d}function M(e,t,i,n){const{dimensionMap:r}=e,l=T(e,t);let o=\"\";if(l&&l.length>0){const e=r.get(t).dimensions&&r.get(t).dimensions[0],s=r.get(t).dimensions2&&r.get(t).dimensions2[0];o=l[0].template,o.indexOf(\".xxx\")===o.length-4&&(o=o.slice(0,o.length-4)),o=o.replace(/\\{Style\\}/gi,n),o=o.replace(/\\{TileMatrixSet\\}/gi,i),o=o.replace(/\\{TileMatrix\\}/gi,\"{level}\"),o=o.replace(/\\{TileRow\\}/gi,\"{row}\"),o=o.replace(/\\{TileCol\\}/gi,\"{col}\"),o=o.replace(/\\{dimensionValue\\}/gi,e),o=o.replace(/\\{dimensionValue2\\}/gi,s)}return o}function S(e){const t=f(\"WGS84BoundingBox\",e),i=t?h(\"LowerCorner\",t).split(\" \"):[\"-180\",\"-90\"],n=t?h(\"UpperCorner\",t).split(\" \"):[\"180\",\"90\"];return{xmin:parseFloat(i[0]),ymin:parseFloat(i[1]),xmax:parseFloat(n[0]),ymax:parseFloat(n[1]),spatialReference:{wkid:4326}}}function V(e,t){return m(\"Style\",e).map((e=>{const i=f(\"LegendURL\",e),n=f(\"Keywords\",e),r=n&&g(\"Keyword\",n);let l=i&&i.getAttribute(\"xlink:href\");t&&(l=l&&l.replace(/^http:/i,\"https:\"));return{abstract:h(\"Abstract\",e),id:h(\"Identifier\",e),isDefault:\"true\"===e.getAttribute(\"isDefault\"),keywords:r,legendUrl:l,title:h(\"Title\",e)}}))}function E(e,t,i){return m(\"TileMatrixSetLink\",t).map((e=>f(\"TileMatrixSet\",e).textContent)).map((n=>b(e,n,t,i)))}function b(e,t,i,n){const r=g(\"TileMatrix\",x(\"TileMatrixSetLink\",\"TileMatrixSet\",t,i)),l=n.find((e=>{const i=f(\"Identifier\",e),n=i&&i.textContent;return!!(n===t||t.split(\":\")&&t.split(\":\")[1]===n)})),o=C(l),a=o.spatialReference,c=a.wkid,u=f(\"TileMatrix\",l),p=[parseInt(h(\"TileWidth\",u),10),parseInt(h(\"TileHeight\",u),10)],d=[];if(r.length)r.forEach(((e,i)=>{const n=x(\"TileMatrix\",\"Identifier\",e,l);d.push(L(n,c,i,t))}));else{m(\"TileMatrix\",l).forEach(((e,i)=>{d.push(L(e,c,i,t))}))}const w=N(e,l,o,p,d[0]);return{id:t,fullExtent:w.toJSON(),tileInfo:new s({dpi:96,spatialReference:a,size:p,origin:o,lods:d}).toJSON()}}function C(e){let i=h(\"SupportedCRS\",e);i&&(i=i.toLowerCase());let r=parseInt(i.split(\":\").pop(),10);900913!==r&&3857!==r||(r=102100);const o=I(i);t(o)&&(r=o);const s=new l({wkid:r}),a=h(\"TopLeftCorner\",f(\"TileMatrix\",e)).split(\" \"),c=a[0].split(\"E\").map((e=>Number(e))),u=a[1].split(\"E\").map((e=>Number(e))),p=c.length>1?c[0]*10**c[1]:c[0],d=u.length>1?u[0]*10**u[1]:u[0];return i.includes(\"epsg\")&&v(r)?new n(d,p,s):new n(p,d,s)}function N(e,t,n,r,l){const o=f(\"BoundingBox\",t);let s,a,c,u,p,d;if(o&&(s=h(\"LowerCorner\",o).split(\" \"),a=h(\"UpperCorner\",o).split(\" \")),s&&s.length>1&&a&&a.length>1)c=parseFloat(s[0]),p=parseFloat(s[1]),u=parseFloat(a[0]),d=parseFloat(a[1]);else{const e=f(\"TileMatrix\",t),i=parseFloat(h(\"MatrixWidth\",e)),o=parseFloat(h(\"MatrixHeight\",e));c=n.x,d=n.y,u=c+i*r[0]*l.resolution,p=d-o*r[1]*l.resolution}return R(e,n.spatialReference)?new i(p,c,d,u,n.spatialReference):new i(c,p,u,d,n.spatialReference)}function R(e,t){return\"1.0.0\"===e&&v(t.wkid)}function v(e){return c.some((([t,i])=>e>=t&&e<=i))}function I(e){return e.includes(\"crs84\")||e.includes(\"crs:84\")?4326:e.includes(\"crs83\")||e.includes(\"crs:83\")?4269:e.includes(\"crs27\")||e.includes(\"crs:27\")?4267:null}function L(e,t,i,n){const r=h(\"Identifier\",e),l=h(\"ScaleDenominator\",e).split(\"E\").map((e=>Number(e)));let o;o=l.length>1?l[0]*10**l[1]:l[0];const s=A(t,o,n);return o*=96/a,{level:i,levelValue:r,scale:o,resolution:s}}function A(e,t,i){let n;return n=o.hasOwnProperty(String(e))?o.values[o[e]]:\"default028mm\"===i?6370997*Math.PI/180:r(e).metersPerDegree,7*t/25e3/n}export{y as getTileUrlFromResourceUrls,M as getTileUrlTemplateFromResourceUrls,u as parseCapabilities,p as parseResourceInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../request.js\";import r from\"../core/Collection.js\";import i from\"../core/Error.js\";import s from\"../core/Handles.js\";import{clone as a}from\"../core/lang.js\";import{MultiOriginJSONMixin as o}from\"../core/MultiOriginJSONSupport.js\";import{getDeepValue as l}from\"../core/object.js\";import{throwIfAbortError as n}from\"../core/promiseUtils.js\";import{urlToObject as m}from\"../core/urlUtils.js\";import{property as c}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{reader as u}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as p}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as y}from\"../core/accessorSupport/decorators/writer.js\";import d from\"../geometry/Extent.js\";import h from\"./Layer.js\";import f from\"./WebTileLayer.js\";import{BlendLayer as v}from\"./mixins/BlendLayer.js\";import{OperationalLayer as g}from\"./mixins/OperationalLayer.js\";import{PortalLayer as L}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as w}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as I}from\"./mixins/ScaleRangeLayer.js\";import S from\"./support/TileInfo.js\";import M from\"./support/WMTSLayerInfo.js\";import P from\"./support/WMTSSublayer.js\";import{getTileUrlFromResourceUrls as T,getTileUrlTemplateFromResourceUrls as b,parseCapabilities as j,parseResourceInfo as x}from\"./support/wmtsUtils.js\";const E={\"image/png\":\".png\",\"image/png8\":\".png\",\"image/png24\":\".png\",\"image/png32\":\".png\",\"image/jpg\":\".jpg\",\"image/jpeg\":\".jpeg\",\"image/gif\":\".gif\",\"image/bmp\":\".bmp\",\"image/tiff\":\".tif\",\"image/jpgpng\":\"\",\"image/jpegpng\":\"\",\"image/unknown\":\"\"},_=new Set([\"version\",\"service\",\"request\",\"layer\",\"style\",\"format\",\"tilematrixset\",\"tilematrix\",\"tilerow\",\"tilecol\"]);let C=class extends(v(w(I(g(L(o(h))))))){constructor(...e){super(...e),this._sublayersHandles=new s,this.copyright=\"\",this.customParameters=null,this.customLayerParameters=null,this.fullExtent=null,this.operationalLayerType=\"WebTiledLayer\",this.resourceInfo=null,this.serviceMode=\"RESTful\",this.sublayers=null,this.type=\"wmts\",this.version=\"1.0.0\",this.watch(\"activeLayer\",((e,t)=>{t&&(t.layer=null),e&&(e.layer=this)}),!0),this.watch(\"sublayers\",((e,t)=>{t&&(t.forEach((e=>{e.layer=null})),this._sublayersHandles.removeAll(),this._sublayersHandles=null),e&&(e.forEach((e=>{e.layer=this})),this._sublayersHandles||(this._sublayersHandles=new s),this._sublayersHandles.add([e.on(\"after-add\",(({item:e})=>{e.layer=this})),e.on(\"after-remove\",(({item:e})=>{e.layer=null}))]))}),!0)}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}load(e){if(\"KVP\"===this.serviceMode||\"RESTful\"===this.serviceMode)return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"WMTS\"]},e).catch(n).then((()=>this._fetchService(e))).catch((e=>{throw n(e),new i(\"wmtslayer:unsupported-service-data\",\"Invalid response from the WMTS service.\",{error:e})}))),Promise.resolve(this);console.error(\"WMTS mode could only be 'KVP' or 'RESTful'\")}get activeLayer(){return this._get(\"activeLayer\")}set activeLayer(e){this._set(\"activeLayer\",e)}readActiveLayerFromService(e,t,r){let i;return this.activeLayer?t.layers.some((e=>e.id===this.activeLayer.id&&(i=e,!0))):(this.activeLayer=new P,i=t.layers[0]),this.activeLayer.read(i,r),this.activeLayer}readActiveLayerFromItemOrWebDoc(e,t){const{templateUrl:r,wmtsInfo:i}=t,s=r?this._getLowerCasedUrlParams(r):null,a=i&&i.layerIdentifier;let o=null;const l=i&&i.tileMatrixSet;l&&(Array.isArray(l)?l.length&&(o=l[0]):o=l);const n=s&&s.format,m=s&&s.style;return new P({id:a,imageFormat:n,styleId:m,tileMatrixSetId:o})}writeActiveLayer(e,t,r,i){const s=this.activeLayer;t.templateUrl=this.getUrlTemplate(s.id,s.tileMatrixSetId,s.imageFormat,s.styleId);const a=l(\"tileMatrixSet.tileInfo\",s);t.tileInfo=a?a.toJSON(i):null,t.wmtsInfo={...t.wmtsInfo,layerIdentifier:s.id,tileMatrixSet:s.tileMatrixSetId}}readCustomParameters(e,t){const r=t.wmtsInfo;return r?this._mergeParams(r.customParameters,r.url):null}get fullExtents(){const e=[];return this.activeLayer.tileMatrixSets.forEach((t=>{t.fullExtent&&e.push(t.fullExtent)})),e}readServiceMode(e,t){return t.templateUrl.indexOf(\"?\")>-1?\"KVP\":\"RESTful\"}readSublayersFromService(e,t,r){return R(t.layers,r)}get supportedSpatialReferences(){return this.activeLayer.tileMatrixSets.map((e=>e.tileInfo.spatialReference)).toArray()}get title(){var e,t;return null!=(e=null==(t=this.activeLayer)?void 0:t.title)?e:\"Layer\"}set title(e){e?this._override(\"title\",e):this._clearOverride(\"title\")}get url(){return this._get(\"url\")}set url(e){e&&\"/\"===e.substr(-1)?this._set(\"url\",e.slice(0,-1)):this._set(\"url\",e)}createWebTileLayer(e){const t=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId),r=this._getTileMatrixSetById(e.tileMatrixSetId).tileInfo,i=e.fullExtent,s=new M({layerIdentifier:e.id,tileMatrixSet:e.tileMatrixSetId,url:this.url});return this.customLayerParameters&&(s.customLayerParameters=this.customLayerParameters),this.customParameters&&(s.customParameters=this.customParameters),new f({fullExtent:i,urlTemplate:t,tileInfo:r,wmtsInfo:s})}fetchTile(e,r,i){const s=this.getTileUrl(e,r,i);return t(s,{responseType:\"image\"}).then((e=>e.data))}findSublayerById(e){return this.sublayers.find((t=>t.id===e))}getTileUrl(e,t,r){const i=this._getTileMatrixSetById(this.activeLayer.tileMatrixSetId).tileInfo.lods[e],s=i?i.levelValue?i.levelValue:`${i.level}`:`${e}`;let a=this.resourceInfo?\"\":T({dimensionMap:this.dimensionMap,layerMap:this.layerMap},this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId,s,t,r);if(!a){a=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId).replace(/\\{level\\}/gi,s).replace(/\\{row\\}/gi,`${t}`).replace(/\\{col\\}/gi,`${r}`)}return a=this._appendCustomLayerParameters(a),a}getUrlTemplate(e,t,r,i){if(!this.resourceInfo){const r=b({dimensionMap:this.dimensionMap,layerMap:this.layerMap},e,t,i);if(r)return r}if(\"KVP\"===this.serviceMode)return this.url+\"?SERVICE=WMTS&VERSION=\"+this.version+\"&REQUEST=GetTile&LAYER=\"+e+\"&STYLE=\"+i+\"&FORMAT=\"+r+\"&TILEMATRIXSET=\"+t+\"&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}\";if(\"RESTful\"===this.serviceMode){let s=\"\";return E[r.toLowerCase()]&&(s=E[r.toLowerCase()]),this.url+e+\"/\"+i+\"/\"+t+\"/{level}/{row}/{col}\"+s}return\"\"}async _fetchService(e){let t;if(this.resourceInfo)\"KVP\"===this.resourceInfo.serviceMode&&(this.url+=this.url.indexOf(\"?\")>-1?\"\":\"?\"),t={ssl:!1,data:this.resourceInfo};else try{t=await this._getCapabilities(this.serviceMode,e)}catch{const s=\"KVP\"===this.serviceMode?\"RESTful\":\"KVP\";try{t=await this._getCapabilities(s,e),this.serviceMode=s}catch(r){throw new i(\"wmtslayer:unsupported-service-data\",\"Services does not support RESTful or KVP service modes.\",{error:r})}}this.resourceInfo?t.data=x(t.data):t.data=j(t.data,{serviceMode:this.serviceMode,url:this.url}),t.data&&this.read(t.data,{origin:\"service\"})}async _getCapabilities(e,r){const i=this._getCapabilitiesUrl(e);return await t(i,{...r,responseType:\"text\"})}_getTileMatrixSetById(e){return this.findSublayerById(this.activeLayer.id).tileMatrixSets.find((t=>t.id===e))}_appendCustomParameters(e){if(this.customParameters)for(const t in this.customParameters)e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+t+\"=\"+encodeURIComponent(this.customParameters[t]);return e}_appendCustomLayerParameters(e){if(this.customLayerParameters||this.customParameters){const t={...a(this.customParameters),...this.customLayerParameters};for(const r in t)e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+r+\"=\"+encodeURIComponent(t[r])}return e}_getCapabilitiesUrl(e){let t;return this.url=this.url.split(\"?\")[0],\"KVP\"===e?t=this.url+\"?request=GetCapabilities&service=WMTS&version=\"+this.version:\"RESTful\"===e&&(t=this.url+\"/\"+this.version+\"/WMTSCapabilities.xml\"),t=this._appendCustomParameters(t),t}_getLowerCasedUrlParams(e){if(!e)return null;const t=m(e).query;if(!t)return null;const r={};return Object.keys(t).forEach((e=>{r[e.toLowerCase()]=t[e]})),r}_mergeParams(e,t){const r=this._getLowerCasedUrlParams(t);if(r){const t=Object.keys(r);t.length&&(e=e?a(e):{},t.forEach((t=>{e.hasOwnProperty(t)||_.has(t)||(e[t]=r[t])})))}return e}};function R(e,t){return e.map((e=>{const r=new P;return r.read(e,t),r}))}e([c()],C.prototype,\"dimensionMap\",void 0),e([c()],C.prototype,\"layerMap\",void 0),e([c({type:P,json:{origins:{\"web-document\":{write:{ignoreOrigin:!0}}}}})],C.prototype,\"activeLayer\",null),e([u(\"service\",\"activeLayer\",[\"layers\"])],C.prototype,\"readActiveLayerFromService\",null),e([u([\"web-document\",\"portal-item\"],\"activeLayer\",[\"wmtsInfo\"])],C.prototype,\"readActiveLayerFromItemOrWebDoc\",null),e([y([\"web-document\",\"portal-item\"],\"activeLayer\",{templateUrl:{type:String},tileInfo:{type:S},\"wmtsInfo.layerIdentifier\":{type:String},\"wmtsInfo.tileMatrixSet\":{type:String}})],C.prototype,\"writeActiveLayer\",null),e([c({type:String,value:\"\",json:{write:!0}})],C.prototype,\"copyright\",void 0),e([c({type:[\"show\",\"hide\"]})],C.prototype,\"listMode\",void 0),e([c({json:{origins:{\"web-document\":{read:{source:[\"wmtsInfo.customParameters\",\"wmtsInfo.url\"]},write:{target:\"wmtsInfo.customParameters\"}},\"portal-item\":{read:{source:[\"wmtsInfo.customParameters\",\"wmtsInfo.url\"]},write:{target:\"wmtsInfo.customParameters\"}}}}})],C.prototype,\"customParameters\",void 0),e([u(\"web-document\",\"customParameters\"),u(\"portal-item\",\"customParameters\")],C.prototype,\"readCustomParameters\",null),e([c({json:{origins:{\"web-document\":{read:{source:\"wmtsInfo.customLayerParameters\"},write:{target:\"wmtsInfo.customLayerParameters\"}},\"portal-item\":{read:{source:\"wmtsInfo.customLayerParameters\"},write:{target:\"wmtsInfo.customLayerParameters\"}}}}})],C.prototype,\"customLayerParameters\",void 0),e([c({type:d,json:{write:{ignoreOrigin:!0},origins:{\"web-document\":{read:{source:\"fullExtent\"}},\"portal-item\":{read:{source:\"fullExtent\"}}}}})],C.prototype,\"fullExtent\",void 0),e([c({readOnly:!0})],C.prototype,\"fullExtents\",null),e([c({type:[\"WebTiledLayer\"]})],C.prototype,\"operationalLayerType\",void 0),e([c()],C.prototype,\"resourceInfo\",void 0),e([c()],C.prototype,\"serviceMode\",void 0),e([u([\"portal-item\",\"web-document\"],\"serviceMode\",[\"templateUrl\"])],C.prototype,\"readServiceMode\",null),e([c({type:r.ofType(P)})],C.prototype,\"sublayers\",void 0),e([u(\"service\",\"sublayers\",[\"layers\"])],C.prototype,\"readSublayersFromService\",null),e([c({readOnly:!0})],C.prototype,\"supportedSpatialReferences\",null),e([c({json:{read:{source:\"title\"}}})],C.prototype,\"title\",null),e([c({json:{read:!1},readOnly:!0,value:\"wmts\"})],C.prototype,\"type\",void 0),e([c({json:{origins:{service:{read:{source:\"tileUrl\"}},\"web-document\":{read:{source:\"wmtsInfo.url\"},write:{target:\"wmtsInfo.url\"}},\"portal-item\":{read:{source:\"wmtsInfo.url\"},write:{target:\"wmtsInfo.url\"}}}}})],C.prototype,\"url\",null),e([c()],C.prototype,\"version\",void 0),C=e([p(\"esri.layers.WMTSLayer\")],C);var O=C;export default O;\n"],"sourceRoot":""}