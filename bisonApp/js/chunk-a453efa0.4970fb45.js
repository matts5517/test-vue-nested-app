(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a453efa0"],{"1f69":function(e,t,n){"use strict";n.r(t);var r=n("a4ee"),o=(n("e06a"),n("4856")),i=(n("b423"),n("261a"),n("b48d"),n("478c"),n("667b"),n("ff57"),n("da00"),n("f976"),n("5cdb")),s=n("e694"),a=n("59b2"),c=(n("c120"),n("cea0"),n("e92d"),n("d386")),u=n("74e2"),l=n("a6a3"),p=n("ce50"),d=n("6d5f"),f=n("b2b2"),y=n("7f83"),b=n("7e5e"),m=n("5996");const g="http://www.opengis.net/def/crs/OGC/1.3/CRS84";let h=class extends d["a"]{constructor(){super(...arguments),this.featureDefinition=null,this.type="ogc-feature"}load(e){return this.addResolvingPromise(this._loadOGCServices(this.layer,e)),this.when()}getFeatureDefinition(){const{featureDefinition:{collection:e,layerDefinition:t,spatialReference:n,supportedCrs:r},layer:{apiKey:o,capabilities:i,customParameters:s}}=this;return{capabilities:i,collection:e,layerDefinition:t,queryParameters:{apiKey:o,customParameters:s},spatialReference:n,supportedCrs:r}}queryExtent(e,t={}){return null}queryFeatureCount(e,t={}){return null}queryFeatures(e,t={}){const n=this.getFeatureDefinition();return this.load(t).then(()=>Object(b["g"])(n,e,t))}queryFeaturesJSON(e,t={}){const n=this.getFeatureDefinition();return this.load(t).then(()=>Object(b["h"])(n,e,t))}queryObjectIds(e,t={}){return null}supportsSpatialReference(e){return!(!e.isWGS84&&!e.isWebMercator)||this.featureDefinition.supportedCrs.some(t=>{const n=Object(b["f"])(t);return!Object(f["h"])(n)&&Object(y["c"])(n,e)})}_conformsToType(e,t){var n;const r=new RegExp(`^${t}$`,"i");return null!=(n=e.conformsTo.some(e=>r.test(e)))&&n}_getCapabilities(e,t){var n,r,o,i,s,a,c;const u=Object(f["i"])(t)?null==(n=t.components)?void 0:n.parameters:null;return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},query:{maxRecordCount:null!=(r=null!=(o=null==u||null==(i=u.limit)||null==(s=i.schema)?void 0:s.maximum)?o:null==u||null==(a=u.limitFeatures)||null==(c=a.schema)?void 0:c.maximum)?r:5e3,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,supportsSqlExpression:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1}}}_getExtent(e){var t;const n=null==(t=e.extent)?void 0:t.spatial;if(!n)return null;const r=n.bbox[0],o=4===r.length,i=r[0],s=r[1],a=o?void 0:r[2];return{xmin:i,ymin:s,xmax:o?r[2]:r[3],ymax:o?r[3]:r[4],zmin:a,zmax:o?void 0:r[5],spatialReference:m["a"].WGS84.toJSON()}}_getSpatialReference(e){var t;const n=null!=(t=e.storageCrs)?t:g,r=Object(b["f"])(n);return Object(f["h"])(r)?m["a"].WGS84:r}_getSupportedSpatialReferences(e,t){var n;const r="#/crs",o=null!=(n=e.crs)?n:[g],i=o.includes(r)?o.filter(e=>e!==r).concat(t.crs):o,s=/^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;return i.filter(e=>!s.test(e))}async _loadOGCServices(e,t){const n=Object(f["i"])(t)?t.signal:null,{apiKey:r,collectionId:o,customParameters:i,fields:s,geometryType:a,hasZ:c,objectIdField:l,timeInfo:d,url:y}=e,m={fields:null==s?void 0:s.map(e=>e.toJSON()),geometryType:u["c"].toJSON(a),hasZ:c,objectIdField:l,timeInfo:null==d?void 0:d.toJSON()},g={apiKey:r,customParameters:i,signal:n},h=await Object(b["d"])(y,g),[j,O]=await Promise.all([Object(b["c"])(h,g),Object(b["b"])(h,g)]);if(!this._conformsToType(j,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson"))throw new p["a"]("ogc-feature-layer:no-geojson-support","Server does not support geojson");const w=O.collections.find(e=>e.id===o);if(!w)throw new p["a"]("ogc-feature-layer:collection-not-found","Server does not contain the named collection");const v=this._conformsToType(j,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30")?await Object(b["e"])(h,g):null,F=await Object(b["a"])(w,m,g),S=this._getCapabilities(F.hasZ,v),I=this._getExtent(w),x=this._getSpatialReference(w).toJSON(),T=this._getSupportedSpatialReferences(w,O);F.extent=I,this.featureDefinition={capabilities:S,collection:w,layerDefinition:F,queryParameters:{},spatialReference:x,supportedCrs:T}}};Object(r["a"])([Object(a["b"])()],h.prototype,"featureDefinition",void 0),Object(r["a"])([Object(a["b"])({constructOnly:!0})],h.prototype,"layer",void 0),Object(r["a"])([Object(a["b"])()],h.prototype,"type",void 0),h=Object(r["a"])([Object(c["a"])("esri.layers.graphics.sources.OGCFeatureSource")],h);var j=h,O=j,w=n("f46e"),v=n("997b"),F=n("8b28"),S=n("b911"),I=n("0db5"),x=n("8e17"),T=n("5a62"),P=n("601a"),R=n("22f4"),C=n("ecc1"),D=n("a3da"),k=n("91b0"),M=n("a2b1"),G=n("a1f3"),E=n("2feb"),N=n("c1da"),q=n("c246"),_=n("10eb"),L=n("69dd"),A=n("f51b"),B=n("fd14"),Q=n("3af1");const W=Object(E["a"])();let $=class extends(Object(w["a"])(Object(F["a"])(Object(v["a"])(Object(P["a"])(Object(T["a"])(Object(S["a"])(Object(I["a"])(Object(x["a"])(Object(s["a"])(l["a"])))))))))){constructor(e){super(e),this.collectionId=null,this.copyright=null,this.definitionExpression=null,this.description=null,this.displayField=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="OGCFeatureLayer",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new O({layer:this}),this.spatialReference=null,this.title=null,this.type="ogc-feature",this.typeIdField=null,this.types=null,this.url=null}destroy(){var e;null==(e=this.source)||e.destroy()}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["OGCFeatureServer"]},e).then(()=>this._fetchService(e))),this.when()}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){Object(N["j"])(e,this.fieldsIndex),this._set("renderer",e)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return Object(A["a"])(this,e)}createQuery(){return new L["a"]}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){var n;let r,o=!1;const i=null==t||null==(n=t.feature)?void 0:n.attributes,s=this.typeIdField&&(null==i?void 0:i[this.typeIdField]);return null!=s&&this.types&&(o=this.types.some(t=>{var n,o;return t.id==s&&(r=null==(n=t.domains)?void 0:n[e],"inherited"===(null==(o=r)?void 0:o.type)&&(r=this._getLayerDomain(e)),!0)})),o||r||(r=this._getLayerDomain(e)),r}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(L["a"].from(e)||this.createQuery(),t)).then(e=>{var t;return null==e||null==(t=e.features)||t.forEach(e=>{e.layer=e.sourceLayer=this}),e})}async _fetchService(e){await this.source.load(e),this.read(this.source.featureDefinition,{origin:"service"}),Object(N["j"])(this.renderer,this.fieldsIndex),Object(N["k"])(this.timeInfo,this.fieldsIndex)}_getLayerDomain(e){if(!this.fields)return null;for(const t of this.fields)if(t.name===e&&t.domain)return t.domain;return null}};Object(r["a"])([Object(a["b"])({readOnly:!0,json:{origins:{service:{read:!0}}}})],$.prototype,"capabilities",void 0),Object(r["a"])([Object(a["b"])({type:String,json:{write:!0}})],$.prototype,"collectionId",void 0),Object(r["a"])([Object(a["b"])({type:String})],$.prototype,"copyright",void 0),Object(r["a"])([Object(a["b"])({readOnly:!0})],$.prototype,"defaultPopupTemplate",null),Object(r["a"])([Object(a["b"])({type:String})],$.prototype,"definitionExpression",void 0),Object(r["a"])([Object(a["b"])({readOnly:!0,type:String,json:{origins:{service:{read:{source:"collection.description"}}}}})],$.prototype,"description",void 0),Object(r["a"])([Object(a["b"])({type:String})],$.prototype,"displayField",void 0),Object(r["a"])([Object(a["b"])({type:B["a"]})],$.prototype,"elevationInfo",void 0),Object(r["a"])([Object(a["b"])({types:{key:"type",base:C["a"],typeMap:{selection:k["a"],cluster:D["a"]}}})],$.prototype,"featureReduction",void 0),Object(r["a"])([Object(a["b"])({type:[G["a"]],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],$.prototype,"fields",void 0),Object(r["a"])([Object(a["b"])(W.fieldsIndex)],$.prototype,"fieldsIndex",void 0),Object(r["a"])([Object(a["b"])({readOnly:!0,type:Q["a"],json:{origins:{service:{read:{source:"layerDefinition.extent"}}}}})],$.prototype,"fullExtent",void 0),Object(r["a"])([Object(a["b"])({type:u["a"].apiValues,json:{origins:{service:{read:{source:"layerDefinition.geometryType",reader:u["a"].read}}}}})],$.prototype,"geometryType",void 0),Object(r["a"])([Object(a["b"])({type:Boolean,json:{origins:{service:{read:{source:"layerDefinition.hasZ"}}}}})],$.prototype,"hasZ",void 0),Object(r["a"])([Object(a["b"])({type:[q["a"]],json:{origins:{"web-map":{read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:_["a"]},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}}}})],$.prototype,"labelingInfo",void 0),Object(r["a"])([Object(a["b"])(R["d"])],$.prototype,"labelsVisible",void 0),Object(r["a"])([Object(a["b"])(R["e"])],$.prototype,"legendEnabled",void 0),Object(r["a"])([Object(a["b"])({type:String,json:{origins:{service:{read:{source:"layerDefinition.objectIdField"}}}}})],$.prototype,"objectIdField",void 0),Object(r["a"])([Object(a["b"])({type:["OGCFeatureLayer"]})],$.prototype,"operationalLayerType",void 0),Object(r["a"])([Object(a["b"])(R["j"])],$.prototype,"popupEnabled",void 0),Object(r["a"])([Object(a["b"])({type:o["a"],json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],$.prototype,"popupTemplate",void 0),Object(r["a"])([Object(a["b"])({types:i["a"],json:{origins:{service:{read:{source:"layerDefinition.drawingInfo.renderer"},write:!1}},read:{source:"layerDefinition.drawingInfo.renderer"},write:{target:"layerDefinition.drawingInfo.renderer"}}})],$.prototype,"renderer",null),Object(r["a"])([Object(a["b"])({type:Boolean})],$.prototype,"screenSizePerspectiveEnabled",void 0),Object(r["a"])([Object(a["b"])({readOnly:!0})],$.prototype,"source",void 0),Object(r["a"])([Object(a["b"])({readOnly:!0,type:m["a"],json:{origins:{service:{read:!0}}}})],$.prototype,"spatialReference",void 0),Object(r["a"])([Object(a["b"])({type:String,json:{origins:{service:{read:{source:"collection.title"}},"web-map":{write:{ignoreOrigin:!0}}}}})],$.prototype,"title",void 0),Object(r["a"])([Object(a["b"])({readOnly:!0,json:{read:!1}})],$.prototype,"type",void 0),Object(r["a"])([Object(a["b"])({type:String,readOnly:!0})],$.prototype,"typeIdField",void 0),Object(r["a"])([Object(a["b"])({type:[M["a"]]})],$.prototype,"types",void 0),Object(r["a"])([Object(a["b"])({type:String,json:{write:!0}})],$.prototype,"url",void 0),$=Object(r["a"])([Object(c["a"])("esri.layers.OGCFeatureLayer")],$);var Z=$;t["default"]=Z},"7e5e":function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return F})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return I})),n.d(t,"h",(function(){return x})),n.d(t,"i",(function(){return T}));var r=n("8201"),o=(n("e06a"),n("2eab")),i=n("ce50"),s=n("e92d"),a=n("b2b2"),c=n("7f83"),u=n("9786"),l=n("6655"),p=n("eed5"),d=n("e3a3"),f=n("88d1"),y=n("80b7"),b=n("6781"),m=n("2edc"),g=n("5996");const h=s["a"].getLogger("esri.layers.graphics.sources.ogcfeature");async function j(e,t,n={},r=5){const{links:s}=e,c=G(s,"items","application/geo+json")||G(s,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if(Object(a["h"])(c))throw new i["a"]("ogc-feature-layer:missing-items-page","Missing items url");const{data:u}=await Object(o["default"])(c.href,{signal:n.signal,query:{limit:r,...n.customParameters,token:n.apiKey},headers:{accept:"application/geo+json"}});await Object(d["d"])(u);const l=Object(d["c"])(u,{geometryType:t.geometryType}),p=t.fields||l.fields||[],m=null!=t.hasZ?t.hasZ:l.hasZ,g=l.geometryType,j=t.objectIdField||l.objectIdFieldName||"OBJECTID";let O=t.timeInfo;const w=p.find(e=>e.name===j);if(w)w.type="esriFieldTypeOID",w.editable=!1,w.nullable=!1;else{if(!l.objectIdFieldType)throw new i["a"]("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");p.unshift({name:j,alias:j,type:"esriFieldTypeOID",editable:!1,nullable:!1})}if(j!==l.objectIdFieldName){const e=p.find(e=>e.name===l.objectIdFieldName);e&&(e.type="esriFieldTypeInteger")}if(!g)throw new i["a"]("ogc-feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");p===l.fields&&l.unknownFields.length>0&&h.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:l.unknownFields}});for(const o of p){if(null==o.name&&(o.name=o.alias),null==o.alias&&(o.alias=o.name),"esriFieldTypeOID"!==o.type&&"esriFieldTypeGlobalID"!==o.type&&(o.editable=null==o.editable||!!o.editable,o.nullable=null==o.nullable||!!o.nullable),!o.name)throw new i["a"]("ogc-feature-layer:invalid-field-name","field name is missing",{field:o});if(-1===b["a"].jsonValues.indexOf(o.type))throw new i["a"]("ogc-feature-layer:invalid-field-type",`invalid type for field "${o.name}"`,{field:o})}if(O){const e=new y["a"](p);if(O.startTimeField){const t=e.get(O.startTimeField);t?(O.startTimeField=t.name,t.type="esriFieldTypeDate"):O.startTimeField=null}if(O.endTimeField){const t=e.get(O.endTimeField);t?(O.endTimeField=t.name,t.type="esriFieldTypeDate"):O.endTimeField=null}if(O.trackIdField){const t=e.get(O.trackIdField);t?O.trackIdField=t.name:(O.trackIdField=null,h.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:O}}))}O.startTimeField||O.endTimeField||(h.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:O}}),O=null)}return{drawingInfo:Object(f["d"])(g),geometryType:g,fields:p,hasZ:!!m,objectIdField:j,timeInfo:O}}async function O(e,t={}){const{links:n}=e,r=G(n,"data","application/json")||G(n,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if(Object(a["h"])(r))throw new i["a"]("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:s,customParameters:c,signal:u}=t,{data:l}=await Object(o["default"])(r.href,{signal:u,headers:{accept:"application/json"},query:{...c,token:s}});return l}async function w(e,t={}){const{links:n}=e,r=G(n,"conformance","application/json")||G(n,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if(Object(a["h"])(r))throw new i["a"]("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:s,customParameters:c,signal:u}=t,{data:l}=await Object(o["default"])(r.href,{signal:u,headers:{accept:"application/json"},query:{...c,token:s}});return l}async function v(e,t={}){const{apiKey:n,customParameters:r,signal:i}=t,{data:s}=await Object(o["default"])(e,{signal:i,headers:{accept:"application/json"},query:{...r,token:n}});return s}async function F(e,t={}){const n="application/vnd.oai.openapi+json;version=3.0",r=G(e.links,"service-desc",n);if(Object(a["h"])(r))return h.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:i,customParameters:s,signal:c}=t,{data:u}=await Object(o["default"])(r.href,{signal:c,headers:{accept:n},query:{...s,token:i}});return u}function S(e){const t=Object(r["a"])(/^http:\/\/www\.opengis.net\/def\/crs\/(.*)\/(.*)\/(.*)$/i,{authority:1,version:2,code:3}).exec(e),n=null==t?void 0:t.groups;if(!n)return null;const{authority:o,code:i}=n;switch(o.toLowerCase()){case"ogc":switch(i.toLowerCase()){case"crs27":return g["a"].GCS_NAD_1927;case"crs83":return new g["a"]({wkid:4269});case"crs84":case"crs84h":return g["a"].WGS84;default:return null}case"esri":case"epsg":{const e=Number.parseInt(i,10);return Number.isNaN(e)?null:900913===e?g["a"].WebMercator:new g["a"]({wkid:e})}default:return null}}async function I(e,t,n){const r=await x(e,t,n);return m["default"].fromJSON(r)}async function x(e,t,n){const r=await T(e,t,n);return Object(l["j"])(r)}async function T(e,t,n){const{capabilities:{query:{maxRecordCount:r}},collection:s,layerDefinition:f,queryParameters:{apiKey:y,customParameters:b},spatialReference:m,supportedCrs:h}=e,{links:j}=s,O=G(j,"items","application/geo+json")||G(j,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if(Object(a["h"])(O))throw new i["a"]("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:w,num:v,start:F,timeExtent:S,where:I}=t;if(t.objectIds)throw new i["a"]("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const x=g["a"].fromJSON(m),T=Object(a["q"])(t.outSpatialReference,x),P=T.isWGS84?null:R(T,h),C=M(w,h),E=D(S),N=k(I),q=null!=v?v:null!=F&&void 0!==F?10:r,{data:_}=await Object(o["default"])(O.href,{...n,query:{...b,...C,crs:P,datetime:E,query:N,limit:q,startindex:F,token:y},headers:{accept:"application/geo+json"}});let L=!1;_.links&&(L=!!_.links.find(e=>"next"===e.rel)),!L&&Number.isInteger(_.numberMatched)&&Number.isInteger(_.numberReturned)&&(L=_.numberReturned<_.numberMatched);const{fields:A,globalIdField:B,hasM:Q,hasZ:W,objectIdField:$}=f,Z=f.geometryType,J=Object(d["a"])(_,{geometryType:Z,hasZ:W,objectIdField:$});if(!P&&T.isWebMercator)for(const o of J)if(o.geometry){const e=Object(l["k"])(o.geometry,Z,W,!1);e.spatialReference=g["a"].WGS84,o.geometry=Object(l["d"])(Object(u["d"])(e,T))}for(const o of J)o.objectId=o.attributes[$];const z=P||!P&&T.isWebMercator?T.toJSON():c["a"],U=new p["a"];return U.exceededTransferLimit=L,U.features=J,U.fields=A,U.geometryType=Z,U.globalIdFieldName=B,U.hasM=Q,U.hasZ=W,U.objectIdFieldName=$,U.spatialReference=z,U}function P(e){return Object(a["i"])(e)&&"extent"===e.type}function R(e,t){return t.find(t=>{const n=S(t);return Object(c["c"])(n,e)})}function C(e){const{xmin:t,ymin:n,xmax:r,ymax:o}=e;return`${t},${n},${r},${o}`}function D(e){if(Object(a["h"])(e))return null;const{start:t,end:n}=e;return`${Object(a["i"])(t)?t.toISOString():".."}/${Object(a["i"])(n)?n.toISOString():".."}`}function k(e){return Object(a["h"])(e)||!e||"1=1"===e?null:e}function M(e,t){if(!P(e))return null;const{spatialReference:n}=e;if(!n||n.isWGS84)return{bbox:C(e)};const r=R(n,t);return r?{bbox:C(e),"bbox-crs":r}:n.isWebMercator?{bbox:C(Object(u["d"])(e,g["a"].WGS84))}:null}function G(e,t,n){return e.find(e=>e.rel===t&&e.type===n)||e.find(e=>e.rel===t&&!e.type)}},8201:function(e,t,n){"use strict";function r(){r=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,o){var s=new RegExp(e,r);return t.set(s,o||t.get(e)),i(s,n.prototype)}function s(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){return t[n]=e[r[n]],t}),Object.create(null))}return o(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);return n&&(n.groups=s(n,this)),n},n.prototype[Symbol.replace]=function(n,r){if("string"==typeof r){var o=t.get(this);return e[Symbol.replace].call(this,n,r.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+o[t]})))}if("function"==typeof r){var i=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(s(e,i)),r.apply(this,e)}))}return e[Symbol.replace].call(this,n,r)},r.apply(this,arguments)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return r}))},"88d1":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return a}));var r=n("c120"),o=n("7ffa"),i=n("a94c"),s=n("8246");function a(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?s["a"]:"esriGeometryPolyline"===e?s["c"]:s["b"]}}}function c(e,t){if(Object(r["a"])("csp-restrictions"))return()=>({[t]:null,...e});try{let n=`this.${t} = null;`;for(const t in e)n+=`this${t.indexOf(".")?`["${t}"]`:"."+t} = ${JSON.stringify(e[t])};`;const r=new Function(n);return()=>new r}catch(n){return()=>({[t]:null,...e})}}function u(e={}){return[{name:"New Feature",description:"",prototype:{attributes:Object(o["a"])(e)}}]}function l(e,t){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:i["a"],queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},a94c:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},e3a3:function(e,t,n){"use strict";n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return C})),n.d(t,"d",(function(){return R}));var r=n("ce50"),o=n("9392"),i=n("8152");const s={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function a(e){return s[e]}function*c(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*u(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const e of t)yield*e}}function*l(e,t={}){const{geometryType:n,objectIdField:r}=t;for(const c of e){var s;const{geometry:e,properties:u,id:l}=c;if(e&&a(e.type)!==n)continue;const p=u||{};let d=null!=(s=p[r])?s:null;r&&null!=l&&!p[r]&&(p[r]=d=l);const f=new o["a"](e?m(new i["a"],e,t):null,p,null,d);yield f}}function p(e){for(const t of e)if(t.length>2)return!0;return!1}function d(e){return!y(e)}function f(e){return y(e)}function y(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n],o=e[(n+1)%e.length];t+=r[0]*o[1]-o[0]*r[1]}return t<=0}function b(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function m(e,t,n){switch(t.type){case"LineString":return g(e,t,n);case"MultiLineString":return h(e,t,n);case"MultiPoint":return j(e,t,n);case"MultiPolygon":return O(e,t,n);case"Point":return w(e,t,n);case"Polygon":return v(e,t,n)}}function g(e,t,n){return I(e,t.coordinates,n),e}function h(e,t,n){for(const r of t.coordinates)I(e,r,n);return e}function j(e,t,n){return I(e,t.coordinates,n),e}function O(e,t,n){for(const r of t.coordinates){F(e,r[0],n);for(let t=1;t<r.length;t++)S(e,r[t],n)}return e}function w(e,t,n){return T(e,t.coordinates,n),e}function v(e,t,n){const r=t.coordinates;F(e,r[0],n);for(let o=1;o<r.length;o++)S(e,r[o],n);return e}function F(e,t,n){const r=b(t);d(r)?x(e,r,n):I(e,r,n)}function S(e,t,n){const r=b(t);f(r)?x(e,r,n):I(e,r,n)}function I(e,t,n){for(const r of t)T(e,r,n);e.lengths.push(t.length)}function x(e,t,n){for(let r=t.length-1;r>=0;r--)T(e,t[r],n);e.lengths.push(t.length)}function T(e,t,n){const[r,o,i]=t;e.coords.push(r,o),n.hasZ&&e.coords.push(i||0)}function P(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function R(e){if(!e)throw new r["a"]("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new r["a"]("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,o=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!o.test(n))throw new r["a"]("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function C(e,t={}){const n=[],r=new Set,o=new Set;let i,s=!1,l=Number.NEGATIVE_INFINITY,d=null,f=!1,{geometryType:y=null}=t,b=!1;for(const g of c(e)){const{geometry:e,properties:t,id:c}=g;if((!e||(y||(y=a(e.type)),a(e.type)===y))&&(s||(s=p(u(e))),f||(f=null!=c,f&&(i=typeof c,"number"===i&&(d=Object.keys(t).filter(e=>t[e]===c)))),f&&"number"===i&&null!=c&&(l=Math.max(l,c),d.length>1?d=d.filter(e=>t[e]===c):1===d.length&&(d=t[d[0]]===c?d:[])),!b&&t)){let e=!0;for(const i in t){if(r.has(i))continue;const s=t[i];if(null==s){e=!1,o.add(i);continue}const a=P(s);"unknown"!==a?(o.delete(i),r.add(i),n.push({name:i,alias:i,type:a})):o.add(i)}b=e}}const m=d&&1===d.length&&d[0]||null;if(m)for(const a of n)a.name===m&&(a.type="esriFieldTypeOID");return{fields:n,geometryType:y,hasZ:s,maxObjectId:Math.max(0,l),objectIdFieldName:m,objectIdFieldType:i,unknownFields:Array.from(o)}}function D(e,t){return Array.from(l(c(e),t))}}}]);
//# sourceMappingURL=chunk-a453efa0.4970fb45.js.map