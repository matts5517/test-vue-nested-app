{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/AggregateGraphic.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","webpack:///./node_modules/@arcgis/core/views/2d/tiling/TileManager.js","webpack:///./node_modules/@arcgis/core/views/layers/support/FeatureEffect.js","webpack:///./node_modules/@arcgis/core/views/layers/FeatureLayerView.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js","webpack:///./node_modules/@arcgis/core/views/layers/support/FeatureFilter.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","webpack:///./node_modules/@arcgis/core/views/layers/LayerView.js","webpack:///./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","webpack:///./node_modules/@arcgis/core/views/layers/support/ClipArea.js","webpack:///./node_modules/@arcgis/core/views/layers/support/ClipRect.js","webpack:///./node_modules/@arcgis/core/views/layers/support/Geometry.js","webpack:///./node_modules/@arcgis/core/views/layers/support/Path.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","webpack:///./node_modules/@arcgis/core/views/layers/support/popupUtils.js","webpack:///./node_modules/@arcgis/core/views/support/drapedUtils.js"],"names":["super","arguments","this","isAggregate","e","popupTemplate","r","sourceLayer","featureReduction","popupEnabled","objectId","cloneProperties","type","Boolean","prototype","Number","json","read","async","a","some","globalId","filter","error","map","s","Set","t","values","add","delete","_hasGlobalIds","_queueProcessor","concurrency","process","clear","length","last","push","finally","notifyChange","popLast","o","_mergeEdits","addedFeatures","deletedFeatures","u","updatedFeatures","c","edits","addOrModified","removed","p","l","f","h","Array","from","readOnly","isArray","_startupResolver","isReady","_controller","addResolvingPromise","_startWorker","signal","abort","_connection","close","client","tileRenderer","closed","when","i","source","transferList","n","service","config","tileInfo","toJSON","tiles","invoke","resolve","_set","promise","query","params","name","value","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","forEach","_releaseTile","getTileCoverage","state","spans","lodInfo","level","d","row","colFrom","colTo","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","visible","key","_addPlaceholders","has","id","pool","release","hasMissingTiles","size","added","set","get","_addPlaceholderChildren","Math","abs","_addPlaceholderParent","_getTile","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","includedEffect","excludedEffect","excludedLabelsVisible","clone","write","I","getLogger","R","_updatingRequiredFieldsPromise","effect","timeExtent","layer","requiredFields","view","_handleRequiredFieldsChange","fieldsIndex","outFields","Error","returnGeometry","outSpatialReference","spatialReference","createQuery","intersection","_updateRequiredFields","then","objectIdField","renderer","collectRequiredFields","timeInfo","startField","endField","floorInfo","floorField","subtypeField","sublayers","Promise","all","displayField","sort","clientGraphics","createPopupQuery","_loadArcadeModules","arcadeUtils","hasGeometryOperations","objectIds","attributes","queryFeatures","concat","features","catch","geometryType","returnZ","returnM","canResume","isEmpty","D","B","K","W","X","Y","_pipelineIsUpdating","_commandsQueue","_doEdit","_doRefresh","_doUpdate","_visibilityOverrides","_effect","_highlightIds","_lastPixelBuffer","_updateHighlight","_proxy","setHighlight","keys","_uploadsLocked","_needsClusterSizeUpdate","effectLists","included","excluded","_updateClusterSizeTask","remove","destroy","_initProxy","_initServiceOptions","handles","on","valueRanges","isTable","_createClientOptions","_createServiceOptions","items","suspended","labelingInfo","labelsVisible","enabled","enable","_serviceOptions","availableFields","floors","definitionExpression","gdbVersion","historicMoment","getTime","JSON","stringify","geometryDefinition","clips","reduce","sublayerHash","filterHash","effectHash","streamFilter","clipsHash","hasEffects","getObjectId","isCollection","getAttribute","toArray","_addHighlight","_removeHighlight","_hitTest","queryStatistics","valueExpression","viewInfoParams","viewingMode","scale","querySummaryStatistics","_cleanUpQuery","queryFeaturesJSON","fromJSON","_setLayersForFeature","queryObjectIds","queryFeatureCount","queryExtent","count","extent","_update","_tileStrategy","update","updateTiles","requestUpdate","timeline","record","title","_acquireTile","featuresTilingScheme","_edit","container","removeAllChildren","uninstall","_tileRendererHash","popup","defaultPopupTemplateEnabled","validateFetchPopupFeatures","fetchClientPopupFeatures","_fetchServicePopupFeatures","event","geometry","createFetchPopupFeaturesQueryGeometry","updating","console","log","setUpdating","emitEvent","emit","path","capabilities","operations","supportsEditing","mode","featureCount","fullExtent","width","height","warn","fields","customParameters","token","apiKey","globalIdField","getFeatureDefinition","openPorts","parsedUrl","dynamicDataSource","y","_detectQueryMode","maxRecordCount","tileMaxRecordCount","_validateEdit","includes","destroyed","_hasRequiredSupport","_getEffectiveRenderer","_createSchemaConfig","_createConfiguration","max","schema","pixelBuffer","_createTileRendererHash","_initTileRenderer","effects","onConfigUpdate","tileKeys","startup","hasHighlight","_onceTilesUpdated","mesh","targets","aggregate","_lockGPUUploads","applyUpdate","_unlockGPUUploads","_updateClusterSizeVariable","_forceAttributeTextureUpload","invalidateLabels","onEdits","refresh","_effectiveRenderer","watch","_updateClusterEffectiveRendererSizeVariable","dynamicClusterSize","visualVariables","field","indexOf","_aggregateValueRanges","_createUpdateClusterSizeTask","aggregateFields","once","layerView","install","getAttributeHash","where","_addFloorFilterClause","hiddenIds","viewAllLevelIds","replace","join","RegExp","trim","_injectOverrides","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","hitTest","getFeature","_createHittestResult","getAggregate","referenceId","Z","m","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","spatialRelationship","distance","units","String","types","reader","target","writer","overridePolicy","minDataValue","maxDataValue","minSize","maxSize","SIZE_MINMAX_VALUE","expression","stops","SIZE_SCALE_STOPS","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","EventedMixin","parent","declaredClass","getSuspendInfo","legendEnabled","updatingHandles","isUpdating","_override","_clearOverride","suspendInfo","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","xoffset","yoffset","floor","pointerType","symbol","uniqueValueInfos","classBreakInfos","left","right","top","bottom","_get","base","typeMap","polygon","ofType","rect","moving","attached","lastUpdateId","updateRequested","fadeTransitionEnabled","opacity","blendMode","whenLayerView","attach","detach","minScale","maxScale","isFulfilled","isResolved","isVisibleAtScale","getRequiredFields","lastEditInfoEnabled","typeIdField","relationships","keyField","defaultPopupTemplate","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","x","xmin","min","ymin","xmax","ymax"],"mappings":"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","file":"js/chunk-5994409a.2d967386.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import r from\"./Graphic.js\";import{property as t}from\"./core/accessorSupport/decorators/property.js\";import\"./core/has.js\";import\"./core/accessorSupport/ensureType.js\";import\"./core/Logger.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";var p;let s=p=class extends r{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([t({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([t({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);var c=s;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{QueueProcessor as o}from\"../../../support/QueueProcessor.js\";function d(e){return e.some((e=>e.globalId))}function n(e){return e.filter((e=>!e.error)).map((e=>{var r;return null!=(r=e.objectId)?r:e.globalId}))}function a(e,r){const s=new Set(e);for(const t of r.values())s.add(t);return s}function i(e,r){const s=new Set(e);for(const t of r.values())s.delete(t);return s}let u=class extends r{constructor(e){super(),this._hasGlobalIds=!1,this._queueProcessor=new o({concurrency:1,process:e.process})}destroy(){this._queueProcessor.clear()}get updating(){return this._queueProcessor.length>0}push(e){const r=this._queueProcessor,s=r.last();switch(e.type){case\"update\":case\"refresh\":if((null==s?void 0:s.type)===e.type)return;r.push(e).finally((()=>this.notifyChange(\"updating\")));break;case\"edit\":{const t=\"processed-edit\"===(null==s?void 0:s.type)?s:null;t&&r.popLast();const o=this._mergeEdits(t,e);for(const e of o)r.push(e).finally((()=>this.notifyChange(\"updating\")));break}}this.notifyChange(\"updating\")}_mergeEdits(e,r){var s,t;const{addedFeatures:o,deletedFeatures:u,updatedFeatures:c}=r.edits;if(this._hasGlobalIds=this._hasGlobalIds||d(o)||d(c)||d(u),this._hasGlobalIds){return[e,{type:\"processed-edit\",edits:{addOrModified:[...o,...c],removed:u}}]}const p=new Set(n(null!=(s=null==e?void 0:e.edits.addOrModified)?s:[])),l=new Set(n(null!=(t=null==e?void 0:e.edits.removed)?t:[])),f=new Set([...n(o),...n(c)]),h=new Set(n(u));return[{type:\"processed-edit\",edits:{addOrModified:Array.from(a(i(p,h),f)).map((e=>({objectId:e}))),removed:Array.from(a(i(l,f),h)).map((e=>({objectId:e})))}}]}};e([s({readOnly:!0})],u.prototype,\"updating\",null),u=e([t(\"esri.views.2d.layers.support.FeatureCommandQueue\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{EsriPromise as e}from\"../../../../core/Promise.js\";import{createResolver as r,createAbortController as s,ignoreAbortErrors as o,throwIfNotAbortError as i}from\"../../../../core/promiseUtils.js\";import{open as n}from\"../../../../core/workers/workers.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";function l(t){return Array.isArray(t)}let u=class extends e{constructor(t){super(t),this._startupResolver=r(),this.isReady=!1}initialize(){this._controller=s(),this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(t){this.client.tileRenderer=t}get closed(){return this._connection.closed}async startup(t,e,r,s){await this.when();const o=this._controller.signal,i=l(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:e,tileInfo:t.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(t){return await this._startupResolver.promise,o(this._connection.invoke(\"updateTiles\",t))}async update(t){const e={config:t};return await this._startupResolver.promise,this._connection.invoke(\"update\",e)}async applyUpdate(t){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",t)}async setHighlight(t){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.setHighlight\",t))}async refresh(){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.refresh\"))}async querySummaryStatistics(t,e,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.querySummaryStatistics\",{query:t.toJSON(),params:e},r)}async queryFeatures(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",t.toJSON(),e)}async queryObjectIds(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",t.toJSON(),e)}async queryFeatureCount(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",t.toJSON(),e)}async queryExtent(t,e){return this._connection.invoke(\"controller.queryExtent\",t.toJSON(),e)}async queryLatestObservations(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",t.toJSON(),e)}async queryStatistics(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",t)}async getObjectId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",t)}async getDisplayId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",t)}async getFeature(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeature\",t)}async getAggregate(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregate\",t)}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",t)}async onEdits(t){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.onEdits\",t))}async enableEvent(t,e){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.enableEvent\",{name:t,value:e}))}async _startWorker(t){try{this._connection=await n(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:t})}catch(e){i(e)}}};t([a()],u.prototype,\"isReady\",void 0),t([a()],u.prototype,\"client\",void 0),t([a()],u.prototype,\"tileRenderer\",null),u=t([c(\"esri.views.2d.layers.support.FeatureLayerProxy\")],u);var p=u;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileCoverage.js\";import t from\"./TileKey.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:i,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=t.getId(a,i,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),i.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,i){if(!this._tiles.has(i)){const l=this.acquireTile(new t(i));e.push(i),this._tiles.set(i,l),l.visible=!1}return this._tiles.get(i)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../../core/JSONSupport.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./FeatureFilter.js\";var i;let c=i=class extends t{constructor(){super(...arguments),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}clone(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e([r({type:s,json:{write:!0}})],c.prototype,\"filter\",void 0),e([r({json:{write:!0}})],c.prototype,\"includedEffect\",void 0),e([r({json:{write:!0}})],c.prototype,\"excludedEffect\",void 0),e([r({type:Boolean,json:{write:!0}})],c.prototype,\"excludedLabelsVisible\",void 0),c=i=e([o(\"esri.views.layers.support.FeatureEffect\")],c);var l=c;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isSome as i,isNone as s}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{init as n,on as l}from\"../../core/watchUtils.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as p}from\"../../layers/support/commonProperties.js\";import{fixFields as d,unpackFieldNames as m,collectLabelingFields as c,collectElevationFields as f,collectFilterFields as y,collectFeatureReductionFields as h,collectFields as F,collectField as w,featureHasFields as g}from\"../../layers/support/fieldUtils.js\";import x from\"../../rest/support/Query.js\";import{loadArcade as b}from\"../../support/arcadeOnDemand.js\";import E from\"./support/FeatureEffect.js\";import v from\"./support/FeatureFilter.js\";import{getFetchPopupTemplate as q,getRequiredFields as j}from\"./support/popupUtils.js\";const I=r.getLogger(\"esri.views.layers.FeatureLayerView\"),R=r=>{let R=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.effect=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){n(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"effect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),l(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange())),l(this,\"layer.sublayer\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?d(t,[...m(t,e.outFields),...r]):d(t,r)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){I.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=i(this.filter)?this.filter.createQuery(e):new x(e);return i(this.timeExtent)&&(t.timeExtent=i(t.timeExtent)?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return b()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:t,layer:{fieldsIndex:r,objectIdField:s}}=this,n=\"renderer\"in t&&t.renderer,l=t.featureReduction,a=new Set,u=await o([n?n.collectRequiredFields(a,r):null,c(a,t),e?f(a,t):null,i(this.filter)?y(a,t,this.filter):null,this.effect?y(a,t,this.effect.filter):null,l?h(a,t,l):null]);if(t.timeInfo&&this.timeExtent&&F(a,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),\"feature\"===t.type&&t.floorInfo&&F(a,t.fieldsIndex,[t.floorInfo.floorField]),\"subtype-group\"===t.type){w(a,r,t.subtypeField);const e=t.sublayers.map((e=>{var t;return Promise.all([null==(t=e.renderer)?void 0:t.collectRequiredFields(a,r),c(a,e)])}));await o(e)}for(const i of u)i.error&&I.error(i.error);w(a,r,s),e&&\"displayField\"in t&&t.displayField&&w(a,r,t.displayField);const p=Array.from(a).sort();this._set(\"requiredFields\",p)}validateFetchPopupFeatures(e){if(s(e))return null;for(const r of e.clientGraphics){const i=r.layer;if(\"popupEnabled\"in i&&!i.popupEnabled)return new t(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i});if(\"popupTemplate\"in i){if(!q(i,e))return new t(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:i})}}}async fetchClientPopupFeatures(e){const t=i(e)?e.clientGraphics:null;if(!t||0===t.length)return Promise.resolve([]);const r=[],s=[],o=await this.createPopupQuery(e);for(const n of t){const{layer:t}=n;if(!(\"popupEnabled\"in t))continue;const l=m(this.layer.fieldsIndex,o.outFields),a=q(t,e);if(!i(a))continue;const u=await this._loadArcadeModules(a);u&&u.arcadeUtils.hasGeometryOperations(a)||!g(l,n)?s.push(n):r.push(n)}return\"stream\"===this.layer.type||0===s.length?Promise.resolve(r):(o.objectIds=s.map((e=>e.attributes[this.layer.objectIdField])),this.layer.queryFeatures(o).then((e=>r.concat(e.features))).catch((()=>s)))}async createPopupQuery(e){const t=this.layer.createQuery(),r=new Set;let s=!1;const o=i(e)&&e.clientGraphics?e.clientGraphics.map((e=>e.layer)):[this.layer];for(const n of o){if(!(\"popupEnabled\"in n))continue;const t=q(n,e);if(!i(t))continue;const o=await this._loadArcadeModules(t),l=o&&o.arcadeUtils.hasGeometryOperations(t);s=!(\"point\"!==this.layer.geometryType&&!l);const a=await j(this.layer,t);for(const e of a)r.add(e)}return t.returnGeometry=s,t.returnZ=s,t.returnM=s,t.outFields=Array.from(r),t.outSpatialReference=this.view.spatialReference,t}canResume(){return!!super.canResume()&&(!i(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([a()],R.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([a({readOnly:!0})],R.prototype,\"availableFields\",null),e([a({type:E})],R.prototype,\"effect\",void 0),e([a({type:v})],R.prototype,\"filter\",void 0),e([a(p)],R.prototype,\"timeExtent\",void 0),e([a()],R.prototype,\"layer\",void 0),e([a({type:Number})],R.prototype,\"maximumNumberOfFeatures\",null),e([a({readOnly:!0,type:Boolean})],R.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([a({readOnly:!0})],R.prototype,\"requiredFields\",void 0),e([a()],R.prototype,\"suspended\",void 0),e([a()],R.prototype,\"view\",void 0),R=e([u(\"esri.views.layers.FeatureLayerView\")],R),R};export default R;export{R as FeatureLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../AggregateGraphic.js\";import\"../../../geometry.js\";import i from\"../../../Graphic.js\";import{flatten as r}from\"../../../core/arrayUtils.js\";import s from\"../../../core/Collection.js\";import a from\"../../../core/Error.js\";import n from\"../../../core/has.js\";import{clone as l}from\"../../../core/lang.js\";import o from\"../../../core/Logger.js\";import{andThen as h,unwrapOr as u,isSome as d,isNone as p}from\"../../../core/maybe.js\";import{debounce as c,eachAlwaysValues as f,isAbortError as y,after as g}from\"../../../core/promiseUtils.js\";import{init as m,whenFalseOnce as _}from\"../../../core/watchUtils.js\";import{property as v}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as b}from\"../../../core/accessorSupport/decorators/subclass.js\";import{isHostedAgolService as R}from\"../../../layers/support/arcgisLayerUrl.js\";import{calculateTolerance as x}from\"../../../renderers/support/clickToleranceUtils.js\";import S from\"../../../rest/support/FeatureSet.js\";import w from\"../../../rest/support/Query.js\";import{MAX_FILTERS as F}from\"../engine/webgl/definitions.js\";import{LayerView2DMixin as U}from\"./LayerView2D.js\";import{createSchema as I}from\"./features/schemaUtils.js\";import{createOrReuseTileRenderer as E}from\"./features/tileRenderers.js\";import{computePxBuffer as C}from\"./features/support/pixelBuffering.js\";import{findSizeVV as T,createClusterCountSizeVariable as O,isClusterCompatibleRenderer as j,createClusterRenderer as q}from\"./support/clusterUtils.js\";import P from\"./support/FeatureCommandQueue.js\";import V from\"./support/FeatureLayerProxy.js\";import{toJSONGeometryType as L}from\"./support/util.js\";import{TileManager as N}from\"../tiling/TileManager.js\";import{FeatureLayerView as H}from\"../../layers/FeatureLayerView.js\";import J from\"../../layers/LayerView.js\";import{RefreshableLayerView as k}from\"../../layers/RefreshableLayerView.js\";import z from\"../../layers/effects/EffectList.js\";import $ from\"../../layers/support/FeatureFilter.js\";import M from\"../../layers/support/FeatureEffect.js\";import{createQueryGeometry as Q}from\"../../support/drapedUtils.js\";import A from\"../../webgl/capabilities.js\";import G from\"../../../geometry/Extent.js\";const D=2147483648,B=1,K=e=>(e&D)>>>31===B;function W(e){return e&&\"openPorts\"in e}const X=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let Y=class extends(H(k(U(J)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._commandsQueue=new P({process:e=>{switch(e.type){case\"processed-edit\":return this._doEdit(e);case\"refresh\":return this._doRefresh();case\"update\":return this._doUpdate()}}}),this._visibilityOverrides=new Set,this._effect=null,this._highlightIds=new Map,this._lastPixelBuffer=0,this._updateHighlight=c((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys())))),this._uploadsLocked=!1,this._needsClusterSizeUpdate=!1,this.filter=null,this.effectLists={included:new z,excluded:new z}}destroy(){var e,t;h(this._updateClusterSizeTask,(e=>e.remove())),null==(e=this._proxy)||e.destroy(),null==(t=this.tileRenderer)||t.destroy(),this._commandsQueue.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),m(this,\"effect\",(e=>{this.effectLists.included.effect=null==e?void 0:e.includedEffect})),m(this,\"effect\",(e=>{this.effectLists.excluded.effect=null==e?void 0:e.excludedEffect}))])}async _initProxy(){if(\"isTable\"in this.layer&&this.layer.isTable)throw new a(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new V({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get labelsVisible(){const e=\"subtype-group\"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&e.some((e=>e.labelingInfo&&e.labelsVisible))}get effect(){return u(this._effect,null)}set effect(e){const t=this._effect;d(t)&&d(t.filter)&&t.filter.enabled&&d(e)&&d(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange(\"effect\")}get effects(){return this.effect&&[this.effect]||[]}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r}=t,s=\"subtype-group\"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,a=\"renderer\"in t&&t.renderer,n=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:o}=this,h=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,u=JSON.stringify(this.clips),p=t.featureReduction&&t.featureReduction.toJSON(),c=\"sublayers\"in this.layer&&this.layer.sublayers.items.reduce(((e,t)=>e+`${t.visible?1:0}.${JSON.stringify(t.renderer)}.${t.labelsVisible}\\n.${JSON.stringify(t.labelingInfo)}`),\"\");return JSON.stringify({sublayerHash:c,filterHash:d(this.filter)&&this.filter.toJSON(),effectHash:d(this.effect)&&this.effect.toJSON(),streamFilter:h,gdbVersion:n,definitionExpression:r,historicMoment:l,availableFields:e,renderer:a,labelingInfo:s,timeExtent:o,floors:i,clipsHash:u,featureReduction:p})}get hasEffects(){return this.effectLists.included.hasEffects||this.effectLists.excluded.hasEffects}highlight(e){let t;return e instanceof i?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:s.isCollection(e)?t=e.map((e=>e&&e.getAttribute(this.layer.objectIdField))).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e&&e.getAttribute(this.layer.objectIdField)))),t&&t.length?(t=t.filter((e=>null!=e)),this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}hitTest(e,t){return this._hitTest(e,t)}queryStatistics(){return this._proxy.queryStatistics()}async querySummaryStatistics(e,t,i){const r={...t};var s;t.valueExpression&&(r.viewInfoParams={viewingMode:\"map\",scale:this.view.scale,spatialReference:null==(s=this.view.spatialReference)?void 0:s.toJSON()});return this._proxy.querySummaryStatistics(this._cleanUpQuery(e),r,i)}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=S.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:G.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new N({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(m(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(e=>this._edit(e))),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}async fetchPopupFeatures(e,i){if(d(i)&&i.clientGraphics.length){const e=i.clientGraphics[0];if(e instanceof t)return[e];i.clientGraphics=i.clientGraphics.filter((e=>{const{layer:t}=e,i=\"popupEnabled\"in t&&t.popupEnabled,r=\"popupTemplate\"in t&&t.popupTemplate,s=this.view.popup.defaultPopupTemplateEnabled;return i&&(r||s)}))}const s=this.validateFetchPopupFeatures(i);if(s)throw s;if(d(i)&&0===i.clientGraphics.length)return[];const a=this.fetchClientPopupFeatures(i);if(!e)return a;const n=this._fetchServicePopupFeatures(e,i);return f([a,n]).then(r)}async _fetchServicePopupFeatures(e,t){if(\"stream\"===this.layer.type||\"ogc-feature\"===this.layer.type)return[];const i=await this.createPopupQuery(t),{layer:r}=this,s=\"renderer\"in r&&r.renderer,a=d(t)?t.event:null,n=x({renderer:s,event:a});i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,n);const l=new Set,{objectIdField:o}=r,h=d(t)?t.clientGraphics:null;if(h)for(const u of h)l.add(u.attributes[o]);return r.queryFeatures(i).then((e=>e.features.filter((e=>!l.has(e.attributes[o])))))}createFetchPopupFeaturesQueryGeometry(e,t){return Q(e,t,this.view)}isUpdating(){var e;const t=\"renderer\"in this.layer&&null!=this.layer.renderer,i=this._commandsQueue.updating,r=null!=this._updatingRequiredFieldsPromise,s=!this._proxy||!this._proxy.isReady,a=this._pipelineIsUpdating,l=null===this.tileRenderer||(null==(e=this.tileRenderer)?void 0:e.updating),o=t&&(i||r||s||a||l);return n(\"esri-2d-log-updating\")&&console.log(`Updating FLV2D: ${o}\\n  -> hasRenderer ${t}\\n  -> hasPendingCommand ${i}\\n  -> updatingRequiredFields ${r}\\n  -> updatingProxy ${s}\\n  -> updatingPipeline ${a}\\n  -> updatingTileRenderer ${l}\\n`),o}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){if(\"path\"in e&&R(e.path)&&(\"feature\"===this.layer.type||\"subtype-group\"===this.layer.type)&&\"point\"===this.layer.geometryType&&!this.layer.capabilities.operations.supportsEditing&&n(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=n(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const t=n(\"featurelayer-snapshot-point-max-threshold\"),i=n(\"featurelayer-snapshot-point-coverage\"),r=this.view.extent,s=this.layer.fullExtent,a=null==s?void 0:s.clone().intersection(r),l=(null==a?void 0:a.width)*(null==a?void 0:a.height),o=(null==s?void 0:s.width)*(null==s?void 0:s.height),h=0===o?0:l/o;if(e<=t&&h>=i)return{mode:\"snapshot\",featureCount:e}}catch(t){X.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:t})}return{mode:\"on-demand\"}}async _createServiceOptions(){var e;const t=this.layer;if(\"stream\"===t.type)return null;const{capabilities:i,objectIdField:r}=t,s=t.fields.map((e=>e.toJSON())),a=t.fullExtent&&t.fullExtent.toJSON(),n=L(t.geometryType),o=t.timeInfo&&t.timeInfo.toJSON()||null,h=t.spatialReference?t.spatialReference.toJSON():null,u={...\"customParameters\"in t?t.customParameters:void 0,token:\"apiKey\"in t?t.apiKey:void 0},d=\"feature\"===t.type?t.globalIdField:null;let p;\"ogc-feature\"===t.type?p=t.source.getFeatureDefinition():W(t.source)?p=await t.source.openPorts():t.parsedUrl&&(p=l(t.parsedUrl),\"dynamicDataSource\"in t&&t.dynamicDataSource&&(p.query={layer:JSON.stringify({source:t.dynamicDataSource})}));const c=null!=(e=\"subtypeField\"in this.layer&&this.layer.subtypeField)?e:null,{mode:f,featureCount:y}=await this._detectQueryMode(p);return{type:f,subtypeField:c,featureCount:y,globalIdField:d,maxRecordCount:i.query.maxRecordCount,tileMaxRecordCount:i.query.tileMaxRecordCount,capabilities:i,fields:s,fullExtent:a,geometryType:n,objectIdField:r,source:p,timeInfo:o,spatialReference:h,customParameters:u}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=w.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}async _update(){return this._commandsQueue.push({type:\"update\"})}async _edit(e){if(this._validateEdit(e))return this._commandsQueue.push({type:\"edit\",edits:e})}async doRefresh(){return this._commandsQueue.push({type:\"refresh\"})}_validateEdit(e){const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);return i&&!r?(X.error(new a(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)),null):e}async _doUpdate(){try{if(this.destroyed||!this._hasRequiredSupport(this.layer)||!this._tileStrategy)return;const{effect:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=this._createSchemaConfig(),a=L(this.layer.geometryType),n=await C(r,a,this.layer.featureReduction),l=this._createConfiguration(s,i,t);this._lastPixelBuffer=0===n?0:Math.max(n,this._lastPixelBuffer),l.schema.source.pixelBuffer=this._lastPixelBuffer;const o=this._createTileRendererHash(r);if(o!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r);const t={added:this._tileStrategy.tileKeys(),removed:[]},i=this.layer;\"stream\"!==i.type&&W(i.source)&&(e.source=await i.source.openPorts()),await this._proxy.startup(this.view.featuresTilingScheme,l,e,t),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{const t=await this._proxy.update(l);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){y(e)||X.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r),this._updateClusterSizeVariable(),this._forceAttributeTextureUpload()}this._tileRendererHash=o,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}}async _doEdit(e){try{await this._proxy.onEdits(e)}catch(t){y(t),0}}async _doRefresh(){this._lockGPUUploads();try{await this._proxy.refresh()}catch(e){y(e),0}this._unlockGPUUploads()}_updateClusterSizeVariable(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._needsClusterSizeUpdate=!0,this._uploadsLocked||this._updateClusterSizeVariable()}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=T(e.visualVariables);if(d(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=O(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=\"renderer\"in this.layer&&this.layer.renderer,t=this.layer.featureReduction;if(d(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&j(e)){const i=t,r=[],s=q(r,e,i,this._aggregateValueRanges);return h(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(s,i),{renderer:s,aggregateFields:r,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await E(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}_createFeatureDataHash(e,t,i){const r=e.getAttributeHash(),s=JSON.stringify(t),a=d(i)&&JSON.stringify(i.filter),n=JSON.stringify(this.timeExtent);let l=\"\";return this._visibilityOverrides.forEach((e=>l+=e)),`${r}.${s}.${a}.${n}.${l}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=d(e)?e.timeExtent:null,i=d(this.timeExtent)&&d(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=d(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return e;const a=d(e)&&e.clone()||new $;return a.hiddenIds=this._visibilityOverrides,a.timeExtent=i,r&&(a.where=r),a}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const a=t.floorInfo.floorField;let n=\"(\"+a+\" IN ({ids}) OR \"+a+\" IS NULL)\";if(n=n.replace(\"{ids}\",s.join(\", \")),d(i)&&i.includes(a)){let e=new RegExp(\"AND \\\\(\"+a+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+a+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+n:n}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,a=new Array(F),n=this._injectOverrides(t);a[0]=d(n)?n.toJSON():null,a[1]=d(i)&&i.filter?i.filter.toJSON():null;const l=I(e);if(p(l))return null;const o=A();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:a,schema:l,supportsTextureFloat:o.supportsTextureFloat,maxTextureSize:o.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"renderer\"in e&&\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!A().supportsTextureFloat)||(X.error(new a(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),_(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())}_unlockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_createSchemaConfig(){const e=\"feature\"===this.layer.type?this.layer.historicMoment:null,t=\"feature\"===this.layer.type?this.layer.gdbVersion:null;return{renderer:\"renderer\"in this.layer&&this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:e,labelsVisible:\"labelsVisible\"in this.layer&&this.layer.labelsVisible,labelingInfo:\"labelingInfo\"in this.layer&&this.layer.labelingInfo,availableFields:this.availableFields,effect:this.effect,filter:this.filter,gdbVersion:t,pixelBuffer:0}}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{y(e)||X.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{y(e)||X.error(e)}))}_setLayersForFeature(e){const t=this.layer;e.layer=t,e.sourceLayer=t}_createHittestResult(e){return this._setLayersForFeature(e),d(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}async _hitTest(e,r){if(this.suspended||!this.tileRenderer)return null;const s=await this.tileRenderer.hitTest(e,r);if(0===s.length)return await g(1),null;const a=s[0];if(!K(a)){const e=await this._proxy.getFeature(a);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}const n=await this._proxy.getAggregate(a);if(p(n))return null;if(d(n.referenceId)){const e=await this._proxy.getFeature(n.referenceId);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}return this._createHittestResult(t.fromJSON(n))}};e([v()],Y.prototype,\"_serviceOptions\",void 0),e([v()],Y.prototype,\"_proxy\",void 0),e([v()],Y.prototype,\"_pipelineIsUpdating\",void 0),e([v()],Y.prototype,\"_effectiveRenderer\",void 0),e([v()],Y.prototype,\"_aggregateValueRanges\",void 0),e([v()],Y.prototype,\"_commandsQueue\",void 0),e([v()],Y.prototype,\"labelsVisible\",null),e([v({type:$})],Y.prototype,\"filter\",void 0),e([v({type:M})],Y.prototype,\"effect\",null),e([v({readOnly:!0})],Y.prototype,\"effects\",null),e([v({readOnly:!0})],Y.prototype,\"queryMode\",null),e([v()],Y.prototype,\"renderingConfigHash\",null),e([v()],Y.prototype,\"tileRenderer\",void 0),e([v()],Y.prototype,\"updating\",void 0),Y=e([b(\"esri.views.2d.layers.FeatureLayerView2D\")],Y);var Z=Y;export default Z;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{geometryTypes as t}from\"../../../geometry.js\";import r from\"../../../TimeExtent.js\";import{JSONMap as i}from\"../../../core/jsonMap.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import{clone as o}from\"../../../core/lang.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../../core/accessorSupport/decorators/writer.js\";import{fromJSON as l}from\"../../../geometry/support/jsonUtils.js\";import c from\"../../../rest/support/Query.js\";var d;const m=new i({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new i({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let h=d=class extends s{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.hiddenIds=new Set,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null,this.enabled=!1}writeWhere(e,t){t.where=e||\"1=1\"}enable(){this._set(\"enabled\",!0)}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:s,objectIds:n,units:a,distance:p}=this;return new c({geometry:o(r),objectIds:o(n),spatialRelationship:i,timeExtent:o(s),where:t,units:a,distance:p,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,hiddenIds:i,timeExtent:s,objectIds:n,units:a,distance:p}=this,l=new Set;return i.forEach((e=>l.add(e))),new d({geometry:o(t),hiddenIds:l,objectIds:o(n),spatialRelationship:r,timeExtent:o(s),where:e,units:a,distance:p})}};e([n({type:String})],h.prototype,\"where\",void 0),e([p(\"where\")],h.prototype,\"writeWhere\",null),e([n({types:t,json:{read:l,write:!0}})],h.prototype,\"geometry\",void 0),e([n({type:String,json:{read:{source:\"spatialRel\",reader:m.read},write:{target:\"spatialRel\",writer:m.write}}})],h.prototype,\"spatialRelationship\",void 0),e([n({json:{write:(e,t,r)=>t[r]=Array.from(e),read:e=>new Set(e)}})],h.prototype,\"hiddenIds\",void 0),e([n({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],h.prototype,\"distance\",void 0),e([n({type:[Number],json:{write:!0}})],h.prototype,\"objectIds\",void 0),e([n({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],h.prototype,\"units\",void 0),e([n({type:r,json:{write:!0}})],h.prototype,\"timeExtent\",void 0),e([n({readOnly:!0})],h.prototype,\"enabled\",void 0),h=d=e([a(\"esri.views.layers.support.FeatureFilter\")],h);var y=h;export default y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=s.getLogger(\"esri.views.2d.engine.webgl\");function o(s){return r(s.minDataValue)&&r(s.maxDataValue)&&null!=s.minSize&&null!=s.maxSize?i.SIZE_MINMAX_VALUE:(s.expression&&\"view.scale\"===s.expression||s.valueExpression&&\"$view.scale\"===s.valueExpression)&&Array.isArray(s.stops)?i.SIZE_SCALE_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&(Array.isArray(s.stops)||\"levels\"in s&&s.levels)?i.SIZE_FIELD_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&null!=s.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new e(\"mapview-bad-type\",\"Found invalid size VisualVariable\",s)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import o from\"../../core/Logger.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{property as l}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";let p=class extends(s(i(n(r.EventedMixin(t))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer&&this.layer.title||\"no title\";throw o.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([l()],p.prototype,\"fullOpacity\",null),e([l()],p.prototype,\"layer\",void 0),e([l()],p.prototype,\"parent\",void 0),e([l({readOnly:!0})],p.prototype,\"suspended\",null),e([l({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([l({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([l({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([l({readOnly:!0})],p.prototype,\"updatingProgress\",null),e([l()],p.prototype,\"visible\",null),p=e([a(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../../core/JSONSupport.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";let e=class extends o{};e=r([s(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../geometry/Geometry.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import p from\"./ClipArea.js\";import m from\"../../../geometry/Extent.js\";import i from\"../../../geometry/Polygon.js\";var y;const n={base:t,key:\"type\",typeMap:{extent:m,polygon:i}};let c=y=class extends p{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};e([r({types:n,json:{read:s,write:!0}})],c.prototype,\"geometry\",void 0),e([r({readOnly:!0})],c.prototype,\"version\",null),c=y=e([o(\"esri.views.layers.support.Geometry\")],c);var a=c;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";let t=class extends e{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],t.prototype,\"path\",void 0),r([o({readOnly:!0})],t.prototype,\"version\",null),t=r([s(\"esri.views.layers.support.Path\")],t);var p=t;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import{referenceSetter as s}from\"../../../core/collectionUtils.js\";import{init as i}from\"../../../core/watchUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{Container as a}from\"../engine/Container.js\";import p from\"../../layers/support/ClipArea.js\";import h from\"../../layers/support/ClipRect.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=e.ofType({key:\"type\",base:p,typeMap:{rect:h,path:d,geometry:n}}),l=e=>{let p=class extends e{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([i(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),i(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),i(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),i(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([r({type:c,set(t){const e=s(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],p.prototype,\"clips\",void 0),t([r()],p.prototype,\"moving\",void 0),t([r()],p.prototype,\"attached\",void 0),t([r()],p.prototype,\"container\",void 0),t([r()],p.prototype,\"suspended\",void 0),t([r({readOnly:!0})],p.prototype,\"updateParameters\",void 0),t([r()],p.prototype,\"updateRequested\",void 0),t([r()],p.prototype,\"updating\",null),t([r()],p.prototype,\"view\",void 0),p=t([o(\"esri.views.2d.layers.LayerView2D\")],p),p};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"sourceRoot":""}